{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/layers/DimensionLayerView.js","../node_modules/@arcgis/core/views/3d/layers/DimensionLayerView3D.js"],"names":["d","s","i","l","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","fullOpacity","n","get","suspended","canResume","suspendInfo","getSuspendInfo","legendEnabled","updating","updatingHandles","isUpdating","updatingProgress","visible","_overrideIfSome","loaded","view","ready","viewNotReady","layerNotLoaded","layerInvisible","a","prototype","readOnly","type","Boolean","p","u","c","arguments","slicePlaneEnabled","supportsHeightUnitConversion","postscript","addResolvingPromise","_validateHeightModelInfo","async","AbortController","signal","handles","add","abort","defaultsFromMap","heightModelInfoReady","heightModelInfo","effectiveScaleRange","minScale","maxScale","outsideScaleRange","interactive","analysisView","results","selectedDimension","createLengthDimensions","V","m","_analysisModule","y","source","_destroyAnalysisView","_createAnalysisView","w","destroy","remove","_createAnalysisViewTask","promise","_createAnalysisViewPromise","_loadAnalysisModule","default","analysis","h","_"],"mappings":"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","file":"static/js/109.237c5d0b.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.handles.add(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import s from\"../../core/Collection.js\";import{isSome as i}from\"../../core/maybe.js\";import{createAbortError as t}from\"../../core/promiseUtils.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let n=class extends a{constructor(...e){super(...e),this.layer=null}get interactive(){return!!i(this.analysisView)&&this.analysisView.interactive}set interactive(e){i(this.analysisView)&&(this.analysisView.interactive=e)}get results(){return i(this.analysisView)?this.analysisView.results:new s}get selectedDimension(){return i(this.analysisView)?this.analysisView.selectedDimension:null}set selectedDimension(e){i(this.analysisView)&&(this.analysisView.selectedDimension=e)}async createLengthDimensions(e){if(!i(this.analysisView))throw t();await this.analysisView.createLengthDimensions(e)}};return e([r()],n.prototype,\"layer\",void 0),e([r()],n.prototype,\"interactive\",null),e([r({readOnly:!0})],n.prototype,\"results\",null),e([r()],n.prototype,\"selectedDimension\",null),e([r()],n.prototype,\"analysisView\",void 0),n=e([o(\"esri.views.layers.DimensionLayerView\")],n),n};export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import{createTask as i}from\"../../../core/asyncUtils.js\";import e from\"../../../core/Error.js\";import{isSome as a,destroyMaybe as t,abortMaybe as r,isNone as o}from\"../../../core/maybe.js\";import{isAborted as n,createAbortError as l}from\"../../../core/promiseUtils.js\";import{watch as y,syncAndInitial as w}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as m}from\"./LayerView3D.js\";import p from\"../../layers/DimensionLayerView.js\";import d from\"../../layers/LayerView.js\";const V=\"analysis-view-handles\";let u=class extends(m(p(d))){constructor(s){super(s),this.type=\"dimension-3d\",this._analysisModule=null}initialize(){this.handles.add(y((()=>this.layer.source),(s=>{this._destroyAnalysisView(),a(s)&&this._createAnalysisView(s)}),w),V)}destroy(){this.handles.remove(V),this._destroyAnalysisView()}isUpdating(){return a(this._createAnalysisViewTask)||a(this.analysisView)&&this.analysisView.updating}async whenAnalysisView(){if(a(this.analysisView))return this.analysisView;if(a(this._createAnalysisViewTask))return this._createAnalysisViewTask.promise;throw new e(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been set on the DimensionLayer of this layer view\")}_createAnalysisView(s){const e=i((async i=>(this.analysisView=await this._createAnalysisViewPromise(s,i),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView)));this.addResolvingPromise(e.promise),this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=t(this.analysisView),this._createAnalysisViewTask=r(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,i){let e=this._analysisModule;if(o(e)){const s=await this._loadAnalysisModule();this._analysisModule=s,e=s}const a=new e.default({analysis:s,view:this.view,parent:this});if(await a.when(),n(i))throw a.destroy(),l();return a}_loadAnalysisModule(){return import(\"../analysis/DimensionAnalysisView3D.js\")}};s([h()],u.prototype,\"type\",void 0),s([h()],u.prototype,\"analysisView\",void 0),s([h()],u.prototype,\"_createAnalysisViewTask\",void 0),u=s([c(\"esri.views.3d.layers.DimensionLayerView3D\")],u);const _=u;export{_ as default};\n"],"sourceRoot":""}