{"version":3,"sources":["../node_modules/@arcgis/core/views/support/euclideanAreaMeasurementUtils.js","../node_modules/@arcgis/core/chunks/CheckerBoard.glsl.js","../node_modules/@arcgis/core/views/3d/analysis/support/measurementUtils.js","../node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/MeasurementData.js","../node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementController.js","../node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementPathHelper.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CheckerBoardTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CheckerBoardTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/CheckerBoardMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementAreaVisualElement.js","../node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/AreaMeasurementAnalysisView3D.js"],"names":["h","t","o","positionsWorldCoords","y","j","n","hasZ","g","spatialReference","U","r","C","length","e","R","rings","push","c","d","k","f","s","W","u","l","i","m","p","b","v","a","Float64Array","extensions","add","vertex","fragment","attributes","POSITION","UV0","varyings","hasMultipassTerrain","code","include","uniforms","size","color1","color2","transparencyPassType","Color","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","q","distance","G","S","setPoint","Math","abs","WGS84","T","X","constructor","this","positionsRenderCoords","positionsProjectedWorldCoords","positionsFittedRenderCoords","positionsGeographic","positionsSpherical","positionsStereographic","pathSegmentLengths","geodesicPathSegmentLengths","perimeterSegmentLengths","intersectingSegments","Set","geodesicIntersectingSegments","areaCentroidWorldCoords","areaCentroidRenderCoords","geodesicAreaCentroidRenderCoords","_length","_centroidRenderCoords","_planeWorldCoords","_worldUp","_worldTangent","_frame","_pathVersion","_validMeasurement","_hasCursorPoint","_mode","_tempU","_tempV","_tempVec3","_tempSphere","center","radius","_sceneView","unitNormalizer","update","renderSpatialReference","version","isValidPolygon","_updateCursorSegmentLength","numVertices","_resize","A","_","L","M","forEachVertexPosition","z","Z","elevationProvider","P","_updatePathLengths","pathLength","normalizeDistance","_updateGeodesicPathLengths","geodesicPathLength","_updateMode","_updateArea","_updateGeodesicArea","area","geodesicArea","perimeterLength","triangleIndices","geodesicTriangleIndices","clear","getData","fittingMode","cursorSegmentLength","geodesicCursorSegmentLength","actualMeasurementMode","renderCoordsHelper","x","worldUpAtPosition","worldBasisAtPosition","w","Error","V","_selectFittingMode","forEach","getAltitude","I","_updatePerimeterLengths","_updateIntersectingSegments","normalizeArea","_computeArea","D","toRenderCoords","_updateGeodesicIntersectingSegments","_computeGeodesicArea","B","H","map","F","reduce","max","sqrt","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","cos","verticalAngleThreshold","lastPoint","E","N","Auto","J","Euclidean","super","initialize","view","_measurementDataManager","addHandles","analysisViewData","path","on","_update","cursorPoint","mode","validMeasurement","measurementData","constructOnly","prototype","getLogger","EventedAccessor","_handles","_version","_internalGeometryChange","_extent","destroy","areaMeasurement","_set","_initialize","constructed","_editGeometry","components","isClosed","extent","vertices","forEachVertex","pos","coordinateHelper","removeAll","geometry","_updateEditGeometryFromModelGeometry","_makeDirty","notifyChange","remove","_editGeometryOperations","fromGeometry","state","viewingMode","emit","addedVertices","removedVertices","data","getLastVertex","vectorToPoint","getVertex","index","rightEdge","rightVertex","getVertexPositionAsPoint","getVertexPositionAsPointFromIndex","iterateVertices","appendVertex","pointToVector","close","closeComponent","ensureContains","setVertexPosition","equals","initializeProgram","rctx","shader","get","configuration","_setPipelineState","NONE","FrontFace","blending","transparent","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","factor","units","initializePipeline","SRC_ALPHA","ONE","ONE_MINUS_SRC_ALPHA","arguments","cullAboveGround","count","COUNT","_configuration","dispose","getConfiguration","parameters","multipassTerrain","enabled","intersect","requiresSlot","Alpha","TRANSPARENT_MATERIAL","TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL","OPAQUE_MATERIAL","DRAPED_MATERIAL","createGLMaterial","createBufferWriter","beginSlot","ensureTechnique","_checkerBoardMaterial","_renderOccluded","OccludeAndTransparent","_geometry","_size","_color1","_color2","applyProps","renderOccluded","_updateMaterial","_geometryChanged","setParameters","createExternalResources","destroyExternalResources","forEachExternalMaterial","createGeometries","transform","position","uv","exclusive","addGeometry","recreateGeometry","_params","pathLineColor","toUnitRGBA","pathLineWidth","intersectingLineColor","perimeterLineColor","perimeterLineWidth","projectionLineColor","projectionLineWidth","projectionLineStippleSize","areaColor1","areaColor2","labelDistance","_path","_intersectedPath","_perimeter","_intersectedPerimeter","_projectionLines","_measurementArea","_areaLabel","_pathLengthLabel","_cursorSegmentLengthLabel","_perimeterLengthLabel","_pathSegments","_perimeterSegments","_cursorSegment","_origin","_originTransform","_cursorPositionRenderSpace","messages","viewData","areaLabel","perimeterLengthLabel","loadingMessages","visible","testData","labels","attached","width","color","O","stipplePattern","backgroundColor","textColor","fontSize","Large","Small","unit","camera","_updateLabels","_updateMessageBundle","set","destroyed","ready","_updateViewData","_updateOrigin","_updatePathSegments","_updatePerimeterSegments","_updateProjectionLines","_toPreferredAreaUnit","pathVersion","positionsProjected","areaCentroid","pathLengthLabelSegmentIndex","perimeterLengthLabelSegmentIndex","checkerSize","_createSegments","has","all","nonIntersecting","intersecting","setGeometryFromSegments","_updateAreaEuclidean","_updateAreaGeodesic","_formatAreaLabel","type","point","text","_formatLengthLabel","left","right","segment","sampleLocation","anchor","overlaps","_preferredAreaUnit","_preferredLengthUnit","_deriveLengthUnitFromAreaUnit","then","finally","readOnly","analysis","lastDraggedVertex","analysisVisualization","analysisController","updating","result","perimeter","_defaultUnit","visualization","controller","nonNullable"],"mappings":"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","file":"static/js/97.2bf5123f.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";import{createArea as o}from\"../../core/quantityUtils.js\";import{areaUnitFromSpatialReference as r}from\"../../core/unitUtils.js\";import{e as n}from\"../../chunks/earcut.js\";import{s as e,z as s,p as i}from\"../../chunks/vec3.js\";import{c}from\"../../chunks/vec3f64.js\";import{projectVectorToVector as f}from\"../../geometry/projection.js\";import{fromPoints as u,wrap as l,normal as m,projectPointLocal as p}from\"../../geometry/support/plane.js\";import{areaPoints2d as a}from\"../../geometry/support/triangle.js\";import{computeEuclideanMeasurementSR as g}from\"./measurementUtils.js\";function h(t,o=U()){return y(t,o)}function j(t,o=U()){return y(t,o,!1)}function y(n,h,j=n.hasZ){const y=g(n.spatialReference),U=r(y);if(t(U))return null;const C=(t,o)=>!(o.length<2)&&(e(t,o[0],o[1],j&&o[2]||0),!0);let R=0;for(const t of n.rings){const o=t.length;if(o<3)continue;const{positionsWorldCoords:r}=h;for(;r.length<o;)r.push(c());const g=d,j=e(k,0,0,0),U=1/o;for(let e=0;e<o;e++){if(!C(g,t[e]))return null;if(!f(g,n.spatialReference,r[e],y))return null;s(j,j,r[e],U)}const W=u(r[0],r[1],j,l());if(0===i(m(W)))continue;for(let t=0;t<o;t++)p(W,j,r[t],r[t]);const b=v(r);for(let t=0;t<b.length;t+=3)R+=a(r[b[t]],r[b[t+1]],r[b[t+2]])}return o(R,U)}const d=c(),k=c();function U(){return{positionsWorldCoords:[]}}function v(t){return n(C(t),[],2)}function C(t){const o=new Float64Array(2*t.length);for(let r=0;r<t.length;++r){const n=t[r],e=2*r;o[e+0]=n[0],o[e+1]=n[1]}return o}export{y as computeEuclideanPlanarArea,U as createEuclideanPlanarAreaCache,j as euclideanHorizontalPlanarArea,h as euclideanPlanarArea,v as triangulate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{multipassTerrainTest as e}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2PassUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float4PassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{TransparencyPassType as t}from\"../views/3d/webgl-engine/lib/TransparencyPassType.js\";import{VertexAttribute as l}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function n(n){const c=new d;c.extensions.add(\"GL_OES_standard_derivatives\");const{vertex:v,fragment:g}=c;return o(v,n),c.attributes.add(l.POSITION,\"vec3\"),c.attributes.add(l.UV0,\"vec2\"),c.varyings.add(\"vUV\",\"vec2\"),n.hasMultipassTerrain&&c.varyings.add(\"depth\",\"float\"),v.code.add(a`\n    void main(void) {\n      vUV = uv0;\n      ${n.hasMultipassTerrain?\"depth = (view * vec4(position, 1.0)).z;\":\"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `),c.include(e,n),g.uniforms.add(new i(\"size\",(e=>e.size))),g.uniforms.add(new s(\"color1\",(e=>e.color1))),g.uniforms.add(new s(\"color2\",(e=>e.color2))),g.include(r),g.code.add(a`\n    void main() {\n      ${n.hasMultipassTerrain?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${n.transparencyPassType===t.Color?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n  `),c}const c=Object.freeze(Object.defineProperty({__proto__:null,build:n},Symbol.toStringTag,{value:\"Module\"}));export{c as C,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as t,a as e,g as r,d as n,e as o,i as s,c as i,n as f,f as u}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../geometry/geometryEngine.js\";import l from\"../../../../geometry/Polygon.js\";import{projectPointToVector as m,projectPointToWGS84ComparableLonLat as g,projectVectorToWGS84ComparableLonLat as p}from\"../../../../geometry/projection.js\";import h from\"../../../../geometry/SpatialReference.js\";import{InverseGeodeticSolverResult as j,inverseGeodeticSolver as y}from\"../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as d}from\"../../support/mathUtils.js\";function w(o,s){const i=s.center;t(i,0,0,0);for(let t=0;t<o.length;++t)e(i,i,o[t]);r(i,i,1/o.length);let f=0;for(let t=0;t<o.length;++t)f=Math.max(f,n(i,o[t]));s.radius=Math.sqrt(f)}function P(t,e){if(t.length<3)throw new Error(\"need at least 3 points to fit a plane\");d(t[0],t[1],t[2],e)}function M(t,e){return o(t,e)+t[3]}function b(t,e,r){return m(t,R,r)&&m(e,S,r)?s(R,S):0}function k(t,e){if(!g(t,R)||!g(e,S))return 0;const r=new j;return y(r,[R[0],R[1]],[S[0],S[1]]),r.distance}function q(t,e,r){const n=new j;return y(n,[t[0],t[1]],[e[0],e[1]],r),n.distance}function v(t,e,r,n){const o=G;return p(t,n,R)&&p(e,n,S)&&p(r,n,U)?(o.setPoint(0,0,R),o.setPoint(0,1,S),o.setPoint(0,2,U),Math.abs(c(o,\"square-meters\"))):0}function x(r,n=null,s=!0){const a=1e-6,c=(t,e)=>{if(0===e[0]&&0===e[1]&&0===e[2])return!1;for(let r=0;r<t.length;++r)if(o(e,t[r])<-a)return!1;return!0};if(0===r.length)return!1;if(1===r.length)return n&&i(n,r[0]),!0;t(T,0,0,0);for(let t=0;t<r.length;++t)e(T,T,r[t]);if(f(T,T),c(r,T))return n&&i(n,T),!0;if(!s)return!1;for(let t=0;t<r.length;++t)for(let e=0;e<r.length;++e)if(t!==e&&(u(T,r[t],r[e]),f(T,T),c(r,T)))return n&&i(n,T),!0;return!1}function E(t){return\"mouse\"!==t.pointerType||0===t.button}const R=a(),S=a(),U=a(),G=new l({rings:[[R,S,U]],spatialReference:h.WGS84}),T=a();export{P as bestFitPlane,w as boundingSphere,x as fitHemisphere,E as isPrimaryPointerAction,M as planePointDistance,b as segmentLengthEuclidean,k as segmentLengthGeodesic,q as segmentLengthGeodesicVector,v as triangleAreaGeodesic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{isSome as t,unwrapOr as s}from\"../../../../../core/maybe.js\";import{createLength as i,createArea as o}from\"../../../../../core/quantityUtils.js\";import{s as r,d as n}from\"../../../../../chunks/vec2.js\";import{a as h}from\"../../../../../chunks/vec2f64.js\";import{n as a,i as d,c as g,f as l,o as p,b as c,e as m,g as u,a as _}from\"../../../../../chunks/vec3.js\";import{c as C}from\"../../../../../chunks/vec3f64.js\";import{c as f}from\"../../../../../chunks/vec4f64.js\";import{canProjectWithoutEngine as S,canProjectToWGS84ComparableLonLat as L,projectPointToVector as P,projectPointToWGS84ComparableLonLat as R,projectDirection as j,projectVectorToVector as M}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as A,getReferenceEllipsoid as W}from\"../../../../../geometry/projectionEllipsoid.js\";import v from\"../../../../../geometry/SpatialReference.js\";import{Axis as w}from\"../../../../../geometry/support/Axis.js\";import{segmentIntersects as z}from\"../../../../../geometry/support/intersectsBase.js\";import{areaPoints2d as I}from\"../../../../../geometry/support/triangle.js\";import{MeasurementMode as U}from\"../../interfaces.js\";import{segmentLengthGeodesicVector as G,bestFitPlane as V,fitHemisphere as y,triangleAreaGeodesic as T,planePointDistance as F,boundingSphere as b,segmentLengthGeodesic as E,segmentLengthEuclidean as N}from\"../../support/measurementUtils.js\";import{midpoint as x}from\"../../support/viewUtils.js\";import{getElevationAtPoint as k}from\"../../../support/ElevationProvider.js\";import{makeOrthonormal as q,tangentFrame as D}from\"../../../support/mathUtils.js\";import{compactIndices as B}from\"../../../webgl-engine/lib/Indices.js\";import{triangulate as H}from\"../../../../support/euclideanAreaMeasurementUtils.js\";class X{constructor(e,t){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=C(),this.areaCentroidRenderCoords=C(),this.geodesicAreaCentroidRenderCoords=C(),this._length=0,this._centroidRenderCoords=C(),this._planeWorldCoords=f(),this._worldUp=C(),this._worldTangent=C(),this._frame=[C(),C(),C()],this._pathVersion=-1,this._validMeasurement=!1,this._hasCursorPoint=!1,this._mode=null,this._tempU=C(),this._tempV=C(),this._tempVec3=C(),this._tempSphere={center:C(),radius:0},this._sceneView=e,this.unitNormalizer=t}update(e,s,o,r,n,h,d){const g=this.unitNormalizer,l=this._sceneView.renderSpatialReference,p=this.unitNormalizer.spatialReference,c=t(s);if(this._pathVersion===e.version&&this._validMeasurement===r&&!d&&this._hasCursorPoint===c&&this._mode===h){return!e.isValidPolygon&&(this._updateCursorSegmentLength(e,s),!0)}this._pathVersion=e.version,this._validMeasurement=r,this._hasCursorPoint=c;const m=e.numVertices;this._resize(m);const u=A(o.spatialReference),_=S(o.spatialReference,u)&&L(o.spatialReference),{positionsGeographic:C,positionsWorldCoords:f,positionsRenderCoords:j,positionsSpherical:M}=this;e.forEachVertexPosition(((e,t)=>{Z(o.elevationProvider,e),P(e,f[t],p),P(e,j[t],l),_&&(R(e,C[t]),P(e,M[t],u),a(M[t],M[t]))}));const W=this._updatePathLengths(r);if(this.pathLength=this._length>1?i(g.normalizeDistance(W),\"meters\"):null,_){const e=this._updateGeodesicPathLengths(r,p);this.geodesicPathLength=this._length>1?i(e,\"meters\"):null}else this.geodesicPathLength=null;return this._updateCursorSegmentLength(e,s),this._updateMode(e,h),r?(this._updateArea(o,g,l,p,n),_&&this._updateGeodesicArea(o),!0):(this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear(),!0)}getData(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,cursorSegmentLength:this.cursorSegmentLength,geodesicCursorSegmentLength:this.geodesicCursorSegmentLength,unitNormalizer:this.unitNormalizer,actualMeasurementMode:this.actualMeasurementMode}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(C()),this.positionsRenderCoords.push(C()),this.positionsProjectedWorldCoords.push(h()),this.positionsFittedRenderCoords.push(C()),this.positionsGeographic.push(C()),this.positionsSpherical.push(C()),this.positionsStereographic.push(h()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}_updatePathLengths(e){const t=this.positionsWorldCoords,s=this.pathSegmentLengths;let i=0;for(let o=0;o<this._length;++o){const r=s[o]=d(t[o],t[(o+1)%this._length]);(o<this._length-1||e)&&(i+=r)}return i}_updateGeodesicPathLengths(e,t){const s=this.positionsGeographic,i=this.geodesicPathSegmentLengths;let o=0;for(let r=0;r<this._length;++r){const n=i[r]=G(s[r],s[(r+1)%this._length],t);(r<this._length-1||e)&&(o+=n)}return o}_updateArea(e,t,s,n,h){const a=e.renderCoordsHelper,d=this.positionsWorldCoords,C=this.positionsRenderCoords,f=this.positionsProjectedWorldCoords,S=this.positionsFittedRenderCoords,L=this._planeWorldCoords,P=this._centroidRenderCoords;x(C,P),a.worldUpAtPosition(P,this._worldUp),a.worldBasisAtPosition(P,w.X,this._worldTangent),j(P,this._worldUp,s,this._worldUp,n),j(P,this._worldTangent,s,this._worldTangent,n),d.length>2&&V(d,L),this.fittingMode=this._selectFittingMode(L,d,this._worldUp,h);let R=0;if(\"horizontal\"===this.fittingMode){let e=-1/0;C.forEach(((t,s)=>{const i=a.getAltitude(C[s]);i>e&&(e=i,R=s)}))}const A=d[R];let W=L,v=this._worldTangent;\"horizontal\"===this.fittingMode?W=this._worldUp:\"vertical\"===this.fittingMode&&(W=this._tempVec3,v=this._worldUp,q(L,this._worldUp,W)),g(this._frame[2],W),q(v,W,this._frame[0]),l(this._frame[1],this._frame[0],this._frame[2]),p(this._frame[1],this._frame[1]);const z=this._tempVec3,I=this._tempU,U=this._tempV;for(let i=0;i<this._length;++i){const e=f[i],t=S[i];c(z,d[i],A),r(e,m(this._frame[0],z),m(this._frame[1],z)),u(I,this._frame[0],e[0]),u(U,this._frame[1],e[1]),_(z,I,U),_(z,z,A),M(z,n,t,s)}this.perimeterLength=this._length>0?i(t.normalizeDistance(this._updatePerimeterLengths()),\"meters\"):null,x(S,this.areaCentroidRenderCoords),M(this.areaCentroidRenderCoords,s,this.areaCentroidWorldCoords,n),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?o(t.normalizeArea(this._computeArea()),\"square-meters\"):null}_updateGeodesicArea(e){const{renderCoordsHelper:t,spatialReference:s}=e,{positionsSpherical:i,positionsStereographic:n}=this,h=this._tempVec3,a=y(i,h);if(!a)return void(this.geodesicArea=null);const d=this._tempU,g=this._tempV;D(h,d,g);for(let o=0;o<this._length;++o){const e=m(i[o],d),t=m(i[o],g),s=m(i[o],h);r(n[o],e/s,t/s)}u(h,h,W(s).radius),t.toRenderCoords(h,A(s),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=a&&0===this.geodesicIntersectingSegments.size?o(this._computeGeodesicArea(),\"square-meters\"):null}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths;let s=0;for(let i=0;i<this._length;++i){s+=t[i]=n(e[i],e[(i+1)%this._length])}return s}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];z(o,r,n,h)&&(t.add(s),t.add(i))}}_computeArea(){const e=this.positionsProjectedWorldCoords,t=this.triangleIndices=B(H(e));let s=0;for(let i=0;i<t.length;i+=3)s+=I(e[t[i]],e[t[i+1]],e[t[i+2]]);return s}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];z(o,r,n,h)&&(t.add(s),t.add(i))}}_computeGeodesicArea(){const e=this.positionsGeographic,t=this.positionsStereographic,s=this.geodesicTriangleIndices=B(H(t));let i=0;for(let o=0;o<s.length;o+=3)i+=T(e[s[o]],e[s[o+1]],e[s[o+2]],v.WGS84);return i}_selectFittingMode(t,s,i,o){const r=s.map((e=>Math.abs(F(t,e)))).reduce(((e,t)=>Math.max(e,t)),0);b(s,this._tempSphere);const n=r/(2*this._tempSphere.radius),h=n<o.maxRelativeErrorCoplanar,a=n<o.maxRelativeErrorAlmostCoplanar;let d=\"horizontal\";if(h)d=\"oblique\";else if(a){d=Math.abs(m(i,t))>Math.cos(e(o.verticalAngleThreshold))?\"horizontal\":\"vertical\"}return d}_updateCursorSegmentLength(e,s){const o=e.lastPoint;!e.isValidPolygon&&t(o)&&t(s)?(this.geodesicCursorSegmentLength=i(E(o,s),\"meters\"),this.cursorSegmentLength=i(this.unitNormalizer.normalizeDistance(N(o,s,this.unitNormalizer.spatialReference)),\"meters\")):(this.geodesicCursorSegmentLength=null,this.cursorSegmentLength=null)}_updateMode(e,s){if(s===U.Auto){this.actualMeasurementMode=\"euclidean\";let s=0;null!=this.geodesicPathLength&&(s+=this.geodesicPathLength.value),!e.isValidPolygon&&t(this.geodesicCursorSegmentLength)&&(s+=this.geodesicCursorSegmentLength.value),s>J&&(this.actualMeasurementMode=\"geodesic\")}else this.actualMeasurementMode=s===U.Euclidean?\"euclidean\":\"geodesic\";null==this.geodesicPathLength&&(this.actualMeasurementMode=\"euclidean\"),this._mode=s}}function Z(e,t){t.hasZ||(t.z=s(k(e,t,\"ground\"),0))}const J=1e5;export{X as MeasurementDataManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{watch as r,sync as a}from\"../../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as i}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as n,WGS84ECEFSpatialReference as p,SphericalECEFSpatialReference as m}from\"../../../../../geometry/projectionEllipsoid.js\";import{MeasurementDataManager as c}from\"./MeasurementData.js\";import{UnitNormalizer as l}from\"../../support/UnitNormalizer.js\";let u=class extends t{constructor(e){super(e)}initialize(){const{spatialReference:e}=this.view,t=n(e),s=t===m?p:t,o=!e||i(e,s)?s:e,u=new l(o);this._measurementDataManager=new c(this.view,u),this.addHandles([this.analysisViewData.path.on(\"change\",(()=>this._update())),r((()=>this.analysisViewData.cursorPoint),(()=>this._update()),a),r((()=>this.analysisViewData.mode),(()=>this._update()),a)]),this._update()}_update(e=!1){const{analysisViewData:t,view:r}=this,a={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};this._measurementDataManager.update(t.path,t.cursorPoint,r,t.validMeasurement,a,t.mode,e)&&(t.measurementData=this._measurementDataManager.getData())}};e([s({constructOnly:!0})],u.prototype,\"view\",void 0),e([s({constructOnly:!0})],u.prototype,\"analysis\",void 0),e([s({constructOnly:!0})],u.prototype,\"analysisViewData\",void 0),u=e([o(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementController\")],u);export{u as AreaMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import r from\"../../../../../core/Handles.js\";import o from\"../../../../../core/Logger.js\";import{destroyMaybe as i,isSome as s,isNone as n,unwrap as a}from\"../../../../../core/maybe.js\";import{watch as m,syncAndInitial as h}from\"../../../../../core/reactiveUtils.js\";import{property as c}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import d from\"../../../../../geometry/Point.js\";import{tryProjectWithZConversion as p}from\"../../../../../geometry/projection.js\";import{empty as u,expandPointInPlace as y}from\"../../../../../geometry/support/aaBoundingRect.js\";import{logFailedGeometryProjectionError as g}from\"../../support/projectionUtils.js\";import{createCoordinateHelper as _}from\"../../../../interactive/coordinateHelper.js\";import{EditGeometry as G,Component as f}from\"../../../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as v}from\"../../../../interactive/editGeometry/EditGeometryOperations.js\";const V=\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper\",x=o.getLogger(V);let P=class extends t.EventedAccessor{constructor(e={}){super(e),this._handles=new r,this._version=0,this._internalGeometryChange=!1,this._extent=u()}destroy(){this._handles=i(this._handles)}set areaMeasurement(e){this._set(\"areaMeasurement\",e),s(e)&&s(this.view)&&this._initialize(e,this.view)}set view(e){this._set(\"view\",e),s(e)&&s(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}get constructed(){return s(this.areaMeasurement)&&s(this.view)}get version(){return this._version}get isValidPolygon(){return this.constructed&&this._editGeometry.components.length>0&&this._editGeometry.components[0].isClosed()}get extent(){if(this.constructed&&this._editGeometry.components.length>0&&this._editGeometry.components[0].vertices.length>0){const e=u(this._extent);return this.forEachVertex((t=>{y(e,t.pos)})),e}return null}get spatialReference(){return this.constructed?this._editGeometry.coordinateHelper.spatialReference:null}_initialize(e,t){this._handles.removeAll(),this._handles.add(m((()=>e.geometry),(()=>{this._updateEditGeometryFromModelGeometry(e,t)}),h)),this._makeDirty(!0)}_makeDirty(e=!1){this.notifyChange(\"isValidPolygon\"),this.notifyChange(\"initialized\"),this.notifyChange(\"extent\"),e&&this.notifyChange(\"numVertices\")}_updateEditGeometryFromModelGeometry(e,t){if(this._version++,this._internalGeometryChange)return;this._handles.remove(\"EditGeometry\");let r=e.geometry;if(s(r)){const o=p(r,t.spatialReference);n(o)&&g(e,r.spatialReference,x),r=o}s(r)?this._editGeometryOperations=v.fromGeometry(r,t.state.viewingMode):this._editGeometryOperations=new v(new G(\"polygon\",_(!0,!1,t.spatialReference))),this._makeDirty(!0),this.emit(\"change\"),this._handles.add(this._editGeometry.on(\"change\",(t=>{this._makeDirty(null!=t.addedVertices||null!=t.removedVertices),this._internalGeometryChange=!0,e.geometry=this.numVertices>0?this._editGeometry.geometry:null,this._internalGeometryChange=!1})),\"EditGeometry\")}get _editGeometry(){return this._editGeometryOperations.data}get vertices(){const e=[];return this.forEachVertex((t=>{e.push(t)})),e}get numVertices(){return this.constructed&&this._editGeometry.components.length>0?this._editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.constructed&&this._editGeometry.components.length>0){const e=this._editGeometry.components[0].getLastVertex();if(s(e))return this._editGeometry.coordinateHelper.vectorToPoint(e.pos)}return null}getVertex(e){if(!this.constructed||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;const t=this._editGeometry.components[0].vertices[0];let r=t;do{if(r.index===e)return r;r=r.rightEdge.rightVertex}while(r!==t&&null!=r);return null}getVertexPositionAsPoint(e){return this._editGeometry.coordinateHelper.vectorToPoint(e.pos)}getVertexPositionAsPointFromIndex(e){return this._editGeometry.coordinateHelper.vectorToPoint(this.getVertex(e).pos)}forEachVertex(e){this.constructed&&this._editGeometry.components.length>0&&this._editGeometry.components[0].iterateVertices(e)}forEachVertexPosition(e){const t=this._editGeometry.coordinateHelper;this.forEachVertex(((r,o)=>{t.vectorToPoint(r.pos,j),e(j,o)}))}clear(){s(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}add(e){if(!this.constructed)return null;if(0===this._editGeometry.components.length){const e=a(this.view);this._editGeometry.components.push(new f(e.spatialReference,e.state.viewingMode))}const t=this._editGeometryOperations.appendVertex(this._editGeometry.coordinateHelper.pointToVector(e));return this.emit(\"change\"),t}close(){if(!this.constructed||0===this._editGeometry.components.length)return null;const e=this._editGeometryOperations.closeComponent(this._editGeometry.components[0]);return this.emit(\"change\"),e}ensureContains(e,t=\"\"){let r=!1;if(this._editGeometry.components.forEach((t=>{t.iterateVertices((t=>{t===e&&(r=!0)}))})),!r)throw new Error(`vertex doesnt exist ${t}`);return r}setVertexPosition(e,t){if(!this.constructed)return null;const r=this._editGeometryOperations.setVertexPosition(e,this._editGeometry.coordinateHelper.pointToVector(t));return this.emit(\"change\"),r}equals(e){if(this.numVertices!==e.numVertices)return!1;let t=!0;return this.forEachVertexPosition(((r,o)=>{const i=e.getVertexPositionAsPointFromIndex(o);r.equals(i)||(t=!1)})),!!t}};e([c({value:null})],P.prototype,\"areaMeasurement\",null),e([c({value:null})],P.prototype,\"view\",null),e([c()],P.prototype,\"isValidPolygon\",null),e([c()],P.prototype,\"extent\",null),e([c()],P.prototype,\"spatialReference\",null),e([c()],P.prototype,\"numVertices\",null),P=e([l(V)],P);const j=new d;export{P as AreaMeasurement3DPathHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as t}from\"../lib/DefaultVertexAttributeLocations.js\";import{oitBlending as i,oitDepthTest as o,oitDepthWrite as n}from\"../lib/OrderIndependentTransparency.js\";import{Program as s}from\"../lib/Program.js\";import{TransparencyPassType as a}from\"../lib/TransparencyPassType.js\";import{C as l}from\"../../../../chunks/CheckerBoard.glsl.js\";import{BlendFactor as p}from\"../../../webgl/enums.js\";import{separateBlendingParams as c,makePipelineState as m,defaultDepthWriteParams as f,defaultColorWriteParams as d}from\"../../../webgl/renderState.js\";class h extends r{initializeProgram(e){return new s(e.rctx,h.shader.get().build(this.configuration),t)}_setPipelineState(e){const r=this.configuration,t=e===a.NONE,s=e===a.FrontFace;return m({blending:r.transparent?t?g:i(e):null,depthTest:{func:o(e)},depthWrite:t?r.writeDepth&&f:n(e),colorWrite:d,polygonOffset:t||s?r.polygonOffset&&u:{factor:-1,units:-25}})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}h.shader=new e(l,(()=>import(\"./CheckerBoard.glsl.js\")));const u={factor:0,units:-25},g=c(p.SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA);export{h as CheckerBoardTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{TransparencyPassType as r}from\"../lib/TransparencyPassType.js\";import{DefaultTechniqueConfiguration as e}from\"../materials/DefaultTechniqueConfiguration.js\";class s extends e{constructor(){super(...arguments),this.transparencyPassType=r.NONE,this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}t([o({count:r.COUNT})],s.prototype,\"transparencyPassType\",void 0),t([o()],s.prototype,\"transparent\",void 0),t([o()],s.prototype,\"writeDepth\",void 0),t([o()],s.prototype,\"polygonOffset\",void 0),t([o()],s.prototype,\"hasMultipassTerrain\",void 0),t([o()],s.prototype,\"cullAboveGround\",void 0);export{s as CheckerBoardTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{f as r}from\"../../../../chunks/vec2f64.js\";import{f as t}from\"../../../../chunks/vec4f64.js\";import{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutput.js\";import i from\"../lib/GLMaterial.js\";import{Material as s,MaterialParameters as n}from\"../lib/Material.js\";import{RenderSlot as o}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as a,PositionUVLayout as u}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as p}from\"./internal/MaterialUtil.js\";import{CheckerBoardTechnique as h}from\"../shaders/CheckerBoardTechnique.js\";import{CheckerBoardTechniqueConfiguration as f}from\"../shaders/CheckerBoardTechniqueConfiguration.js\";class c extends s{constructor(r){super(r,new m),this._configuration=new f}dispose(){}getConfiguration(r,t){return this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}intersect(r,t,e,i,s,n,o){return p(r,t,i,s,n,void 0,o)}requiresSlot(r,t){if(t===e.Color||t===e.Alpha){return r===(this.parameters.transparent?this.parameters.writeDepth?o.TRANSPARENT_MATERIAL:o.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:o.OPAQUE_MATERIAL)||r===o.DRAPED_MATERIAL}return!1}createGLMaterial(r){return new l(r)}createBufferWriter(){return new a(u)}}class l extends i{beginSlot(r){return this.ensureTechnique(h,r)}}class m extends n{constructor(){super(...arguments),this.size=r(1,1),this.color1=t(.75,.75,.75,1),this.color2=t(.5,.5,.5,1),this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1}}export{c as CheckerBoardMaterial,m as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{B as t}from\"../../../../chunks/mat4.js\";import{c as s}from\"../../../../chunks/vec2.js\";import{f as o}from\"../../../../chunks/vec2f64.js\";import{b as i}from\"../../../../chunks/vec3.js\";import{c}from\"../../../../chunks/vec3f64.js\";import{g as a,c as l}from\"../../../../chunks/vec4.js\";import{f as h}from\"../../../../chunks/vec4f64.js\";import{Object3DVisualElement as n}from\"./Object3DVisualElement.js\";import{Geometry as d}from\"../../webgl-engine/lib/Geometry.js\";import{RenderOccludedFlag as m}from\"../../webgl-engine/lib/Material.js\";import{VertexAttribute as u}from\"../../webgl-engine/lib/VertexAttribute.js\";import{CheckerBoardMaterial as _}from\"../../webgl-engine/materials/CheckerBoardMaterial.js\";class p extends n{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=m.OccludeAndTransparent,this._geometry=null,this._size=o(1,1),this._color1=h(1,.5,0,.5),this._color2=h(1,1,1,.5),this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get size(){return this._size}set size(e){s(this._size,e),this._updateMaterial()}get color1(){return this._color1}set color1(e){a(e,this._color1)||(l(this._color1,e),this._updateMaterial())}get color2(){return this._color2}set color2(e){a(e,this._color2)||(l(this._color2,e),this._updateMaterial())}_updateMaterial(){e(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}createExternalResources(){this._checkerBoardMaterial=new _({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:m.OccludeAndTransparent})}destroyExternalResources(){this._checkerBoardMaterial=null}forEachExternalMaterial(r){e(this._checkerBoardMaterial)&&r(this._checkerBoardMaterial)}createGeometries(e){if(r(this._geometry)||r(this._checkerBoardMaterial))return;const s=g;t(s,this.transform);const o=this._geometry,a=[],l=c();o.position.forEach((e=>{i(l,e,s),a.push(l[0],l[1],l[2])}));const h=[];o.uv.forEach((e=>{h.push(e[0],e[1])}));const n=new d([[u.POSITION,{size:3,data:a,exclusive:!0}],[u.UV0,{size:2,data:h,exclusive:!0}]],[[u.POSITION,o.triangleIndices],[u.UV0,o.triangleIndices]]);e.addGeometry(n,this._checkerBoardMaterial)}_geometryChanged(){this.recreateGeometry()}}const g=c();export{p as MeasurementAreaVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../Color.js\";import\"../../../../../intl.js\";import i from\"../../../../../core/Accessor.js\";import{getAccentColor as s,getContrastColor as r,getTextHaloColor as n,getTextColor as a}from\"../../../../../core/analysisThemeUtils.js\";import\"../../../../../core/has.js\";import o from\"../../../../../core/Handles.js\";import{nextHighestPowerOfTen as l}from\"../../../../../core/mathUtils.js\";import{destroyMaybe as h,isNone as m,isSome as c,unwrap as p}from\"../../../../../core/maybe.js\";import{formatDecimal as d}from\"../../../../../core/quantityFormatUtils.js\";import{toUnit as u}from\"../../../../../core/quantityUtils.js\";import{watch as g,syncAndInitial as _}from\"../../../../../core/reactiveUtils.js\";import{convertUnit as L,preferredImperialAreaUnit as b,preferredMetricAreaUnit as v,preferredImperialLengthUnit as f,preferredMetricLengthUnit as S}from\"../../../../../core/unitUtils.js\";import{property as w}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as y}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{f as j}from\"../../../../../chunks/mat4.js\";import{c as A}from\"../../../../../chunks/mat4f64.js\";import{b as C}from\"../../../../../chunks/vec3.js\";import{c as P}from\"../../../../../chunks/vec3f64.js\";import{midpoint as D}from\"../../support/viewUtils.js\";import{LabelVisualElement as V}from\"../../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as M}from\"../../../interactive/visualElements/LineVisualElement.js\";import{MeasurementAreaVisualElement as R}from\"../../../interactive/visualElements/MeasurementAreaVisualElement.js\";import{GeodesicSegment as U,EuclideanSegment as I}from\"../../../interactive/visualElements/support/Segment.js\";import{RenderOccludedFlag as O}from\"../../../webgl-engine/lib/Material.js\";import{createStipplePatternSimple as z}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as k}from\"../../../../../intl/locale.js\";import{fetchMessageBundle as q}from\"../../../../../intl/messages.js\";let x=class extends i{constructor(e){super(e),this._handles=new o,this._params={pathLineColor:t.toUnitRGBA(s()),pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:t.toUnitRGBA(s()),perimeterLineWidth:2,projectionLineColor:t.toUnitRGBA(s()),projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:t.toUnitRGBA(s(.5)),areaColor2:t.toUnitRGBA(r(.5)),labelDistance:25},this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=P(),this._originTransform=A(),this._cursorPositionRenderSpace=P(),this.messages=null,this.viewData=F,this.areaLabel=null,this.perimeterLengthLabel=null,this.loadingMessages=!0}get visible(){return this.analysisViewData.visible}get testData(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){const{analysisViewData:e,_params:t,view:i}=this;this._path=new M({view:i,attached:!0,width:t.pathLineWidth,color:t.pathLineColor,polygonOffset:!0,renderOccluded:O.OccludeAndTransparent}),this._intersectedPath=new M({view:i,attached:!0,width:t.pathLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:O.OccludeAndTransparent}),this._perimeter=new M({view:i,attached:!0,width:t.perimeterLineWidth,color:t.perimeterLineColor,polygonOffset:!0,renderOccluded:O.OccludeAndTransparent}),this._intersectedPerimeter=new M({view:i,attached:!0,width:t.perimeterLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:O.OccludeAndTransparent}),this._projectionLines=new M({view:i,attached:!0,width:t.projectionLineWidth,color:t.projectionLineColor,stipplePattern:z(t.projectionLineStippleSize),polygonOffset:!0,renderOccluded:O.OccludeAndTransparent}),this._measurementArea=new R({view:i,attached:!0,color1:t.areaColor1,color2:t.areaColor2});const s={attached:!0,backgroundColor:n(.6),textColor:a(),view:i};this._areaLabel=new V({...s,fontSize:G.Large}),this._pathLengthLabel=new V({...s,fontSize:G.Small}),this._cursorSegmentLengthLabel=new V({...s,fontSize:G.Small}),this._perimeterLengthLabel=new V({...s,fontSize:G.Small}),this._handles.add([g((()=>[e.mode,this.visible,e.unit,e.measurementData,e.cursorPoint]),(()=>this._update()),_),g((()=>i.state?.camera),(()=>this._updateLabels()),_),k((()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._measurementArea=h(this._measurementArea),this._path=h(this._path),this._intersectedPath=h(this._intersectedPath),this._perimeter=h(this._perimeter),this._intersectedPerimeter=h(this._intersectedPerimeter),this._areaLabel=h(this._areaLabel),this._pathLengthLabel=h(this._pathLengthLabel),this._cursorSegmentLengthLabel=h(this._cursorSegmentLengthLabel),this._perimeterLengthLabel=h(this._perimeterLengthLabel),this._projectionLines=h(this._projectionLines),this._handles=h(this._handles),this.set(\"view\",null)}_update(){if(this.destroyed||!this.view.ready||!this.view.renderCoordsHelper)return;const{analysisViewData:{measurementData:e},analysisViewData:t}=this;m(e)||(this._updateViewData(e,t.path,t.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}_updateViewData(e,t,i){const s=t.isValidPolygon,r=\"geodesic\"===e.actualMeasurementMode,n=r?e.geodesicArea:e.area;let a=1;if(n){const t=this._toPreferredAreaUnit(n,this.analysisViewData.unit);a=l(Math.sqrt(t.value)/Math.sqrt(300)),a*=Math.sqrt(L(1,t.unit,\"square-meters\")),a/=e.unitNormalizer.normalizeDistance(1)}const o={validMeasurement:s,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:e.actualMeasurementMode,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:r?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:r?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:r?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:s?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:a};this._set(\"viewData\",o)}_updateOrigin(){const e=this.viewData;D(e.positionsRenderCoords,this._origin),j(this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}_createSegments(e){const t=this.viewData,i=t.path,s=this.view.renderCoordsHelper.spatialReference,r=t.mode,n=[],a=[],o=[],l=t.validMeasurement?i.numVertices:i.numVertices-1;for(let h=0;h<l;++h){const l=t[e][h],m=t[e][(h+1)%i.numVertices];let c=null;switch(r){case\"euclidean\":c=new I(l,m);break;case\"geodesic\":c=new U(l,m,s)}t.intersectingSegments.has(h)?o.push(c):a.push(c),n.push(c)}return{all:n,nonIntersecting:a,intersecting:o}}_updatePathSegments(){const{view:{renderCoordsHelper:e},viewData:t,visible:i}=this,s=this._createSegments(\"positionsRenderCoords\"),{cursorPoint:r,mode:n,path:a}=t,o=!a.isValidPolygon,l=e.spatialReference;if(this._cursorSegment=null,a.numVertices>0&&o&&c(r)){if(e.toRenderCoords(r,this._cursorPositionRenderSpace)){const e=t.positionsRenderCoords[a.numVertices-1],i=this._cursorPositionRenderSpace;let r=null;switch(n){case\"euclidean\":r=new I(e,i);break;case\"geodesic\":r=new U(e,i,l)}s.nonIntersecting.push(r),this._cursorSegment=r}}this._path.setGeometryFromSegments(s.nonIntersecting,this._origin),this._path.visible=i,this._intersectedPath.setGeometryFromSegments(s.intersecting,this._origin),this._intersectedPath.visible=i,this._pathSegments=s.all}_updatePerimeterSegments(){const e=this.visible&&\"euclidean\"===this.viewData.mode,t=this._createSegments(\"positionsFittedRenderCoords\");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}_updateArea(){const e=this.viewData;switch(e.mode){case\"euclidean\":this._updateAreaEuclidean(e);break;case\"geodesic\":this._updateAreaGeodesic()}}_updateAreaEuclidean(e){const t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}_updateAreaGeodesic(){this._measurementArea.visible=!1}_updateProjectionLines(){const e=this.viewData,t=this.visible,i=e.path,s=e.mode;if(i.numVertices>0&&e.validMeasurement&&\"euclidean\"===s){const s=[];for(let t=0;t<i.numVertices;++t){const i=P();C(i,e.positionsRenderCoords[t],this._origin);const r=P();C(r,e.positionsFittedRenderCoords[t],this._origin),s.push([i,r])}this._projectionLines.geometry=s,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}_updateLabels(){if(this.destroyed)return;const{viewData:e}=this,{measurementData:t,mode:i,path:s}=e;if(!s)return;const r=!s.isValidPolygon,n=this.visible,a=this._formatAreaLabel(this.messages,\"geodesic\"===i?t.geodesicArea:t.area,this.analysisViewData.unit);c(a)?(this._areaLabel.geometry={type:\"point\",point:e.areaCentroid},this._areaLabel.text=a,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&n):this._areaLabel.visible=!1,this._set(\"areaLabel\",p(a));const o=this._formatLengthLabel(this.messages,\"geodesic\"===i?t.geodesicPathLength:t.pathLength,this.analysisViewData.unit);if(c(o)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){const t=this._pathSegments[e.pathLengthLabelSegmentIndex],i=c(this._cursorSegment)?this._cursorSegment:T;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:\"corner\",left:t,right:i},this._pathLengthLabel.text=o,this._pathLengthLabel.visible=r&&s.numVertices>0&&n}else this._pathLengthLabel.visible=!1;const l=\"geodesic\"===i?e.measurementData.geodesicCursorSegmentLength:e.measurementData.cursorSegmentLength;if(c(l)){const e=this._formatLengthLabel(this.messages,l,this.analysisViewData.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=c(this._cursorSegment)?{type:\"segment\",segment:this._cursorSegment,sampleLocation:\"end\"}:null,this._cursorSegmentLengthLabel.anchor=\"bottom\",this._cursorSegmentLengthLabel.text=p(e),this._cursorSegmentLengthLabel.visible=r&&0!==l.value&&n}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const h=\"geodesic\"===e.mode,m=h?t.geodesicPathLength:t.perimeterLength,d=this._formatLengthLabel(this.messages,m,this.analysisViewData.unit);if(this._set(\"perimeterLengthLabel\",p(d)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor=\"top\",this._perimeterLengthLabel.text=p(d),this._perimeterLengthLabel.visible=!0;let t=!0;for(let i=0;i<e.path.numVertices;++i){const s=(e.perimeterLengthLabelSegmentIndex+i)%e.path.numVertices,r=h?this._pathSegments[s]:this._perimeterSegments[s];if(t=!0,this._perimeterLengthLabel.geometry={type:\"segment\",segment:r,sampleLocation:\"center\"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;t=!1}this._perimeterLengthLabel.visible=t&&n}else this._perimeterLengthLabel.visible=!1}_toPreferredAreaUnit(e,t){return u(e,this._preferredAreaUnit(e,t))}_preferredAreaUnit(e,t){switch(t){case\"metric\":return v(e.value,e.unit);case\"imperial\":return b(e.value,e.unit);default:return t}}_preferredLengthUnit(e,t){const i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case\"metric\":return S(e.value,e.unit);case\"imperial\":return f(e.value,e.unit);default:return i}}_deriveLengthUnitFromAreaUnit(e){switch(e){case\"metric\":case\"ares\":case\"hectares\":return\"metric\";case\"imperial\":case\"acres\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\"}throw new Error(\"unhandled area unit\")}_formatAreaLabel(e,t,i){return e&&t&&d(e,t,this._preferredAreaUnit(t,i))}_formatLengthLabel(e,t,i){return e&&t&&d(e,t,this._preferredLengthUnit(t,i))}_updateMessageBundle(){this.loadingMessages=!0,q(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._update()})).finally((()=>{this.loadingMessages=!1}))}};var G;e([w()],x.prototype,\"view\",void 0),e([w()],x.prototype,\"messages\",void 0),e([w()],x.prototype,\"analysis\",void 0),e([w()],x.prototype,\"viewData\",void 0),e([w()],x.prototype,\"analysisViewData\",void 0),e([w({readOnly:!0})],x.prototype,\"areaLabel\",void 0),e([w({readOnly:!0})],x.prototype,\"perimeterLengthLabel\",void 0),e([w()],x.prototype,\"loadingMessages\",void 0),e([w()],x.prototype,\"visible\",null),x=e([y(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementVisualization\")],x),function(e){e[e.Small=12]=\"Small\",e[e.Large=16]=\"Large\"}(G||(G={}));const F={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null},T=new I(P(),P());export{x as AreaMeasurementVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{destroyMaybe as s,isNone as a,unwrapOr as r}from\"../../../core/maybe.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as n}from\"../../../properties/defaultUnit.js\";import{AnalysisView3D as l}from\"./AnalysisView3D.js\";import{MeasurementMode as p}from\"./interfaces.js\";import{AreaMeasurementController as u}from\"./AreaMeasurement/support/AreaMeasurementController.js\";import{AreaMeasurement3DPathHelper as m}from\"./AreaMeasurement/support/AreaMeasurementPathHelper.js\";import{AreaMeasurementVisualization as y}from\"./AreaMeasurement/support/AreaMeasurementVisualization.js\";let d=class extends(l(t)){constructor(e){super(e),this.type=\"area-measurement-view-3d\",this.analysis=null,this.measurementData=null,this.lastDraggedVertex=null,this.cursorPoint=null,this.mode=p.Auto}initialize(){const{analysis:e,view:t}=this;this.path=new m({view:t,areaMeasurement:e}),this.analysisVisualization=new y({view:t,analysis:e,analysisViewData:this}),this.analysisController=new u({view:t,analysis:e,analysisViewData:this})}destroy(){this.analysisController=s(this.analysisController),this.analysisVisualization=s(this.analysisVisualization),this.path.destroy()}get updating(){return!!this.analysisVisualization?.loadingMessages}get result(){const{measurementData:e}=this;return a(e)?{area:null,mode:null,perimeter:null}:\"euclidean\"===e.actualMeasurementMode?{area:e.area,perimeter:e.perimeterLength,mode:\"euclidean\"}:{area:e.geodesicArea,perimeter:e.pathLength,mode:\"geodesic\"}}get viewData(){return this.analysisVisualization.viewData}get validMeasurement(){return this.path.isValidPolygon}get unit(){return r(this.analysis.unit,this._defaultUnit)}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};e([i({readOnly:!0})],d.prototype,\"type\",void 0),e([i({constructOnly:!0,nonNullable:!0})],d.prototype,\"analysis\",void 0),e([i()],d.prototype,\"updating\",null),e([i()],d.prototype,\"analysisVisualization\",void 0),e([i()],d.prototype,\"analysisController\",void 0),e([i()],d.prototype,\"result\",null),e([i()],d.prototype,\"measurementData\",void 0),e([i()],d.prototype,\"viewData\",null),e([i()],d.prototype,\"validMeasurement\",null),e([i()],d.prototype,\"path\",void 0),e([i()],d.prototype,\"lastDraggedVertex\",void 0),e([i()],d.prototype,\"cursorPoint\",void 0),e([i()],d.prototype,\"mode\",void 0),e([i()],d.prototype,\"unit\",null),e([i(n)],d.prototype,\"_defaultUnit\",void 0),d=e([o(\"esri.views.3d.analysis.AreaMeasurementAnalysisView3D\")],d);const c=d;export{c as default};\n"],"sourceRoot":""}