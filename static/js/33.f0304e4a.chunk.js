(this["webpackJsonppopulation-arcgis"]=this["webpackJsonppopulation-arcgis"]||[]).push([[33],{1103:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return P})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return A})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return s})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return d})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return r})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return i})),n.d(t,"v",(function(){return C})),n.d(t,"w",(function(){return v})),n.d(t,"x",(function(){return c})),n.d(t,"y",(function(){return p})),n.d(t,"z",(function(){return a})),n.d(t,"A",(function(){return y})),n.d(t,"B",(function(){return m})),n.d(t,"C",(function(){return g}));const r=1e-30,i=4294967295,a=512,o=29,s=24,c=8,u=1,l=2,f=3,d=2,h=1,p=1.05,g=5,m=6,y=1.15,v=2,w=8,b=500,_=10,C=1024,O=2,x=0,M=1,S=4,T=8,P=16,R=4,A=1,F=4},1105:function(e,t,n){"use strict";var r,i,a,o,s,c,u,l,f,d,h,p,g,m,y,v,w,b,_,C,O,x,M,S,T,P,R,A,F,k,B,D,I,L,j,U,E,N,z,H,W,G,X,Y,q,J,V,Z,$,K,Q,ee,te,ne,re,ie,ae,oe,se,ce,ue;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return U})),n.d(t,"q",(function(){return E})),n.d(t,"r",(function(){return H})),n.d(t,"s",(function(){return q})),n.d(t,"t",(function(){return J})),n.d(t,"u",(function(){return V})),n.d(t,"v",(function(){return Z})),n.d(t,"w",(function(){return ie})),n.d(t,"x",(function(){return ae})),n.d(t,"y",(function(){return se})),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a||(a={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(o||(o={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(s||(s={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(c||(c={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(u||(u={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(l||(l={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(f||(f={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(h||(h={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(p||(p={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(g||(g={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(m||(m={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(v||(v={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(w||(w={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(b||(b={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(_||(_={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(C||(C={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(O||(O={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(x||(x={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(M||(M={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(S||(S={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(T||(T={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(P||(P={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(R||(R={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(A||(A={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(F||(F={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(k||(k={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(B||(B={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(D||(D={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(I||(I={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(L||(L={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(j||(j={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(U||(U={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(E||(E={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(N||(N={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(z||(z={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(H||(H={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(W||(W={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(G||(G={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(X||(X={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(Y||(Y={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(q||(q={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(J||(J={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(V||(V={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Z||(Z={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}($||($={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(K||(K={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(Q||(Q={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(re||(re={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ie||(ie={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ae||(ae={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(oe||(oe={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(se||(se={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ue||(ue={}))},1112:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}},1295:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l}));n(32);var r=n(16),i=n(2),a=n(44);function o(e){const t=c(e);return Object(i.l)(t)?t.toDataURL():""}async function s(e){const t=c(e);if(Object(i.k)(t))throw new r.a("imageToArrayBuffer","Unsupported image type");const n=await async function(e){if(!(e instanceof HTMLImageElement))return"image/png";const t=e.src;if(Object(a.w)(t)){const e=Object(a.h)(t);return"image/jpeg"===(null==e?void 0:e.mediaType)?e.mediaType:"image/png"}return/\.png$/i.test(t)?"image/png":/\.(jpg|jpeg)$/i.test(t)?"image/jpeg":"image/png"}(e),o=await new Promise((e=>t.toBlob(e,n)));if(!o)throw new r.a("imageToArrayBuffer","Failed to encode image");return{data:await o.arrayBuffer(),type:n}}function c(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");return e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),t}function u(e){const t=[],n=new Uint8Array(e);for(let r=0;r<n.length;r++)t.push(String.fromCharCode(n[r]));return"data:application/octet-stream;base64,"+btoa(t.join(""))}function l(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}},1353:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(379),i=n(14);function a(e,t,n){const r=Object(i.p)(Math.ceil(n)),a=(e=>"vertical"===e||"horizontal"===e||"cross"===e||"esriSFSCross"===e||"esriSFSVertical"===e||"esriSFSHorizontal"===e)(t)?8*r:16*r,o=2*r;e.width=a,e.height=a;const s=e.getContext("2d");s.strokeStyle="#FFFFFF",s.lineWidth=r,s.beginPath(),"vertical"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSVertical"!==t||(s.moveTo(a/2,-o),s.lineTo(a/2,a+o)),"horizontal"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSHorizontal"!==t||(s.moveTo(-o,a/2),s.lineTo(a+o,a/2)),"forward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSDiagonalCross"!==t&&"esriSFSForwardDiagonal"!==t||(s.moveTo(-o,-o),s.lineTo(a+o,a+o),s.moveTo(a-o,-o),s.lineTo(a+o,o),s.moveTo(-o,a-o),s.lineTo(o,a+o)),"backward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSBackwardDiagonal"!==t&&"esriSFSDiagonalCross"!==t||(s.moveTo(a+o,-o),s.lineTo(-o,a+o),s.moveTo(o,-o),s.lineTo(-o,o),s.moveTo(a+o,a-o),s.lineTo(a-o,a+o)),s.stroke();const c=s.getImageData(0,0,e.width,e.height),u=new Uint8Array(c.data);let l;for(let i=0;i<u.length;i+=4)l=u[i+3]/255,u[i]=u[i]*l,u[i+1]=u[i+1]*l,u[i+2]=u[i+2]*l;return[u,e.width,e.height]}function o(e,t){const n="Butt"===t,i="Square"===t,a=!n&&!i;e.length%2==1&&(e=[...e,...e]);const o=15.5;let s=0;for(const r of e)s+=r;const c=Math.round(s*o),u=new Float32Array(31*c),l=7.75;let f=0,d=0,h=.5,p=!0;for(const r of e){for(f=d,d+=r*o;h<=d;){let e=.5;for(;e<31;){const t=(e-.5)*c+h-.5,r=a?(e-o)*(e-o):Math.abs(e-o);u[t]=p?n?Math.max(Math.max(f+l-h,r),Math.max(h-d+l,r)):r:a?Math.min((h-f)*(h-f)+r,(h-d)*(h-d)+r):i?Math.min(Math.max(h-f,r),Math.max(d-h,r)):Math.min(Math.max(h-f+l,r),Math.max(d+l-h,r)),e++}h++}p=!p}const g=u.length,m=new Uint8Array(4*g);for(let y=0;y<g;++y){const e=(a?Math.sqrt(u[y]):u[y])/o;Object(r.a)(e,m,4*y)}return[m,c,31]}},1500:function(e,t,n){"use strict";n.r(t),n.d(t,"CIMSymbolRasterizer",(function(){return $})),n.d(t,"GeometryStyle",(function(){return Y}));var r,i=n(46),a=n(134),o=n(2),s=n(23),c=n(31),u=n(1417),l=n(16),f=n(897),d=n(65),h={exports:{}};r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isNotPNG=function(e){return e===a},t.isNotAPNG=function(e){return e===o},t.default=function(e){var t=new Uint8Array(e);if(Array.prototype.some.call(s,(function(e,n){return e!==t[n]})))return a;var n=!1;if(c(t,(function(e){return!(n="acTL"===e)})),!n)return o;var r=[],u=[],h=null,p=null,g=0,m=new i.APNG;if(c(t,(function(e,t,n,a){var o=new DataView(t.buffer);switch(e){case"IHDR":h=t.subarray(n+8,n+8+a),m.width=o.getUint32(n+8),m.height=o.getUint32(n+12);break;case"acTL":m.numPlays=o.getUint32(n+8+4);break;case"fcTL":p&&(m.frames.push(p),g++),(p=new i.Frame).width=o.getUint32(n+8+4),p.height=o.getUint32(n+8+8),p.left=o.getUint32(n+8+12),p.top=o.getUint32(n+8+16);var s=o.getUint16(n+8+20),c=o.getUint16(n+8+22);0===c&&(c=100),p.delay=1e3*s/c,p.delay<=10&&(p.delay=100),m.playTime+=p.delay,p.disposeOp=o.getUint8(n+8+24),p.blendOp=o.getUint8(n+8+25),p.dataParts=[],0===g&&2===p.disposeOp&&(p.disposeOp=1);break;case"fdAT":p&&p.dataParts.push(t.subarray(n+8+4,n+8+a));break;case"IDAT":p&&p.dataParts.push(t.subarray(n+8,n+8+a));break;case"IEND":u.push(l(t,n,12+a));break;default:r.push(l(t,n,12+a))}})),p&&m.frames.push(p),0==m.frames.length)return o;var y=new Blob(r),v=new Blob(u);return m.frames.forEach((function(e){var t=[];t.push(s),h.set(d(e.width),0),h.set(d(e.height),4),t.push(f("IHDR",h)),t.push(y),e.dataParts.forEach((function(e){return t.push(f("IDAT",e))})),t.push(v),e.imageData=new Blob(t,{type:"image/png"}),delete e.dataParts,t=null})),m};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=n(2);var a=new Error("Not a PNG"),o=new Error("Not an animated PNG");var s=new Uint8Array([137,80,78,71,13,10,26,10]);function c(e,t){var n=new DataView(e.buffer),r=8,i=void 0,a=void 0,o=void 0;do{a=n.getUint32(r),o=t(i=u(e,r+4,4),e,r,a),r+=12+a}while(!1!==o&&"IEND"!=i&&r<e.length)}function u(e,t,n){var r=Array.prototype.slice.call(e.subarray(t,t+n));return String.fromCharCode.apply(String,r)}function l(e,t,n){var r=new Uint8Array(n);return r.set(e.subarray(t,t+n)),r}var f=function(e,t){var n=e.length+t.length,i=new Uint8Array(n+8),a=new DataView(i.buffer);a.setUint32(0,t.length),i.set(function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e),4),i.set(t,8);var o=(0,r.default)(i,4,n);return a.setUint32(n+4,o),i},d=function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1,i=t,a=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-t);i<a;i++)r=r>>>8^n[255&(r^e[i])];return-1^r};for(var n=new Uint32Array(256),r=0;r<256;r++){for(var i=r,a=0;a<8;a++)i=0!=(1&i)?3988292384^i>>>1:i>>>1;n[r]=i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=t.APNG=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(3));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.APNG=function(){function e(){a(this,e),this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[]}return r(e,[{key:"createImages",value:function(){return Promise.all(this.frames.map((function(e){return e.createImage()})))}},{key:"getPlayer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.createImages().then((function(){return new i.default(t,e,n)}))}}]),e}(),t.Frame=function(){function e(){a(this,e),this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.imageData=null,this.imageElement=null}return r(e,[{key:"createImage",value:function(){var e=this;return this.imageElement?Promise.resolve():new Promise((function(t,n){var r=URL.createObjectURL(e.imageData);e.imageElement=document.createElement("img"),e.imageElement.onload=function(){URL.revokeObjectURL(r),t()},e.imageElement.onerror=function(){URL.revokeObjectURL(r),e.imageElement=null,n(new Error("Image creation error"))},e.imageElement.src=r}))}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.playbackRate=1,i._currentFrameNumber=0,i._ended=!1,i._paused=!0,i._numPlays=0,i._apng=e,i.context=n,i.stop(),r&&i.play(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"renderNextFrame",value:function(){this._currentFrameNumber=(this._currentFrameNumber+1)%this._apng.frames.length,this._currentFrameNumber===this._apng.frames.length-1&&(this._numPlays++,0!==this._apng.numPlays&&this._numPlays>=this._apng.numPlays&&(this._ended=!0,this._paused=!0)),this._prevFrame&&1==this._prevFrame.disposeOp?this.context.clearRect(this._prevFrame.left,this._prevFrame.top,this._prevFrame.width,this._prevFrame.height):this._prevFrame&&2==this._prevFrame.disposeOp&&this.context.putImageData(this._prevFrameData,this._prevFrame.left,this._prevFrame.top);var e=this.currentFrame;this._prevFrame=e,this._prevFrameData=null,2==e.disposeOp&&(this._prevFrameData=this.context.getImageData(e.left,e.top,e.width,e.height)),0==e.blendOp&&this.context.clearRect(e.left,e.top,e.width,e.height),this.context.drawImage(e.imageElement,e.left,e.top),this.emit("frame",this._currentFrameNumber),this._ended&&this.emit("end")}},{key:"play",value:function(){var e=this;this.emit("play"),this._ended&&this.stop(),this._paused=!1;var t=performance.now()+this.currentFrame.delay/this.playbackRate;requestAnimationFrame((function n(r){if(!e._ended&&!e._paused){if(r>=t){for(;r-t>=e._apng.playTime/e.playbackRate;)t+=e._apng.playTime/e.playbackRate,e._numPlays++;do{e.renderNextFrame(),t+=e.currentFrame.delay/e.playbackRate}while(!e._ended&&r>t)}requestAnimationFrame(n)}}))}},{key:"pause",value:function(){this._paused||(this.emit("pause"),this._paused=!0)}},{key:"stop",value:function(){this.emit("stop"),this._numPlays=0,this._ended=!1,this._paused=!0,this._currentFrameNumber=-1,this.context.clearRect(0,0,this._apng.width,this._apng.height),this.renderNextFrame()}},{key:"currentFrameNumber",get:function(){return this._currentFrameNumber}},{key:"currentFrame",get:function(){return this._apng.frames[this._currentFrameNumber]}},{key:"paused",get:function(){return this._paused}},{key:"ended",get:function(){return this._ended}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(n(4)).default);t.default=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(u=n.slice()).length,c=0;c<o;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}}])},h.exports=r();const p=Object(f.c)(h.exports);const g=[137,80,78,71,13,10,26,10];function m(e){if(!function(e){const t=new Uint8Array(e);return!g.some(((e,n)=>e!==t[n]))}(e))return!1;const t=new DataView(e),n=new Uint8Array(e);let r,i=8;do{const e=t.getUint32(i);if(r=String.fromCharCode.apply(String,Array.prototype.slice.call(n.subarray(i+4,i+8))),"acTL"===r)return!0;i+=12+e}while("IEND"!==r&&i<n.length);return!1}var y=n(1295),v={},w={},b={};Object.defineProperty(b,"__esModule",{value:!0}),b.loop=b.conditional=b.parse=void 0;b.parse=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(n))n.forEach((function(n){return e(t,n,r,i)}));else if("function"==typeof n)n(t,r,i,e);else{var a=Object.keys(n)[0];Array.isArray(n[a])?(i[a]={},e(t,n[a],r,i[a])):i[a]=n[a](t,r,i,e)}return r};b.conditional=function(e,t){return function(n,r,i,a){t(n,r,i)&&a(n,e,r,i)}};b.loop=function(e,t){return function(n,r,i,a){for(var o=[],s=n.pos;t(n,r,i);){var c={};if(a(n,e,r,c),n.pos===s)break;s=n.pos,o.push(c)}return o}};var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.readBits=_.readArray=_.readUnsigned=_.readString=_.peekBytes=_.readBytes=_.peekByte=_.readByte=_.buildStream=void 0;_.buildStream=function(e){return{data:e,pos:0}};var C=function(){return function(e){return e.data[e.pos++]}};_.readByte=C;_.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var O=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};_.readBytes=O;_.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}};_.readString=function(e){return function(t){return Array.from(O(e)(t)).map((function(e){return String.fromCharCode(e)})).join("")}};_.readUnsigned=function(e){return function(t){var n=O(2)(t);return e?(n[1]<<8)+n[0]:(n[0]<<8)+n[1]}};_.readArray=function(e,t){return function(n,r,i){for(var a="function"==typeof t?t(n,r,i):t,o=O(e),s=new Array(a),c=0;c<a;c++)s[c]=o(n);return s}};_.readBits=function(e){return function(t){for(var n=function(e){return e.data[e.pos++]}(t),r=new Array(8),i=0;i<8;i++)r[7-i]=!!(n&1<<i);return Object.keys(e).reduce((function(t,n){var i=e[n];return i.length?t[n]=function(e,t,n){for(var r=0,i=0;i<n;i++)r+=e[t+i]&&Math.pow(2,n-i-1);return r}(r,i.index,i.length):t[n]=r[i.index],t}),{})}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=b,n=_,r={blocks:function(e){for(var t=[],r=e.data.length,i=0,a=(0,n.readByte)()(e);0!==a&&a;a=(0,n.readByte)()(e)){if(e.pos+a>=r){var o=r-e.pos;t.push((0,n.readBytes)(o)(e)),i+=o;break}t.push((0,n.readBytes)(a)(e)),i+=a}for(var s=new Uint8Array(i),c=0,u=0;u<t.length;u++)s.set(t[u],c),c+=t[u].length;return s}},i=(0,t.conditional)({gce:[{codes:(0,n.readBytes)(2)},{byteSize:(0,n.readByte)()},{extras:(0,n.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,n.readUnsigned)(!0)},{transparentColorIndex:(0,n.readByte)()},{terminator:(0,n.readByte)()}]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&249===t[1]})),a=(0,t.conditional)({image:[{code:(0,n.readByte)()},{descriptor:[{left:(0,n.readUnsigned)(!0)},{top:(0,n.readUnsigned)(!0)},{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{lct:(0,n.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,t.conditional)({lct:(0,n.readArray)(3,(function(e,t,n){return Math.pow(2,n.descriptor.lct.size+1)}))},(function(e,t,n){return n.descriptor.lct.exists})),{data:[{minCodeSize:(0,n.readByte)()},r]}]},(function(e){return 44===(0,n.peekByte)()(e)})),o=(0,t.conditional)({text:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{preData:function(e,t,r){return(0,n.readBytes)(r.text.blockSize)(e)}},r]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&1===t[1]})),s=(0,t.conditional)({application:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{id:function(e,t,r){return(0,n.readString)(r.blockSize)(e)}},r]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&255===t[1]})),c=(0,t.conditional)({comment:[{codes:(0,n.readBytes)(2)},r]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&254===t[1]})),u=[{header:[{signature:(0,n.readString)(3)},{version:(0,n.readString)(3)}]},{lsd:[{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{gct:(0,n.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,n.readByte)()},{pixelAspectRatio:(0,n.readByte)()}]},(0,t.conditional)({gct:(0,n.readArray)(3,(function(e,t){return Math.pow(2,t.lsd.gct.size+1)}))},(function(e,t){return t.lsd.gct.exists})),{frames:(0,t.loop)([i,s,c,a,o],(function(e){var t=(0,n.peekByte)()(e);return 33===t||44===t}))}];e.default=u}(w);var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.deinterlace=void 0;x.deinterlace=function(e,t){for(var n=new Array(e.length),r=e.length/t,i=function(r,i){var a=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(a))},a=[0,4,2,1],o=[8,8,4,2],s=0,c=0;c<4;c++)for(var u=a[c];u<r;u+=o[c])i(u,s),s++;return n};var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.lzw=void 0;M.lzw=function(e,t,n){var r,i,a,o,s,c,u,l,f,d,h,p,g,m,y,v,w=4096,b=n,_=new Array(n),C=new Array(w),O=new Array(w),x=new Array(w+1);for(s=1+(i=1<<(d=e)),r=i+2,u=-1,a=(1<<(o=d+1))-1,l=0;l<i;l++)C[l]=0,O[l]=l;for(h=p=g=m=y=v=0,f=0;f<b;){if(0===m){if(p<o){h+=t[v]<<p,p+=8,v++;continue}if(l=h&a,h>>=o,p-=o,l>r||l==s)break;if(l==i){a=(1<<(o=d+1))-1,r=i+2,u=-1;continue}if(-1==u){x[m++]=O[l],u=l,g=l;continue}for(c=l,l==r&&(x[m++]=g,l=u);l>i;)x[m++]=O[l],l=C[l];g=255&O[l],x[m++]=g,r<w&&(C[r]=u,O[r]=g,0==(++r&a)&&r<w&&(o++,a+=r)),u=c}m--,_[y++]=x[m],f++}for(f=y;f<b;f++)_[f]=0;return _},Object.defineProperty(v,"__esModule",{value:!0});var S,T=v.decompressFrames=v.decompressFrame=B=v.parseGIF=void 0,P=(S=w)&&S.__esModule?S:{default:S},R=b,A=_,F=x,k=M;var B=v.parseGIF=function(e){var t=new Uint8Array(e);return(0,R.parse)((0,A.buildStream)(t),P.default)},D=function(e,t,n){if(e.image){var r=e.image,i=r.descriptor.width*r.descriptor.height,a=(0,k.lzw)(r.data.minCodeSize,r.data.blocks,i);r.descriptor.lct.interlaced&&(a=(0,F.deinterlace)(a,r.descriptor.width));var o={pixels:a,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?o.colorTable=r.lct:o.colorTable=t,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),n&&(o.patch=function(e){for(var t=e.pixels.length,n=new Uint8ClampedArray(4*t),r=0;r<t;r++){var i=4*r,a=e.pixels[r],o=e.colorTable[a]||[0,0,0];n[i]=o[0],n[i+1]=o[1],n[i+2]=o[2],n[i+3]=a!==e.transparentIndex?255:0}return n}(o)),o}console.warn("gif frame does not have associated image.")};v.decompressFrame=D;T=v.decompressFrames=function(e,t){return e.frames.filter((function(e){return e.image})).map((function(n){return D(n,e.gct,t)}))};const I=[71,73,70];function L(e){if(!function(e){const t=new Uint8Array(e);return!I.some(((e,n)=>e!==t[n]))}(e))return!1;const t=new DataView(e),n=t.getUint8(10);let r=13+(128&n?3*2**(1+(7&n)):0),i=0,a=!1;for(;!a;){switch(t.getUint8(r++)){case 33:if(!o())return!1;break;case 44:s();break;case 59:a=!0;break;default:return!1}if(i>1)return!0}function o(){switch(t.getUint8(r++)){case 249:r++,r+=4,c();break;case 1:i++,r++,r+=12,c();break;case 254:c();break;case 255:r++,r+=8,r+=3,c();break;default:return!1}return!0}function s(){i++,r+=8;const e=t.getUint8(r++);r+=128&e?3*2**(1+(7&e)):0,r++,c()}function c(){let e;for(;e=t.getUint8(r++);)r+=e}return!1}class j{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){var t;return null!=(t=this._resourceMap.get(e))?t:null}async fetchResource(e,t){const n=this._resourceMap.get(e);if(n)return{width:n.width,height:n.height};const r=this._inFlightResourceMap.get(e);if(r)return r.then((e=>({width:e.width,height:e.height})));const i=async function(e,t){const{arrayBuffer:n,mediaType:r}=await async function(e,t){let n;const i=";base64,";if(e.includes(i)){const t=e.indexOf(i),r=e.indexOf(i)+i.length,a=e.substring(r),o=atob(a),s=new Uint8Array(o.length);for(let e=0;e<o.length;e++)s[e]=o.charCodeAt(e);n={arrayBuffer:s.buffer,mediaType:e.substring(0,t).replace("data:","")}}else try{const r=await Object(a.default)(e,{responseType:"array-buffer",...t});n={arrayBuffer:r.data,mediaType:r.getHeader("Content-Type")}}catch(r){if(!Object(s.j)(r))throw new l.a("mapview-invalid-resource",`Could not fetch requested resource at ${e}`)}return n}(e,t),i="image/png"===r;return"image/gif"===r&&L(n)?async function(e,t){const n=B(e),r=T(n,!0),{width:i,height:a}=n.lsd,o=document.createElement("canvas");o.width=i,o.height=a;const s=o.getContext("2d"),c=[],u=[];for(const l of r){u.push(Object(d.a)(l.delay||100));const e=new ImageData(l.patch,l.dims.width,l.dims.height),t=Object(y.d)(e),n=3===l.disposalType&&s.getImageData(l.dims.left,l.dims.top,l.dims.width,l.dims.height);s.drawImage(t,l.dims.left,l.dims.top);const r=s.getImageData(0,0,i,a);c.push(r),1===l.disposalType||(2===l.disposalType?s.clearRect(l.dims.left,l.dims.top,l.dims.width,l.dims.height):3===l.disposalType&&s.putImageData(n,l.dims.left,l.dims.top))}return{frameDurations:u,getFrame:e=>c[e],width:i,height:a}}(n):i&&m(n)?async function(e,t){const n=p(e);if(n instanceof Error)throw n;await n.createImages(),Object(s.q)(t);const{frames:r,width:i,height:a}=n,o=document.createElement("canvas");o.width=i,o.height=a;const c=o.getContext("2d"),u=[],l=[];for(const s of r){l.push(Object(d.a)(s.delay||100));const e=s.imageElement;0===s.blendOp?c.globalCompositeOperation="copy":c.globalCompositeOperation="source-over";const t=2===s.disposeOp&&c.getImageData(s.left,s.top,s.width,s.height);c.drawImage(e,s.left,s.top);const n=c.getImageData(0,0,i,a);u.push(n),0===s.disposeOp||(1===s.disposeOp?c.clearRect(s.left,s.top,s.width,s.height):2===s.disposeOp&&c.putImageData(t,s.left,s.top))}return{frameDurations:l,getFrame:e=>u[e],width:i,height:a}}(n,t):async function(e,t){const n=window.URL.createObjectURL(e);try{const{data:e}=await Object(a.default)(n,{...t,responseType:"image"});return e}catch(r){if(!Object(s.j)(r))throw new l.a("mapview-invalid-resource",`Could not fetch requested resource at ${n}`);throw r}finally{window.URL.revokeObjectURL(n)}}(new Blob([n],{type:r}),t)}(e,t);return this._inFlightResourceMap.set(e,r),i.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}}var U=n(1491),E=n(1293),N=n(14),z=n(1353),H=n(1352),W=n(1450),G=n(247);class X{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,n){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[n,r,i]=Object(z.b)(this._rasterizationCanvas,e.style,t);return{size:[r,i],image:new Uint32Array(n.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:Object(N.p)(Math.ceil(t))}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){let t,n;if("simple-line"===e.type||"esriSLS"===e.type)switch(t=Object(E.c)(e.style,e.cap),e.cap){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}else t=e.dashTemplate,n=e.cim.capStyle;const[r,i,a]=Object(z.a)(t,n);return{size:[i,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let r,i,a,o=1;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(r=E.a.fromSimpleMarker(e),a=Object(W.c)(r)):e.cim&&"CIMHatchFill"===e.cim.type?(r=E.a.fromCIMHatchFill(e.cim,t),i=new H.a(r.frame.xmin,-r.frame.ymax,r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin),o=t):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(r=E.a.fromCIMInsidePolygon(e.cim),i=new H.a(r.frame.xmin,-r.frame.ymax,r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin)):(r=e.cim,a=Object(W.c)(r)),a&&!n){const[e,t,n]=Object(W.a)(a);return e?{size:[t,n],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:o}:null}const[s,c,u,l,f]=E.a.rasterize(this._rasterizationCanvas,r,i,this._resourceManager,!n);return s?{size:[c,u],image:new Uint32Array(s.buffer),sdf:!1,simplePattern:!1,anchorX:l,anchorY:f}:null}rasterizeImageResource(e,t,n,r){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");n instanceof ImageData?i.putImageData(n,0,0):(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`),i.drawImage(n,0,0,e,t));const a=i.getImageData(0,0,e,t),o=new Uint8Array(a.data);if(r)for(const d of r)if(d&&d.oldColor&&4===d.oldColor.length&&d.newColor&&4===d.newColor.length){const[e,t,n,r]=d.oldColor,[i,a,s,c]=d.newColor;if(e===i&&t===a&&n===s&&r===c)continue;for(let u=0;u<o.length;u+=4)e===o[u]&&t===o[u+1]&&n===o[u+2]&&r===o[u+3]&&(o[u]=i,o[u+1]=a,o[u+2]=s,o[u+3]=c)}let s;for(let d=0;d<o.length;d+=4)s=o[d+3]/255,o[d]=o[d]*s,o[d+1]=o[d+1]*s,o[d+2]=o[d+2]*s;let c=o,u=e,l=t;const f=512;if(u>=f||l>=f){const n=u/l;n>1?(u=f,l=Math.round(f/n)):(l=f,u=Math.round(f*n)),c=new Uint8Array(4*u*l);const r=new Uint8ClampedArray(c.buffer);Object(G.A)(o,e,t,r,u,l,!1)}return{size:[u,l],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}var Y,q=n(1449),J=n(622),V=n(885);!function(e){e.Legend="legend",e.Preview="preview"}(Y||(Y={}));const Z=e=>e&&e.scaleFactor?e.scaleFactor:1;class ${constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new q.a,this._cimResourceManager=new j,this._rasterizer=new X(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,n,r,i,a,o,s){if(!e)return null;const{data:c}=e;if(!c||"CIMSymbolReference"!==c.type||!c.symbol)return null;const{symbol:u}=c;a||(a=Object(G.z)(u));const l=await E.b.resolveSymbolOverrides(c,t,this._spatialReference,i,a,o,s);this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const f=this._imageDataCanvas,d=this._cimResourceManager,h=[];E.a.fetchResources(l,d,h),h.length>0&&await Promise.all(h);const{width:p,height:g}=n,m=function(e,t,n,r){const i=1,a=-t/2+i,o=t/2-i,s=n/2-i,c=-n/2+i;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[o,0]]]};default:return"legend"===r?{rings:[[[a,s],[o,0],[o,c],[a,c],[a,s]]]}:{rings:[[[a,s],[o,s],[o,c],[a,c],[a,s]]]}}}(a,p,g,r),y=E.a.getEnvelope(l,m,d);if(!y)return null;const v=1.3333333333333333*(window.devicePixelRatio||1);let w=1,b=0,_=0;switch(u.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;y.width>p&&(e=p/y.width);let t=1;y.height>g&&(t=g/y.height),"preview"===r&&(y.width<p&&(e=p/y.width),y.height<g&&(t=g/y.height)),w=Math.min(e,t),b=y.x+y.width/2,_=y.y+y.height/2}break;case"CIMLineSymbol":{let e=1;y.height>g&&(e=g/y.height),w=e,_=y.y+y.height/2;const t=y.x*w+p/2,n=(y.x+y.width)*w+p/2;if(t<0){const{paths:e}=m;e[0][0][0]-=t}if(n>p){const{paths:e}=m;e[0][2][0]-=n-p}}break;case"CIMPolygonSymbol":{b=y.x+y.width/2,_=y.y+y.height/2;const e=y.x*w+p/2,t=(y.x+y.width)*w+p/2,n=y.y*w+g/2,r=(y.y+y.height)*w+g/2,{rings:i}=m;e<0&&(i[0][0][0]-=e,i[0][3][0]-=e,i[0][4][0]-=e),n<0&&(i[0][0][1]+=n,i[0][1][1]+=n,i[0][4][1]+=n),t>p&&(i[0][1][0]-=t-p,i[0][2][0]-=t-p),r>g&&(i[0][2][1]+=r-g,i[0][3][1]+=r-g)}}f.width=p*v,f.height=g*v;f.width+=2,f.height+=2;const C=f.getContext("2d"),O=U.c.createIdentity();return O.translate(-b,-_),O.scale(w*v,-w*v),O.translate(p*v/2+1,g*v/2+1),C.clearRect(0,0,f.width,f.height),new U.a(C,d,O,!0).drawSymbol(l,m),C.getImageData(0,0,f.width,f.height)}async analyzeCIMSymbol(e,t,n,r,i){const a=[],o=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let c;await Object(u.b)(e.data,o,this._cimResourceManager,a,this._avoidSDF),Object(s.q)(i);for(const s of a)"CIMPictureMarker"!==s.cim.type&&"CIMPictureFill"!==s.cim.type&&"CIMPictureStroke"!==s.cim.type||(c||(c=[]),c.push(this._fetchPictureMarkerResource(s,i))),n&&"text"===s.type&&"string"==typeof s.text&&s.text.includes("[")&&(s.text=Object(G.f)(n,s.text,s.cim.textCase));return c&&await Promise.all(c),a}rasterizeCIMSymbol3D(e,t,n,r,i,a){const o=[];for(const s of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,i,a));const e=this._getRasterizedResource(s,t,n,r,i,a);if(!e)continue;let c=0,u=e.anchorX||0,l=e.anchorY||0,f=!1,d=0,h=0;if("esriGeometryPoint"===n){const e=Z(r);if(d=Object(G.g)(s.offsetX,t,i,a)*e||0,h=Object(G.g)(s.offsetY,t,i,a)*e||0,"marker"===s.type)c=Object(G.g)(s.rotation,t,i,a)||0,f=!!s.rotateClockwise&&s.rotateClockwise;else if("text"===s.type){if(c=Object(G.g)(s.angle,t,i,a)||0,void 0!==s.horizontalAlignment)switch(s.horizontalAlignment){case"left":u=-.5;break;case"right":u=.5;break;default:u=0}if(void 0!==s.verticalAlignment)switch(s.verticalAlignment){case"top":l=.5;break;case"bottom":l=-.5;break;case"baseline":l=-.25;break;default:l=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:u,anchorY:l,offsetX:d,offsetY:h,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=Object(o.v)(t.getContext("2d"));let r=0,i=0,a=0,s=0;const u=[];for(let o=0;o<e.length;o++){const t=e[o],l=t.rasterizedResource;if(!l)continue;const f=l.size,d=t.offsetX,h=t.offsetY,p=t.anchorX,g=t.anchorY,m=t.rotateClockWise||!1;let y=t.angle,v=Object(c.h)(d)-f[0]*(.5+p),w=Object(c.h)(h)-f[1]*(.5+g),b=v+f[0],_=w+f[1];if(y){m&&(y=-y);const e=Math.sin(y*Math.PI/180),t=Math.cos(y*Math.PI/180),n=v*t-w*e,r=v*e+w*t,i=v*t-_*e,a=v*e+_*t,o=b*t-_*e,s=b*e+_*t,c=b*t-w*e,u=b*e+w*t;v=Math.min(n,i,o,c),w=Math.min(r,a,s,u),b=Math.max(n,i,o,c),_=Math.max(r,a,s,u)}r=v<r?v:r,i=w<i?w:i,a=b>a?b:a,s=_>s?_:s;const C=n.createImageData(l.size[0],l.size[1]);C.data.set(new Uint8ClampedArray(l.image.buffer));const O={offsetX:d,offsetY:h,rotateClockwise:m,angle:y,rasterizedImage:C,anchorX:p,anchorY:g};u.push(O)}t.width=a-r,t.height=s-i;const l=-r,f=s;for(let o=0;o<u.length;o++){const e=u[o],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,i=e.rasterizedImage.height,a=l-r*(.5+e.anchorX),s=f-i*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate(Object(c.h)(e.offsetX),-Object(c.h)(e.offsetY)),n.translate(l,f),n.rotate(r),n.translate(-l,-f),n.drawImage(t,a,s),n.restore()}else n.drawImage(t,a+Object(c.h)(e.offsetX),s-Object(c.h)(e.offsetY))}const d=new V.a({x:l/t.width-.5,y:f/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:d}}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await Object(a.default)(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,r)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=Object(o.v)(t.getContext("2d"));return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const a=this._imageDataCanvas,s=Object(o.v)(a.getContext("2d"));if(a.width=t,a.height=n,s.drawImage(e,0,0,t,n),r){s.save();const a=new i.a(r);s.fillStyle=a.toHex(),s.globalCompositeOperation="multiply",s.fillRect(0,0,t,n),s.globalCompositeOperation="destination-atop",s.drawImage(e,0,0,t,n),s.restore()}return new Uint32Array(s.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,r,i,a){let s,c,l;if("text"===e.type)return this._rasterizeTextResource(e,t,r,i,a);({analyzedCIM:s,hash:c}=function(e,t,n,r){let i,a;"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,n,r),a=Object(u.a)(e.cim,e.materialOverrides)):(i=e.materialHash,a=e.cim);return{analyzedCIM:a,hash:i}}(e,t,i,a));const f=Z(r);if("CIMPictureMarker"===e.cim.type){const n=Object(G.g)(e.size,t,i,a)*f,{image:r,width:s,height:c}=Object(o.v)(this._getPictureResource(e,n,Object(G.g)(e.color,t,i,a)));return l={image:r,size:[s,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},l}Object(J.c)(s,f,{preserveOutlineWidth:!1});const d=s;c+=n,r&&(c+=JSON.stringify(r));const h=this._resourceCache;return h.has(c)?h.get(c):(l=this._rasterizer.rasterizeJSONResource({cim:d,type:e.type,url:e.url,mosaicHash:c,size:null,path:null},window.devicePixelRatio||1,this._avoidSDF),h.set(c,l),l)}_rasterizeTextResource(e,t,n,r,i){const a=Z(n),o=Object(G.g)(e.text,t,r,i);if(!o||0===o.length)return null;const s=Object(G.g)(e.fontName,t,r,i),c=Object(G.g)(e.style,t,r,i),u=Object(G.g)(e.weight,t,r,i),l=Object(G.g)(e.decoration,t,r,i),f=Object(G.g)(e.size,t,r,i)*a,d=Object(G.g)(e.horizontalAlignment,t,r,i),h=Object(G.g)(e.verticalAlignment,t,r,i),p=Object(G.e)(Object(G.g)(e.color,t,r,i)),g=Object(G.e)(Object(G.g)(e.outlineColor,t,r,i)),m={color:p,size:f,horizontalAlignment:d,verticalAlignment:h,font:{family:s,style:c,weight:u,decoration:l},halo:{size:Object(G.g)(e.outlineSize,t,r,i)||0,color:g,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,m)}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const i=r.height/r.width,a=t?i>1?Object(c.h)(t):Object(c.h)(t)/i:r.width,o=t?i>1?Object(c.h)(t)*i:Object(c.h)(t):r.height;return{image:this._imageTo32Array(r,a,o,n),width:a,height:o}}}}}]);
//# sourceMappingURL=33.f0304e4a.chunk.js.map