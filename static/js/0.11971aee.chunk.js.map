{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/centroid.js","../node_modules/@arcgis/core/chunks/quickselect.js","../node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","../node_modules/@arcgis/core/geometry/support/intersects.js"],"names":["n","t","e","o","u","N","l","lengths","length","s","originPosition","coords","c","f","i","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","h","g","E","r","push","sort","I","m","b","Math","sqrt","exports","a","log","M","exp","max","floor","min","x","p","W","K","X","Y","constructor","this","capabilities","query","B","geometryType","hasM","hasZ","objectIdField","spatialReference","definitionExpression","featureStore","aggregateAdapter","_changeHandle","events","on","clearCache","timeInfo","cacheSpatialQueries","_geometryQueryCache","fieldsIndex","H","fields","scheduler","priority","_frameTask","registerTask","destroy","featureAdapter","fullExtent","fullBounds","xmin","ymin","xmax","ymax","U","timeExtent","_timeExtent","clear","_allItems","async","_executeQuery","createQueryResponse","Z","q","returnGeometry","returnCentroid","outSR","createQueryResponseForCount","size","count","extent","te","forEachBounds","items","ee","isFinite","zmin","zmax","executeQueryForIdSet","then","Array","from","Set","_reschedule","add","getObjectId","point","distance","types","v","NONE","candidates","_checkQuerySupport","F","k","y","S","signal","_searchFeatures","_getQueryBBoxes","toJSON","_executeObjectIdsQuery","_executeTimeQuery","_executeAttributesQuery","d","createSnappingResponse","trackIdField","_filterLatest","field","normalizationField","valueExpression","_getQueryEngineResultForStats","createSummaryStatisticsResponse","field2","field3","createUniqueValuesResponse","createClassBreaksResponse","createHistogramResponse","schedule","J","reschedule","_getAll","toArray","_schedule","_executeSceneFilterQuery","_executeGeometryQuery","_executeAggregateIdsQuery","sceneFilter","featureSpatialReference","geometry","R","_project","spatialRelationship","z","_runSpatialFilter","has","getGeometry","_canExecuteSinglePass","spatialRel","JSON","stringify","originalFilterGeometry","outSpatialReference","get","put","_","w","filter","Q","aggregateIds","getFeatureObjectIds","forEach","objectIds","P","where","isStandardized","TypeError","testFeature","madeProgress","done","startTimeField","endTimeField","Map","getAttribute","set","values","O","C","map","D","cloneWithGeometry","rings","forEachInBounds","ie","geometryPrecision","multipatchOption","pixelSize","relationParam","text","outStatistics","groupByFieldsForStatistics","having","orderByFields","_checkAttributesQuerySupport","Promise","all","_checkStatisticsParamsSupport","G","arcadeUtils","L","extractFieldNames","params","j","_checkStatisticsQuerySupport","outFields","returnDistinctValues","outStatisticFieldName","toLowerCase","Boolean","includes","split","every","statisticType","V","onStatisticField","A","definition","statisticParameters","_checkStatisticsSupport","isNaN","start","end","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","resolve","bind"],"mappings":"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","file":"static/js/0.11971aee.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function n(t,n){return t?n?4:3:n?3:2}function e(e,o,u,N,l){if(t(o)||!o.lengths.length)return null;const s=\"upperLeft\"===l?.originPosition?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const c=e.coords,f=[],i=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:h}=o,g=n(u,N);let E=0;for(const t of T){const n=r(i,h,E,t,u,N,s);n&&f.push(n),E+=t*g}if(f.sort(((t,n)=>{let e=s*t[2]-s*n[2];return 0===e&&u&&(e=t[4]-n[4]),e})),f.length){let t=6*f[0][2];c[0]=f[0][0]/t,c[1]=f[0][1]/t,u&&(t=6*f[0][4],c[2]=0!==t?f[0][3]/t:0),(c[0]<i[0]||c[0]>i[1]||c[1]<i[2]||c[1]>i[3]||u&&(c[2]<i[4]||c[2]>i[5]))&&(c.length=0)}if(!c.length){const t=o.lengths[0]?I(h,0,T[0],u,N):null;if(!t)return null;c[0]=t[0],c[1]=t[1],u&&t.length>2&&(c[2]=t[2])}return e}function r(t,e,r,I,o,u,N=1){const l=n(o,u);let s=r,c=r+l,f=0,i=0,T=0,h=0,g=0;for(let n=0,m=I-1;n<m;n++,s+=l,c+=l){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],N=e[c+1],l=e[c+2];let E=n*N-u*r;h+=E,f+=(n+u)*E,i+=(r+N)*E,o&&(E=n*l-u*I,T+=(I+l)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*N>0&&(h*=-1),g*N>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function I(t,e,r,I,s){const c=n(I,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,m=r-1;n<m;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],m=t[i+2],b=I?u(n,e,r,s,c,m):o(n,e,s,c);if(b)if(T+=b,I){const t=l(n,e,r,s,c,m);h+=b*t[0],g+=b*t[1],E+=b*t[2]}else{const t=N(n,e,s,c);h+=b*t[0],g+=b*t[1]}}return T>0?I?[h/T,g/T,E/T]:[h/T,g/T]:r>0?I?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function u(t,n,e,r,I,o){const u=r-t,N=I-n,l=o-e;return Math.sqrt(u*u+N*N+l*l)}function N(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function l(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}export{e as getCentroidOptimizedGeometry,I as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nvar t,o,r,n={exports:{}};t=n,o=function(){function t(t,r,a,f,e){o(t,r,a||0,f||t.length-1,e||n)}function o(t,n,a,f,e){for(;f>a;){if(f-a>600){var h=f-a+1,i=n-a+1,u=Math.log(h),M=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);o(t,n,Math.max(a,Math.floor(n-i*M/h+c)),Math.min(f,Math.floor(n+(h-i)*M/h+c)),e)}var s=t[n],x=a,p=f;for(r(t,a,n),e(t[f],s)>0&&r(t,a,f);x<p;){for(r(t,x,p),x++,p--;e(t[x],s)<0;)x++;for(;e(t[p],s)>0;)p--}0===e(t[a],s)?r(t,a,p):r(t,++p,f),p<=n&&(a=p+1),n<=p&&(f=p-1)}}function r(t,o,r){var n=t[o];t[o]=t[r],t[r]=n}function n(t,o){return t<o?-1:t>o?1:0}return t},void 0!==(r=o())&&(t.exports=r);const a=n.exports;export{a as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{PositionHint as e,indexOf as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import{clone as s}from\"../../../core/lang.js\";import{removeMaybe as r,destroyMaybe as a,isNone as n,isSome as o}from\"../../../core/maybe.js\";import{MemCacheStorage as u,MemCache as c}from\"../../../core/MemCache.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{create as l,set as f,NEGATIVE_INFINITY as m,expandWithAABB as p}from\"../../../geometry/support/aaBoundingBox.js\";import{fromValues as d,create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as g}from\"../../../geometry/support/boundsUtils.js\";import{fromJSON as x,isExtent as _,isPolygon as w}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as S}from\"../../../geometry/support/normalizeUtils.js\";import{equals as F,isValid as R}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as Q}from\"../featureConversionUtils.js\";import{getWhereClause as I,validateFields as j,validateWhere as E,validateHaving as b,hasInvalidFieldType as A}from\"./attributeSupport.js\";import{project as T,checkProjectionSupport as k,projectMany as C}from\"./projectionSupport.js\";import{queryCapabilities as B}from\"./QueryEngineCapabilities.js\";import{QueryEngineResult as q,SnappingTypes as v}from\"./QueryEngineResult.js\";import{getSpatialQueryOperator as z,canQueryWithRBush as O,checkSpatialQuerySupport as G}from\"./spatialQuerySupport.js\";import{getTimeExtent as M,getTimeOperator as P}from\"./timeSupport.js\";import{cleanFromGeometryEngine as U,QUERY_ENGINE_EMPTY_RESULT as Z,normalizeQuery as N,getGeometry as D}from\"./utils.js\";import H from\"../../support/FieldsIndex.js\";import{loadArcade as L}from\"../../../support/arcadeOnDemand.js\";import{noBudget as J}from\"../../../views/support/Scheduler.js\";function V(e){return e.every((e=>\"exceedslimit\"!==e.statisticType))}const W=\"feature-store:unsupported-query\";class ${constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const K=new u(2e6);let X=0;class Y{constructor(e){this.capabilities={query:B},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on(\"changed\",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new c(X+++\"$$\",K)),this.fieldsIndex=new H(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=r(this._frameTask),this.clearCache(),a(this._geometryQueryCache),this._changeHandle=r(this._changeHandle),a(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return n(e)?null:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:U(this.spatialReference)}}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=M(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache?.clear(),this._allItems=null,this._timeExtent=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==Z)throw i;return new q([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==Z)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};f(te,m),this.featureStore.forEachBounds(s.items,(e=>p(te,e)),ee);const a={xmin:te[0],ymin:te[1],xmax:te[3],ymax:te[4],spatialReference:U(this.spatialReference)};this.hasZ&&isFinite(te[2])&&isFinite(te[5])&&(a.zmin=te[2],a.zmax=te[5]);const n=T(a,s.spatialReference,i);if(n.spatialReference=U(i||this.spatialReference),n.xmax-n.xmin==0){const e=h(n.spatialReference);n.xmin-=e,n.xmax+=e}if(n.ymax-n.ymin==0){const e=h(n.spatialReference);n.ymin-=e,n.ymax+=e}if(this.hasZ&&null!=n.zmin&&null!=n.zmax&&n.zmax-n.zmin==0){const e=h(n.spatialReference);n.zmin-=e,n.zmax+=e}return{count:r,extent:n}}catch(s){if(s===Z)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===Z)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,types:r}=e;if(r===v.NONE)return{candidates:[]};const a=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),o=!F(i.spatialReference,this.spatialReference);o&&await k(i.spatialReference,this.spatialReference);const u=\"number\"==typeof s?s:s.x,c=\"number\"==typeof s?s:s.y,h={xmin:i.x-u,xmax:i.x+u,ymin:i.y-c,ymax:i.y+c,spatialReference:i.spatialReference},l=o?T(h,this.spatialReference):h;if(!l)return{candidates:[]};const f=(await S(x(i),null,{signal:t}))[0],m=(await S(x(l),null,{signal:t}))[0];if(n(f)||n(m))return{candidates:[]};const p=new q(this._searchFeatures(this._getQueryBBoxes(m.toJSON())),a,this);await this._reschedule((()=>this._executeObjectIdsQuery(p)),t),await this._reschedule((()=>this._executeTimeQuery(p)),t),await this._reschedule((()=>this._executeAttributesQuery(p)),t);const d=f.toJSON(),y=o?T(d,this.spatialReference):d,g=o?Math.max(l.xmax-l.xmin,l.ymax-l.ymin)/2:s;return p.createSnappingResponse({...e,point:y,distance:g},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new i(W,\"Missing timeInfo or timeInfo.trackIdField\",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==Z)throw s;return new q([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,field2:r,field3:a,valueExpression:n}=t;return(await this._getQueryEngineResultForStats(e,{field:s,field2:r,field3:a,valueExpression:n},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async _schedule(e,t){return o(this._frameTask)?this._frameTask.schedule(e,t):e(J)}async _reschedule(e,t){return o(this._frameTask)?this._frameTask.reschedule(e,t):e(J)}_getAll(e){return n(this._allItems)&&(this._allItems=this.featureStore.toArray()),new q(this._allItems,e,this)}async _executeQuery(e,t,i){e=s(e),e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(n(e.sceneFilter))return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,u=n(a)||F(a,o.spatialReference)?o:T(o,a);if(!u)return null;const c=s||r,h=R(i)&&!F(this.spatialReference,i)&&c?async e=>this._project(e,i):e=>e,l=this.featureAdapter,f=this._searchFeatures(this._getQueryBBoxes(u));if(\"disjoint\"===e.sceneFilter.spatialRelationship){if(!f.length)return null;const i=new Set;for(const e of f)i.add(l.getObjectId(e));const s=await this._reschedule((()=>this.featureStore.toArray()),t),r=await this._reschedule((async()=>{const r=await z(\"esriSpatialRelDisjoint\",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(l.getObjectId(e))||r(l.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new q(n,e,this)}),t);return h(r)}if(!f.length)return new q([],e,this);if(this._canExecuteSinglePass(u,e))return h(new q(f,e,this));const m=await z(\"esriSpatialRelContains\",u,this.geometryType,this.hasZ,this.hasM),p=await this._runSpatialFilter(f,(e=>m(l.getGeometry(e))),t);return h(new q(p,e,this))}async _executeGeometryQuery(i,s,r){if(o(s)&&0===s.items.length)return s;i=o(s)?s.query:i;const{geometry:a,outSR:u,spatialRel:c,returnGeometry:h,returnCentroid:l}=i,f=this.featureStore.featureSpatialReference,m=!a||n(f)||F(f,a.spatialReference)?a:T(a,f),p=h||l,d=R(u)&&!F(this.spatialReference,u),y=this._geometryQueryCache&&n(s)?d&&p?JSON.stringify({originalFilterGeometry:a,spatialRelationship:c,outSpatialReference:u}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:c}):null,g=y?this._geometryQueryCache.get(y):null;if(o(g))return new q(g,i,this);const x=async e=>(d&&p&&await this._project(e,u),y&&this._geometryQueryCache.put(y,e.items,e.items.length+1),e);if(!m)return x(o(s)?s:this._getAll(i));const _=this.featureAdapter;let w=this._searchFeatures(this._getQueryBBoxes(a));if(\"esriSpatialRelDisjoint\"===c){if(!w.length)return x(o(s)?s:this._getAll(i));const e=new Set;for(const i of w)e.add(_.getObjectId(i));const t=o(s)?s.items:await this._reschedule((()=>this.featureStore.toArray()),r),a=await this._reschedule((async()=>{const s=await z(c,m,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(_.getObjectId(t))||s(_.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new q(n,i,this)}),r);return x(a)}if(o(s)){const i=new e;w=w.filter((e=>t(s.items,e,s.items.length,i)>=0))}if(!w.length){const e=new q([],i,this);return y&&this._geometryQueryCache.put(y,e.items,1),e}if(this._canExecuteSinglePass(m,i))return x(new q(w,i,this));const S=await z(c,m,this.geometryType,this.hasZ,this.hasM),Q=await this._runSpatialFilter(w,(e=>S(_.getGeometry(e))),r);return x(new q(Q,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||n(this.aggregateAdapter))return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=P(this.timeInfo,e.query.timeExtent,this.featureAdapter);n(t)||(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=I(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError(\"Where clause is not standardized\");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(n(this._frameTask))return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const o=e[s++];t(o)&&(r.push(o),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const o of e.items){const e=n(o,t),i=n(o,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,o)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return O(e)&&(\"esriSpatialRelEnvelopeIntersects\"===i||\"esriGeometryPoint\"===this.geometryType&&(\"esriSpatialRelIntersects\"===i||\"esriSpatialRelContains\"===i||\"esriSpatialRelWithin\"===i))}async _project(e,t){if(!t||F(this.spatialReference,t))return e;const i=this.featureAdapter,s=await C(e.items.map((e=>D(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],Q(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if(O(e)){if(_(e))return[d(e.xmin,e.ymin,e.xmax,e.ymax)];if(w(e))return e.rings.map((e=>d(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[g(y(),e)]}_searchFeatures(e){for(const i of e)this.featureStore.forEachInBounds(i,(e=>ie.add(e)));const t=Array.from(ie.values());return ie.clear(),t}async _checkStatisticsSupport(e,t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t),G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e){let t=[];if(e.valueExpression){const{arcadeUtils:i}=await L();t=i.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.field2&&t.push(e.field2),e.field3&&t.push(e.field3),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new i(W,\"params should have at least a field or valueExpression\",{params:e});j(this.fieldsIndex,t,\"params contains missing fields\")}async _checkQuerySupport(e){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const e=\" asc\",t=\" desc\",i=s.map((i=>{const s=i.toLowerCase();return s.includes(e)?s.split(e)[0]:s.includes(t)?s.split(t)[0]:i})).filter((e=>!n.includes(e)));j(this.fieldsIndex,i,\"orderByFields contains missing fields\")}if(t&&t.length>0)j(this.fieldsIndex,t,\"outFields contains missing fields\");else if(r)throw new i(W,\"outFields should be specified for returnDistinctValues\",{query:e});E(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new i(W,\"outStatistics and groupByFieldsForStatistics should be specified with having\",{query:e});b(this.fieldsIndex,r,t)}if(n){if(!V(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);j(this.fieldsIndex,r,\"onStatisticFields contains missing fields\"),a&&j(this.fieldsIndex,s,\"groupByFieldsForStatistics contains missing fields\");for(const s of t){const{onStatisticField:t,statisticType:r}=s;if((\"percentile_disc\"===r||\"percentile_cont\"===r)&&\"statisticParameters\"in s){const{statisticParameters:t}=s;if(!t)throw new i(W,\"statisticParamters should be set for percentile type\",{definition:s,query:e})}else if(\"count\"!==r&&t&&A(t,this.fieldsIndex))throw new i(W,\"outStatistics contains non-numeric fields\",{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=s(e);try{e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==Z)throw r;return new q([],e,this)}}}const ee=l(),te=l(),ie=new Set;export{$ as Feature,Y as QueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as u}from\"../featureConversionUtils.js\";import m from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return null!=e&&!0===S.spatialRelationship[e]}function g(e){return null!=e&&!0===S.queryGeometry[n(e)]}function j(e){return null!=e&&!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=u(new m,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=u(new m,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,extentIntersectsRings,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n"],"sourceRoot":""}