{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/Subtype.js","../node_modules/@arcgis/core/layers/support/SubtypeSublayer.js","../node_modules/@arcgis/core/layers/SubtypeGroupLayer.js"],"names":["a","r","constructor","super","arguments","this","code","defaultValues","domains","name","readDomains","o","t","Object","keys","i","writeDomains","s","toJSON","type","Number","json","write","prototype","p","String","e","c","L","N","key","base","errorContext","typeMap","simple","n","k","F","G","h","types","M","U","ignoreOrigin","q","V","clone","E","D","A","subtypes","find","H","geometryType","d","subtypeField","T","drawingTool","attributes","z","u","l","charts","editingEnabled","fieldOverrides","fieldsIndex","formTemplate","id","Date","now","toString","labelsVisible","labelingInfo","layerType","legendEnabled","listMode","minScale","maxScale","opacity","popupEnabled","popupTemplate","subtypeCode","templates","title","visible","writeFieldOverrides","fields","parent","forEach","alias","editable","push","length","m","defaultValue","domain","effectiveScaleRange","defaultPopupTemplate","createPopupTemplate","renderer","x","_override","_isOverridden","_get","isTable","symbol","_","readRendererFromService","drawingInfo","field","toLowerCase","field2","field3","valueExpression","B","uniqueValueInfos","value","visualVariables","readRenderer","layerDefinition","readTemplatesFromService","readTitleFromService","displayField","editFieldsInfo","objectIdField","C","getField","get","getFieldDomain","_getLayerDomain","hasUserOverrides","some","originIdOf","b","USER","Boolean","nonNullable","readOnly","origins","service","read","allowNull","g","v","j","R","reader","P","w","S","O","range","min","max","I","target","y","f","J","re","se","declaredClass","layer","ie","oe","_handles","_sublayersCollectionChanged","outFields","sublayers","ofType","W","timeInfo","addHandles","_handleSublayersChange","destroy","source","normalizeCtorArgs","url","load","signal","loadFromPortal","supportedTypes","catch","then","async","layerId","_initLayerProperties","createGraphicsSource","finishLoadEditablePortalLayer","addResolvingPromise","Promise","resolve","createQueryVersion","commitProperty","loaded","capabilities","operations","supportsEditing","userHasEditingPrivileges","parsedUrl","path","_set","$","on","default","createQuery","map","where","join","definitionExpression","Q","ee","from","includes","queryFeatures","features","_findSublayerForFeature","sourceLayer","origin","layerContainerType","messages","serviceSupportsSpatialReference","Y","sourceJSON","_verifyFields","K","console","log","search","handles","remove","add","item","Z","overridePolicy","originOf","PORTAL_ITEM","enabled","X","writerEnsuresNonNull","ae"],"mappings":"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","file":"static/js/188.0b936b5a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import{fromJSON as i}from\"./domains.js\";let a=class extends r{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(o){if(!o)return null;const r={};for(const t of Object.keys(o))r[t]=i(o[t]);return r}writeDomains(o,r){if(!o)return;const t={};for(const s of Object.keys(o))o[s]&&(t[s]=o[s]?.toJSON());r.domains=t}};o([t({type:Number,json:{write:!0}})],a.prototype,\"code\",void 0),o([t({type:Object,json:{write:!0}})],a.prototype,\"defaultValues\",void 0),o([t({json:{write:!0}})],a.prototype,\"domains\",void 0),o([s(\"domains\")],a.prototype,\"readDomains\",null),o([p(\"domains\")],a.prototype,\"writeDomains\",null),o([t({type:String,json:{write:!0}})],a.prototype,\"name\",void 0),a=o([e(\"esri.layers.support.Subtype\")],a);const c=a;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../PopupTemplate.js\";import t from\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/PieChartRenderer.js\";import i from\"../../renderers/Renderer.js\";import o from\"../../renderers/SimpleRenderer.js\";import n from\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import\"../../core/has.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{clone as p}from\"../../core/lang.js\";import a from\"../../core/Loadable.js\";import{isSome as d}from\"../../core/maybe.js\";import{MultiOriginJSONMixin as u}from\"../../core/MultiOriginJSONSupport.js\";import{setDeepValue as m}from\"../../core/object.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as y}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as f}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as g}from\"../../core/accessorSupport/decorators/writer.js\";import{OriginId as b}from\"../../core/accessorSupport/PropertyOrigin.js\";import{createTypeReader as h}from\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import v from\"../../form/FormTemplate.js\";import{labelsVisible as j,legendEnabled as w,minScale as S,maxScale as O,popupEnabled as I}from\"./commonProperties.js\";import T from\"./FeatureTemplate.js\";import{defineFieldProperties as F}from\"./fieldProperties.js\";import{fixRendererFields as x}from\"./fieldUtils.js\";import R from\"./LabelClass.js\";import{reader as P}from\"./labelingInfo.js\";import{createPopupTemplate as C}from\"../../support/popupUtils.js\";import{defaultPolygonSymbol2D as D,defaultPolylineSymbol2D as E,defaultPointSymbol2D as V}from\"../../symbols/support/defaults.js\";const L=[\"charts\",\"editingEnabled\",\"formTemplate\",\"labelsVisible\",\"labelingInfo\",\"legendEnabled\",\"minScale\",\"maxScale\",\"opacity\",\"popupEnabled\",\"popupTemplate\",\"renderer\",\"subtypeCode\",\"templates\",\"title\",\"visible\"],N={key:\"type\",base:i,errorContext:\"renderer\",typeMap:{simple:o,\"unique-value\":n,\"class-breaks\":t}},k=F(),G=h({types:N});let M=0;function U(e){const r=e.json.write;return\"object\"==typeof r?r.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function _(e){return new o({symbol:q(e)})}function q(e){switch(e){case\"point\":case\"multipoint\":return V.clone();case\"polyline\":return E.clone();case\"polygon\":case\"multipatch\":return D.clone();default:return null}}function B(e,r){return!!r&&(\"unique-value\"===e?.type&&\"string\"==typeof e.field&&e.field.toLowerCase()===r.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression)}function A(e,r){return null==e?null:r.subtypes?.find((r=>r.code===e))}function H(e,r){let t=null;switch(r.geometryType){case\"esriGeometryPoint\":case\"esriGeometryMultipoint\":t=\"point\";break;case\"esriGeometryPolyline\":t=\"line\";break;case\"esriGeometryPolygon\":case\"esriGeometryMultiPatch\":t=\"polygon\";break;default:r.type,t=null}const i={},o=A(e,r);if(d(o)){const{defaultValues:e}=o;for(const r in e)i[r]=e[r]}return i[r.subtypeField]=e,new T({name:\"New Feature\",drawingTool:t,prototype:{attributes:i}})}const $=\"esri.layers.support.SubtypeSublayer\";let z=class extends(s(u(l(a)))){constructor(e){super(e),this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${M++}`,this.type=\"subtype-sublayer\",this.labelsVisible=!0,this.labelingInfo=null,this.layerType=\"ArcGISFeatureLayer\",this.legendEnabled=!0,this.listMode=\"show\",this.minScale=0,this.maxScale=0,this.opacity=1,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}writeFieldOverrides(e,r,t){const{fields:i,parent:o}=this;let n;if(i){n=[];let e=0;i.forEach((({name:r,alias:t,editable:i,visible:s})=>{if(!s)return;const l=o?.fields?.find((e=>e.name===r));if(!l)return;const p={name:r};let a=!1;t!==l.alias&&(p.alias=t,a=!0),i!==l.editable&&(p.editable=i,a=!0),n.push(p),a&&e++})),0===e&&n.length===i.length&&(n=null)}else n=p(e);n?.length&&m(t,n,r)}get fields(){const{parent:e,fieldOverrides:r,subtypeCode:t}=this,i=e?.fields;if(!i?.length)return null;const{subtypes:o,subtypeField:n}=e,s=o.find((e=>e.code===t)),l=s?.defaultValues,p=s?.domains,a=[];for(const d of i){const e=d.clone(),{name:i}=e,o=r?.find((e=>e.name===i));if(e.visible=!r||!!o,o){const{alias:r,editable:t}=o;r&&(e.alias=r),!1===t&&(e.editable=!1)}const s=l?.[i]??null;e.defaultValue=i===n?t:s;const u=p?.[i]??null;e.domain=i===n?null:u?\"inherited\"===u.type?e.domain:u.clone():null,a.push(e)}return a}get effectiveScaleRange(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){x(e,this.fieldsIndex),this._override(\"renderer\",e)}get renderer(){if(this._isOverridden(\"renderer\"))return this._get(\"renderer\");const{parent:e}=this;return e&&!e.isTable&&\"mesh\"!==e.geometryType?_(e.geometryType):null}readRendererFromService(e,r,t){if(\"Table\"===r.type)return null;const i=r.drawingInfo?.renderer,n=G(i,r,t);let s;const{subtypeCode:l}=this;if(null!=l&&B(n,r.subtypeField)){const e=n.uniqueValueInfos?.find((({value:e})=>(e=\"number\"==typeof e?String(e):e)===String(l)));e&&(s=new o({symbol:e.symbol}))}else\"simple\"!==n?.type||n.visualVariables?.length||(s=n);return s}readRenderer(e,r,t){const i=r?.layerDefinition?.drawingInfo?.renderer;if(i&&!i.visualVariables?.length)return G(i,r,t)||void 0}readTemplatesFromService(e,r){return[H(this.subtypeCode,r)]}readTitleFromService(e,r){const t=A(this.subtypeCode,r);return d(t)?t.name:null}createPopupTemplate(e){let r=this;const{parent:t,fields:i,title:o}=this;if(t){const{displayField:e,editFieldsInfo:n,objectIdField:s}=t;r={displayField:e,editFieldsInfo:n,fields:i,objectIdField:s,title:o}}return C(r,e)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){return this._getLayerDomain(e)}hasUserOverrides(){return L.some((e=>this.originIdOf(e)===b.USER))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};e([c({json:{write:{ignoreOrigin:!0}}})],z.prototype,\"charts\",void 0),e([c({type:Boolean,nonNullable:!0,json:{name:\"enableEditing\",write:{ignoreOrigin:!0}}})],z.prototype,\"editingEnabled\",void 0),e([c({readOnly:!0,json:{name:\"layerDefinition.fieldOverrides\",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],z.prototype,\"fieldOverrides\",void 0),e([g(\"fieldOverrides\")],z.prototype,\"writeFieldOverrides\",null),e([c({...k.fields,readOnly:!0,json:{read:!1}})],z.prototype,\"fields\",null),e([c(k.fieldsIndex)],z.prototype,\"fieldsIndex\",void 0),e([c({type:v,json:{name:\"formInfo\",write:{ignoreOrigin:!0}}})],z.prototype,\"formTemplate\",void 0),e([c({type:String,readOnly:!0,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],z.prototype,\"id\",void 0),e([c({readOnly:!0,json:{read:!1}})],z.prototype,\"type\",void 0),e([c(U(p(j)))],z.prototype,\"labelsVisible\",void 0),e([c({type:[R],json:{name:\"layerDefinition.drawingInfo.labelingInfo\",origins:{service:{read:!1}},read:{reader:P},write:{ignoreOrigin:!0}}})],z.prototype,\"labelingInfo\",void 0),e([c({type:[\"ArcGISFeatureLayer\"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],z.prototype,\"layerType\",void 0),e([c(U(p(w)))],z.prototype,\"legendEnabled\",void 0),e([c({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([c((()=>{const e=p(S);return e.json.origins.service.read=!1,U(e)})())],z.prototype,\"minScale\",void 0),e([c((()=>{const e=p(O);return e.json.origins.service.read=!1,U(e)})())],z.prototype,\"maxScale\",void 0),e([c({readOnly:!0})],z.prototype,\"effectiveScaleRange\",null),e([c({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],z.prototype,\"opacity\",void 0),e([c()],z.prototype,\"parent\",void 0),e([c(U(p(I)))],z.prototype,\"popupEnabled\",void 0),e([c({type:r,json:{name:\"popupInfo\",write:{ignoreOrigin:!0}}})],z.prototype,\"popupTemplate\",void 0),e([c({readOnly:!0})],z.prototype,\"defaultPopupTemplate\",null),e([c({types:N,json:{write:{target:\"layerDefinition.drawingInfo.renderer\",ignoreOrigin:!0}}})],z.prototype,\"renderer\",null),e([y(\"service\",\"renderer\",[\"drawingInfo.renderer\",\"subtypeField\",\"type\"])],z.prototype,\"readRendererFromService\",null),e([y(\"renderer\",[\"layerDefinition.drawingInfo.renderer\"])],z.prototype,\"readRenderer\",null),e([c({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],z.prototype,\"subtypeCode\",void 0),e([c({type:[T],json:{name:\"layerDefinition.templates\",write:{ignoreOrigin:!0}}})],z.prototype,\"templates\",void 0),e([y(\"service\",\"templates\",[\"geometryType\",\"subtypeField\",\"subtypes\",\"type\"])],z.prototype,\"readTemplatesFromService\",null),e([c({type:String,json:{write:{ignoreOrigin:!0}}})],z.prototype,\"title\",void 0),e([y(\"service\",\"title\",[\"subtypes\"])],z.prototype,\"readTitleFromService\",null),e([c({type:Boolean,nonNullable:!0,json:{name:\"visibility\",write:{ignoreOrigin:!0}}})],z.prototype,\"visible\",void 0),z=e([f($)],z);const J=z;export{J as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import i from\"../core/Handles.js\";import{destroyMaybe as o,isSome as a,unwrapOr as n}from\"../core/maybe.js\";import{MultiOriginJSONMixin as u}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as l,whenOrAbort as p}from\"../core/promiseUtils.js\";import{watch as y,sync as d}from\"../core/reactiveUtils.js\";import{sqlAnd as c}from\"../core/sql.js\";import{urlToObject as h,join as m}from\"../core/urlUtils.js\";import{property as f}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as b}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as g}from\"../core/accessorSupport/decorators/subclass.js\";import{OriginId as j,nameToId as w}from\"../core/accessorSupport/PropertyOrigin.js\";import v from\"./Layer.js\";import{APIKeyMixin as S}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as L}from\"./mixins/ArcGISService.js\";import{BlendLayer as F}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as x}from\"./mixins/CustomParametersMixin.js\";import{EditBusLayer as P}from\"./mixins/EditBusLayer.js\";import{FeatureLayerBase as I}from\"./mixins/FeatureLayerBase.js\";import{OperationalLayer as _}from\"./mixins/OperationalLayer.js\";import{PortalLayer as C}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as E}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as T}from\"./mixins/TemporalLayer.js\";import{titleFromUrlAndName as G}from\"./support/arcgisLayerUrl.js\";import{id as U}from\"./support/commonProperties.js\";import{addAttachment as q,updateAttachment as $,applyEdits as A,createQuery as R,deleteAttachments as M,fetchRecomputedExtents as N,queryAttachments as Q,queryObjectIds as B,queryFeatureCount as D,queryExtent as H,queryRelatedFeatures as V,queryRelatedFeaturesCount as J,hasDataChanged as k}from\"./support/featureLayerUtils.js\";import{defineFieldProperties as z}from\"./support/fieldProperties.js\";import{fixTimeInfoFields as K}from\"./support/fieldUtils.js\";import Z from\"./support/Subtype.js\";import W from\"./support/SubtypeSublayer.js\";import X from\"./support/TimeInfo.js\";import{serviceSupportsSpatialReference as Y}from\"./support/versionUtils.js\";import ee from\"../rest/support/Query.js\";const re=\"SubtypeGroupLayer\",te=\"esri.layers.SubtypeGroupLayer\";function se(e,r){return new t(\"layer:unsupported\",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${r}`,{layer:e})}const ie=z();let oe=class extends(I(P(F(T(E(O(L(_(C(u(x(S(s(v)))))))))))))){constructor(...e){super(...e),this._handles=new i,this._sublayersCollectionChanged=!1,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.subtypes=null,this.sublayers=new(r.ofType(W)),this.timeInfo=null,this.title=\"Layer\",this.type=\"subtype-group\",this.addHandles(y((()=>this.sublayers),((e,r)=>this._handleSublayersChange(e,r)),d))}destroy(){this.source?.destroy(),this._handles=o(this._handles)}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=a(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:[\"Feature Service\"]},e).catch(l).then((async()=>{if(!this.url)throw new t(\"subtype-grouplayer:missing-url-or-source\",\"SubtypeGroupLayer must be created with either a url or a portal item\");if(null==this.layerId)throw new t(\"subtype-grouplayer:missing-layerid\",\"layerId is required for a SubtypeGroupLayer created with url\");return this._initLayerProperties(await this.createGraphicsSource(r))})).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(s),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty(\"definitionExpression\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"timeOffset\"),this.commitProperty(\"geometryType\"),this.commitProperty(\"gdbVersion\"),this.commitProperty(\"historicMoment\"),this.commitProperty(\"returnZ\"),this.commitProperty(\"capabilities\"),this.commitProperty(\"returnM\"),(this._get(\"createQueryVersion\")??0)+1}get editingEnabled(){return this.loaded&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get parsedUrl(){const e=h(this.url);return null!=e&&null!=this.layerId&&(e.path=m(e.path,this.layerId.toString())),e}set source(e){this._get(\"source\")!==e&&this._set(\"source\",e)}readTitleFromService(e,{name:r}){return this.url?G(this.url,r):r}async addAttachment(e,r){return q(this,e,r,re)}async updateAttachment(e,r,t){return $(this,e,r,t,re)}async applyEdits(e,r){return A(this,e,r)}on(e,r){return super.on(e,r)}async createGraphicsSource(e){const{default:r}=await p(import(\"./graphics/sources/FeatureLayerSource.js\"),e);return new r({layer:this}).load({signal:e})}createQuery(){const e=R(this),r=this.sublayers.map((e=>e.subtypeCode));return e.where=c(`${this.subtypeField} IN (${r.join(\",\")})`,this.definitionExpression),e}async deleteAttachments(e,r){return M(this,e,r,re)}async fetchRecomputedExtents(e){return N(this,e,re)}getFieldDomain(e,r){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,r){return Q(this,e,r,re)}async queryFeatures(e,r){const t=await this.load(),s=ee.from(e)??t.createQuery(),i=n(s.outFields,[]);i.includes(this.subtypeField)||(i.push(this.subtypeField),s.outFields=i);const o=await t.source.queryFeatures(s,r);if(o?.features)for(const a of o.features)a.layer=this._findSublayerForFeature(a),a.sourceLayer=this;return o}async queryObjectIds(e,r){return B(this,e,r,re)}async queryFeatureCount(e,r){return D(this,e,r,re)}async queryExtent(e,r){return H(this,e,r,re)}async queryRelatedFeatures(e,r){return V(this,e,r,re)}async queryRelatedFeaturesCount(e,r){return J(this,e,r,re)}write(e,r){const{origin:s,layerContainerType:i,messages:o}=r;if(this.isTable){if(\"web-scene\"===s||\"web-map\"===s&&\"tables\"!==i)return o?.push(se(this,\"using a table source cannot be written to web scenes and web maps\")),null}else if(this.loaded&&\"web-map\"===s&&\"tables\"===i)return o?.push(se(this,\"using a non-table source cannot be written to tables in web maps\")),null;return this.sublayers?.length?super.write(e,r):(o?.push(new t(\"web-document-write:invalid-property\",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&Y(this,e)}_findSublayerForFeature(e){const r=this.fieldsIndex.get(this.subtypeField),t=e.attributes[r.name];return this.sublayers.find((e=>e.subtypeCode===t))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}async _initLayerProperties(e){this._set(\"source\",e);const{sourceJSON:r}=e;if(r&&(this.sourceJSON=r,this.read(r,{origin:\"service\",url:this.parsedUrl})),this.isTable)throw new t(\"subtype-grouplayer:unsupported-source\",\"SubtypeGroupLayer cannot be created using a layer with table source\");if(!this.subtypes?.length)throw new t(\"subtype-grouplayer:missing-subtypes\",\"SubtypeGroupLayer must be created using a layer with subtypes\");this._verifyFields(),K(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return k(this)}_verifyFields(){const e=this.parsedUrl?.path??\"undefined\";this.objectIdField||console.log(\"SubtypeGroupLayer: 'objectIdField' property is not defined (url: \"+e+\")\"),this.isTable||-1!==e.search(/\\/FeatureServer\\//i)||this.fields?.some((e=>\"geometry\"===e.type))||console.log(\"SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: \"+e+\")\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null})),this.handles.remove(\"sublayers-owner\")),e&&(e.forEach((e=>{e.parent=this})),this._sublayersCollectionChanged=!1,this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this})),e.on(\"after-remove\",(({item:e})=>{e.parent=null})),e.on(\"after-changes\",(()=>{this._sublayersCollectionChanged=!0}))],\"sublayers-owner\"))}};e([f({readOnly:!0})],oe.prototype,\"createQueryVersion\",null),e([f({type:Boolean,readOnly:!0})],oe.prototype,\"editingEnabled\",null),e([f({...ie.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],oe.prototype,\"fields\",void 0),e([f(ie.fieldsIndex)],oe.prototype,\"fieldsIndex\",void 0),e([f(U)],oe.prototype,\"id\",void 0),e([f({type:[\"show\",\"hide\",\"hide-children\"]})],oe.prototype,\"listMode\",void 0),e([f({value:\"SubtypeGroupLayer\",type:[\"SubtypeGroupLayer\"]})],oe.prototype,\"operationalLayerType\",void 0),e([f(ie.outFields)],oe.prototype,\"outFields\",void 0),e([f({readOnly:!0})],oe.prototype,\"parsedUrl\",null),e([f()],oe.prototype,\"source\",null),e([f({type:[Z],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],oe.prototype,\"subtypes\",void 0),e([f({type:r.ofType(W),json:{origins:{service:{read:{source:\"subtypes\",reader:(e,t,s)=>{const i=e.map((({code:e})=>{const r=new W({subtypeCode:e});return r.read(t,s),r}));return new(r.ofType(W))(i)}}}},name:\"layers\",write:{overridePolicy(e,r,t){const s=this.originOf(\"sublayers\"),i=j.PORTAL_ITEM;let o=!0;if(w(s)===i&&w(t.origin)>i){const r=e.some((e=>e.hasUserOverrides()));o=this._sublayersCollectionChanged||r}return{enabled:o,ignoreOrigin:!0}}}}})],oe.prototype,\"sublayers\",void 0),e([f({type:X})],oe.prototype,\"timeInfo\",void 0),e([f({json:{origins:{\"portal-item\":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],oe.prototype,\"title\",void 0),e([b(\"service\",\"title\",[\"name\"])],oe.prototype,\"readTitleFromService\",null),e([f({json:{read:!1}})],oe.prototype,\"type\",void 0),oe=e([g(te)],oe);const ae=oe;export{ae as default};\n"],"sourceRoot":""}