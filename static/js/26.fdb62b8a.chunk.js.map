{"version":3,"sources":["../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/portal/support/resourceExtension.js","../node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js","../node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js","../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js","../node_modules/@arcgis/core/views/interactive/AnalysisToolBase.js","../node_modules/@arcgis/core/views/analysis/analysisViewUtils.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightConfiguration.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSightAnalysisResult.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightComputation.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightIntersectionResult.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightRayIntersector.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightController.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightToolConfiguration.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/lineOfSightToolUtils.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightTool.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/LineOfSightAnalysisView3D.js"],"names":["i","t","o","Blob","type","p","g","a","n","url","e","png","jpeg","jpg","bmp","gif","json","txt","xml","svg","zip","pbf","gz","c","r","origins","s","String","read","write","writer","u","resources","l","y","x","d","verifyItemRelativeUrls","writtenUrls","rootPath","m","NO","this","origin","originIdOf","h","object","propertyName","value","targetUrl","dest","targetPropertyName","context","params","portalItem","resourceFromPath","N","path","f","compress","I","resource","content","updates","toUpdate","U","w","toKeep","push","j","v","filename","prefix","pendingOperations","async","default","data","responseType","P","then","itemRelativeUrl","catch","toAdd","finish","O","JSON","stringify","toJSON","constructor","super","arguments","parent","_userInteractive","_interactiveViewModelCount","interactive","updating","visible","suspended","_overrideIfSome","forceInteractiveForViewModel","readOnly","prototype","constructOnly","Boolean","layer","id","objectId","objectIdField","attributes","uid","feature","layerId","target","Number","ObjectId","mode","geometry","hasZ","events","on","remove","action","disableDisplay","initialize","addHandles","analysisViewData","deactivate","onDeactivate","created","analysis","clear","resetCreated","_set","tool","view","activeTool","active","tools","add","position","elevationInfo","equals","innerWidth","outerWidth","visibleInnerColor","visibleOuterColor","occludedInnerColor","occludedOuterColor","undefinedInnerColor","undefinedOuterColor","intersectedGraphic","intersectedLocation","elevationAlignedTargetLocation","inputPoints","isValid","observer","observerSurfaceNormal","observerFeatureId","targetSurfaceNormal","targetFeatureId","observerAdjusted","targetAdjusted","computationResult","start","end","intersection","isTargetVisible","result","notifyResultChanged","notifyChange","notifyInputPointsChanged","clone","mapPoint","renderPoint","normal","ray","graphic","_terrainIntersectionOptionsLayerUids","Set","intersector","b","state","viewingMode","options","hud","store","MIN","getScreenPointIntersection","get","camera","_","_getRayIntersection","sceneIntersectionHelper","intersectToolIntersectorRay","results","min","getIntersectionPoint","renderCoordsHelper","fromRenderCoords","spatialReference","R","OBJECT","layerUid","nodeIndex","componentIndex","TERRAIN","lij","slice","S","sourceLayer","updateFromGroundIntersection","C","L","T","worldUpAtPosition","basemapTerrain","visibleElevationBounds","Math","abs","max","include","W","J","getLogger","K","EventedMixin","updateOnCameraChange","_effectiveObserverElevationMode","_observerFeatureId","_updatingHandles","_frameTask","Z","_handles","_computationHandles","_externalObserverUpdate","resourceController","scheduler","registerTask","q","LINE_OF_SIGHT_TOOL","_intersector","_connectObserver","_connectComputations","_connectTargets","destroy","_computations","removeAll","priority","computations","_elevationAlignedObserverPositionRenderSpace","observerEngineLocation","_screenPixelSize","computeScreenPixelSizeAt","_computeResult","computation","_canCompute","_computeIntersection","_interpolateIntersection","emit","_updateAdjustedPointsFromFeatures","F","Y","z","ALL","all","G","distanceInRenderSpace","_getFeatureDistanceThreshold","getTransformedNormal","M","ee","_adjustStartEndPositions","X","interpolationInfo","originalIntersection","originalObserver","originalTarget","B","D","elevationAlignedObserver","frustum","intersectsPoint","_onObserverPositionChange","k","_getEffectiveElevationInfo","absoluteZ","elevation","V","toRenderCoords","_observerGroundOffsetRenderSpace","LINE_OF_SIGHT_TOOL_INTERACTIVE","_onObserverRenderSpacePositionChangeForComputation","_onTargetPositionChange","_connectComputationToTarget","targetPosition","targetElevationInfo","targetFeatureInfo","projectedTargetPosition","pending","addPromise","_connectComputationToObserver","_connectComputationToRenderSpaceObserver","observerGroundOffset","observerElevationMode","_connectComputationToCamera","isDirty","_isCameraDirty","_connectComputationToSlicePlane","slicePlane","_connectComputationToElevation","finally","$","E","H","elevationProvider","extent","_connectComputationToTask","schedule","initial","_connectComputation","has","_disconnectComputation","_onComputationCollectionChange","added","removed","_onTargetCollectionChange","_removeTarget","_addTarget","_onCursorTargetChange","some","findIndex","removeAt","observerPosition","projectedObserverPosition","observerElevationInfo","observerFeatureInfo","addOnCollectionChange","final","targets","cursorTarget","Q","offset","A","enabled","glowColor","glowWidth","innerColor","globalAlpha","size","color","visibleColor","occludedColor","undefinedColor","laserLine","lineOfSight","material","toUnitRGBA","stateMask","customColor1","Custom1","customColor2","Custom2","customColor3","Custom3","Ready","Creating","Created","removeIncompleteOnCancel","configuration","_laserlineVisualElement","_grabbedManipulator","_analysisHandles","_manipulatorHandles","_targetTrackerManipulator","finishToolCreation","_observerManipulator","_createObserverManipulator","_updateObserverManipulatorStyle","_onObserverLocationChange","_createVisualElements","_laserLineRendererDependencies","_updateLaserLineRenderer","addWhen","_shouldRenderTracker","_clearCursorTracker","_removeVisualElements","hasGrabbedManipulators","cursor","_showTracker","_latestPointerMovePointerType","continue","stop","onEditableChange","editable","internallyEditable","onInputEvent","_doubleClickHandler","_keyDownHandler","_pointerMoveHandler","onInputEventAfter","_clickHandler","onShow","onHide","_onComputationsCollectionChange","destroyed","declaredClass","warn","_createTargetManipulator","metadata","available","_getLineOfSightManipulatorStateDependencies","_updateManipulatorState","_onTargetLocationChange","_getTargetManipulator","manipulators","_createManipulator","renderObjects","_manipulatorGrabChanged","_manipulatorClick","_createTargetManipulatorDragPipeline","elevationAlignedLocation","forEach","manipulator","_createObserverManipulatorDragPipeline","_screenToIntersection","screenEnd","next","_updateTargetDragStep","_cancelTargetDragStep","_updateObserverDragStep","_cancelObserverDragStep","_updateFromIntersection","laserlineVisualElement","grabbedManipulator","shouldRenderTracker","heightManifoldTarget","renderLocation","lineVerticalPlaneSegment","attached","style","toUnitRGB","_addPointFromClickEvent","button","Right","stopPropagation","key","pointerType","I3S","grabbing","dragging","length","testInfo","laserLineVisualElement","_lineOfSightVisualizations","_createObserverVisualization","_observerVisualElement","interactiveAndEditable","visualizations","_configuration","_createLineOfSightVisualization","width","visibleLineVisualElement","occludedLineVisualElement","undefinedLineVisualElement","targetVisualElement","_destroyLineOfSightVisualization","splice","indexOf","_updateLineOfSightVisualization","transform","_getLineOfSightVisualizationDependencies","pixelSnappingEnabled","primitive","outlineSize","_analysisController","_analysisVisualization","map","getResultForTarget","find","visualization","controller","nonNullable"],"mappings":"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","file":"static/js/26.fdb62b8a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function t(i){return o[p(i)]||e}function p(i){return i instanceof Blob?i.type:n(i.url)}function n(t){const p=i(t);return g[p]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\",\"bin.gz\":\"application/octet-stream\"};for(const c in g)o[g[c]]=c;export{t as getResourceContentExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as t}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as r,isBlobProtocol as e,join as o,getPathExtension as s}from\"../../urlUtils.js\";import{generateUUID as n}from\"../../uuid.js\";import{getOwnPropertyMetadata as i}from\"../metadata.js\";import{nameToId as a}from\"../PropertyOrigin.js\";import{propertyJSONMeta as p}from\"./property.js\";import{getResourceContentExtension as u}from\"../../../portal/support/resourceExtension.js\";import{r as c,t as l,M as m,i as f,p as y,a as d}from\"../../../chunks/persistableUrlUtils.js\";function g(t){const r=t?.origins??[void 0];return(e,o)=>{const s=h(t,e,o);for(const t of r){const r=p(e,t,o);for(const t in s)r[t]=s[t]}}}function h(t,r,e){if(\"resource\"===t?.type)return v(t,r,e);switch(t?.type??\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}function v(o,s,n){const p=i(s,n);return{type:String,read:(t,r,e)=>{const o=c(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,i,u,c){if(!c||!c.resources)return\"string\"==typeof s?void(i[u]=l(s,c)):void(i[u]=s.write({},c));const y=x(s),d=l(y,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},m.NO),g=p.type!==String&&(!t(this)||c&&c.origin&&this.originIdOf(n)>a(c.origin)),h={object:this,propertyName:n,value:s,targetUrl:d,dest:i,targetPropertyName:u,context:c,params:o};c&&c.portalItem&&d&&!r(d)?g?w(h):j(h):c&&c.portalItem&&(null==d||null!=f(d)||e(d)||g)?U(h):i[u]=d}}}}function U(t){const{targetUrl:r,params:s,value:i,context:a,dest:p,targetPropertyName:c}=t;if(!a.portalItem)return;const l=y(r),m=l?.filename??n(),f=s?.prefix??l?.prefix,d=N(i,r,a),g=o(f,m),h=`${g}.${u(d)}`,v=a.portalItem.resourceFromPath(h);e(r)&&a.resources&&a.resources.pendingOperations.push(P(r).then((t=>{v.path=`${g}.${u(t)}`,p[c]=v.itemRelativeUrl})).catch((()=>{})));const U=s?.compress??!1;a.resources&&I({...t,resource:v,content:d,compress:U,updates:a.resources.toAdd}),p[c]=v.itemRelativeUrl}function w(t){const{context:r,targetUrl:e,params:o,value:n,dest:i,targetPropertyName:a}=t;if(!r.portalItem)return;const p=r.portalItem.resourceFromPath(e),c=N(n,e,r),l=u(c),m=s(p.path),f=o?.compress??!1;l===m?(r.resources&&I({...t,resource:p,content:c,compress:f,updates:r.resources.toUpdate}),i[a]=e):U(t)}function j({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}function I({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{O(t,r,e)}})}function N(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function P(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function x(t){return null==t?null:\"string\"==typeof t?t:t.url}function O(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{g as persistable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import{isSome as r}from\"../../../core/maybe.js\";import{EsriPromiseMixin as o}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";const n=n=>{let p=class extends(o(n)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return!r(this.parent)||this.parent.visible&&!this.parent.suspended}set visible(e){this._overrideIfSome(\"visible\",e)}forceInteractiveForViewModel(){return this._interactiveViewModelCount++,t((()=>this._interactiveViewModelCount--))}};return e([i({readOnly:!0})],p.prototype,\"type\",void 0),e([i({constructOnly:!0})],p.prototype,\"analysis\",void 0),e([i({constructOnly:!0})],p.prototype,\"parent\",void 0),e([i({constructOnly:!0})],p.prototype,\"view\",void 0),e([i({type:Boolean})],p.prototype,\"interactive\",null),e([i()],p.prototype,\"_userInteractive\",void 0),e([i({readOnly:!0})],p.prototype,\"updating\",null),e([i()],p.prototype,\"visible\",null),e([i()],p.prototype,\"_interactiveViewModelCount\",void 0),p=e([s(\"esri.views.3d.analysis.AnalysisView3D\")],p),p};export{n as AnalysisView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../core/maybe.js\";function t(e,t){return l(e)===l(t)}function l(t){if(e(t))return null;const l=null!=t.layer?t.layer.id:\"\";let r=null;return r=null!=t.objectId?t.objectId:null!=t.layer&&\"objectIdField\"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==r?null:`o-${l}-${r}`}const r={json:{write:{writer:n,target:{\"feature.layerId\":{type:[Number,String]},\"feature.objectId\":{type:[Number,String]}}},origins:{\"web-scene\":{read:u}}}};function n(t,l){e(t)||null==t.layer?.objectIdField||null==t.attributes||(l.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})}function u(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}export{t as featureReferenceEquals,r as featureReferenceProperty,l as getFeatureId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as o}from\"../../../../core/maybe.js\";import{getGraphicEffectiveElevationInfo as r}from\"../../../../support/elevationInfoUtils.js\";function t(o,t=r(o)){return\"on-the-ground\"!==t.mode&&!(e(o.geometry)||!o.geometry.hasZ)}function n(e,r){let t=null;const n=e.events.on(\"grab-changed\",(n=>{o(t)&&(t.remove(),t=null),\"start\"===n.action?(t=e.disableDisplay(),r&&r(n)):r&&r(n)}));return{remove(){o(t)&&t.remove(),n.remove()}}}export{t as canMoveZ,n as disableDisplayOnGrab};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{watch as e,syncAndInitial as t}from\"../../core/reactiveUtils.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{InteractiveToolBase as i}from\"./InteractiveToolBase.js\";let a=class extends i{constructor(s){super(s)}initialize(){this.addHandles(e((()=>this.analysisViewData.visible),(s=>this.visible=s),t))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set(\"created\",!1)}};s([r({constructOnly:!0})],a.prototype,\"analysis\",void 0),s([r()],a.prototype,\"analysisViewData\",void 0),a=s([o(\"esri.views.interactive.AnalysisToolBase\")],a);export{a as AnalysisToolBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{createTask as o}from\"../../core/asyncUtils.js\";import{removeMaybe as t,isNone as i}from\"../../core/maybe.js\";import{onAbort as e}from\"../../core/promiseUtils.js\";import{whenOnce as n,watch as r,syncAndInitial as a}from\"../../core/reactiveUtils.js\";function c(r,a){r.interactive=!0;const{tool:c,view:s}=r;s.activeTool=c;let l=e(a,(()=>{s.activeTool===c&&(s.activeTool=null)}));return o((async o=>{await n((()=>i(c)||!c.active),o),l=t(l)}),a)}function s(o,t){return r((()=>o.interactive),(()=>l(o,t)),a)}function l(o,t){o.interactive?v(o,t):m(o)}function v(o,t){m(o);const{view:i,analysis:e}=o,n=new t({view:i,analysis:e,analysisViewData:o});return o.tool=n,i.tools.add(n),n}function m(o){const{view:t,tool:e}=o;i(e)||(t.tools.remove(e),o.tool=null)}export{c as activateAnalysisViewTool,s as connectAnalysisViewToTool,m as removeAnalysisViewTool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Accessor.js\";import{ClonableMixin as s}from\"../core/Clonable.js\";import{JSONSupportMixin as i}from\"../core/JSONSupport.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import m from\"../geometry/Point.js\";import l from\"../symbols/support/ElevationInfo.js\";let f=class extends(i(s(t))){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return p(this.position,o.position)&&p(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([a({type:m}),n()],f.prototype,\"position\",void 0),o([a({type:l}),n()],f.prototype,\"elevationInfo\",void 0),o([a(e)],f.prototype,\"feature\",void 0),f=o([c(\"esri.analysis.LineOfSightAnalysisObserver\")],f);const u=f;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as t}from\"./featureReferenceUtils.js\";import{Clonable as e}from\"../core/Clonable.js\";import{JSONSupportMixin as s}from\"../core/JSONSupport.js\";import{equalsMaybe as i}from\"../core/maybe.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import c from\"../geometry/Point.js\";import l from\"../symbols/support/ElevationInfo.js\";let m=class extends(s(e)){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return i(this.position,o.position)&&i(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([p({type:c}),n()],m.prototype,\"position\",void 0),o([p({type:l}),n()],m.prototype,\"elevationInfo\",void 0),o([p(t)],m.prototype,\"feature\",void 0),m=o([a(\"esri.analysis.LineOfSightAnalysisTarget\")],m);const f=m;export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import r from\"../../../../core/Accessor.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new e([3,252,111,1]),this.visibleOuterColor=new e([3,252,111,.15]),this.occludedInnerColor=new e([252,3,69,1]),this.occludedOuterColor=new e([252,3,69,.1]),this.undefinedInnerColor=new e([255,255,255,1]),this.undefinedOuterColor=new e([127,127,127,.2])}};o([t({type:Number})],s.prototype,\"innerWidth\",void 0),o([t({type:Number})],s.prototype,\"outerWidth\",void 0),o([t({type:e})],s.prototype,\"visibleInnerColor\",void 0),o([t({type:e})],s.prototype,\"visibleOuterColor\",void 0),o([t({type:e})],s.prototype,\"occludedInnerColor\",void 0),o([t({type:e})],s.prototype,\"occludedOuterColor\",void 0),o([t({type:e})],s.prototype,\"undefinedInnerColor\",void 0),o([t({type:e})],s.prototype,\"undefinedOuterColor\",void 0),s=o([i(\"esri.views.3d.analysis.LineOfSight.LineOfSightConfiguration\")],s);export{s as LineOfSightConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(o){super(o),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null,this.visible=void 0}};o([e()],s.prototype,\"target\",void 0),o([e()],s.prototype,\"intersectedGraphic\",void 0),o([e()],s.prototype,\"intersectedLocation\",void 0),o([e()],s.prototype,\"elevationAlignedTargetLocation\",void 0),o([e({type:Boolean})],s.prototype,\"visible\",void 0),s=o([r(\"esri.views.3d.analysis.LineOfSightAnalysisResult\")],s);export{s as LineOfSightAnalysisResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";let i=class extends o{constructor(t){super(t),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:s(),observerSurfaceNormal:null,observerFeatureId:null,target:s(),targetSurfaceNormal:null,targetFeatureId:null,observerAdjusted:s(),targetAdjusted:s()},this.computationResult={start:s(),end:s(),intersection:s(),isValid:!1,isTargetVisible:!1},this.result=null}notifyResultChanged(){this.notifyChange(\"computationResult\")}notifyInputPointsChanged(){this.notifyChange(\"inputPoints\")}};t([e()],i.prototype,\"target\",void 0),t([e()],i.prototype,\"elevationAlignedTargetLocation\",void 0),t([e()],i.prototype,\"inputPoints\",void 0),t([e()],i.prototype,\"computationResult\",void 0),t([e()],i.prototype,\"result\",void 0),i=t([r(\"esri.views.3d.analysis.LineOfSight.LineOfSightComputation\")],i);export{i as LineOfSightComputation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{equals as t}from\"../../../../core/arrayUtils.js\";import{clone as s}from\"../../../../core/lang.js\";import{equalsMaybe as e}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{F as n}from\"../../../../chunks/vec3.js\";import{a as c}from\"../../../../chunks/vec3f64.js\";import{equals as a}from\"../../../../geometry/support/ray.js\";var m;let y=m=class extends o{constructor(r){super(r)}clone(){return new m({type:this.type,id:s(this.id),mapPoint:s(this.mapPoint),renderPoint:c(this.renderPoint),normal:s(this.normal),ray:s(this.ray),graphic:this.graphic})}equals(r){return this.type===r.type&&this.id===r.id&&e(this.mapPoint,r.mapPoint)&&n(this.renderPoint,r.renderPoint)&&t(this.normal,r.normal)&&a(this.ray,r.ray)&&this.graphic===r.graphic}};r([i()],y.prototype,\"type\",void 0),r([i({constructOnly:!0})],y.prototype,\"id\",void 0),r([i({constructOnly:!0})],y.prototype,\"mapPoint\",void 0),r([i({constructOnly:!0})],y.prototype,\"renderPoint\",void 0),r([i({constructOnly:!0})],y.prototype,\"normal\",void 0),r([i({constructOnly:!0})],y.prototype,\"graphic\",void 0),r([i({constructOnly:!0})],y.prototype,\"ray\",void 0),y=m=r([p(\"esri.views.3d.analysis.LineOfSight.LineOfSightIntersectionResult\")],y);export{y as LineOfSightIntersectionResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{isNone as t,isSome as s}from\"../../../../core/maybe.js\";import{screenPointObjectToArray as o}from\"../../../../core/screenUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c,n as a,g as p,a as m}from\"../../../../chunks/vec3.js\";import{a as l,c as d}from\"../../../../chunks/vec3f64.js\";import{create as u,copy as h,fromPoints as f}from\"../../../../geometry/support/ray.js\";import{sv2d as y}from\"../../../../geometry/support/vectorStacks.js\";import{getObjectId as g}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{LineOfSightIntersectionResult as I}from\"./LineOfSightIntersectionResult.js\";import{isI3sIntersectorResult as j}from\"../../layers/i3s/Intersector.js\";import{fromScreen as v}from\"../../support/geometryUtils/ray.js\";import{isTerrainIntersectorResult as w}from\"../../terrain/Intersector.js\";import{newIntersector as b}from\"../../webgl-engine/lib/Intersector.js\";import{StoreResults as P,IntersectorType as R}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as S}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";let U=class extends r{constructor(e){super(e),this._terrainIntersectionOptionsLayerUids=new Set([\"terrain\"])}initialize(){this.intersector=b(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=P.MIN}getScreenPointIntersection(e){const r=o(e,y.get()),t=v(this.view.state.camera,r,_);return this._getRayIntersection(t)}_getRayIntersection(e,r){if(t(e)||t(this.view.sceneIntersectionHelper))return null;this.intersector.options.store=P.MIN,this.view.sceneIntersectionHelper.intersectToolIntersectorRay(e,this.intersector,r);const o=this.intersector.results.min,i=d();if(!o.getIntersectionPoint(i))return null;const n=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference),c=l(o.normal);if(j(o))return new I({type:R.OBJECT,id:`${o.target.layerUid}/${o.target.nodeIndex}/${o.target.componentIndex}`,mapPoint:n,renderPoint:i,normal:c,ray:h(e),graphic:null});if(w(o))return new I({type:R.TERRAIN,id:o.target.lij.slice(),mapPoint:n,renderPoint:i,normal:c,ray:h(e),graphic:null});const a=S(o,this.view);if(s(a)){const r=a.layer,t=a.sourceLayer;let s;if(t)if(\"scene\"===t.type)s=g(a,t.objectIdField);else s=a.uid;else s=a.uid;return new I({type:R.OBJECT,id:`${r.uid}/${s}`,mapPoint:n,renderPoint:i,normal:c,ray:h(e),graphic:a})}return null}updateFromGroundIntersection(e,r,t){const o=O,i=C,n=L,d=T;c(i,e),this.view.renderCoordsHelper.worldUpAtPosition(i,n),a(n,n);const u=this.view.basemapTerrain.visibleElevationBounds,h=u?Math.abs(u.max-u.min):100,y=r>=0?1:-1;p(d,n,y*(h+Math.abs(r))),m(o,i,d),f(o,i,_);const g=this._getRayIntersection(_,{include:this._terrainIntersectionOptionsLayerUids});return s(g)?(p(d,n,y*r),m(t,g.renderPoint,d),l(g.normal)):(c(t,e),null)}};e([i()],U.prototype,\"view\",void 0),e([i()],U.prototype,\"intersector\",void 0),U=e([n(\"esri.views.3d.analysis.LineOfSight.LineOfSightRayIntersector\")],U);const O=d(),C=d(),L=d(),T=d(),_=u();export{U as LineOfSightRayIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import{getFeatureId as t}from\"../../../../analysis/featureReferenceUtils.js\";import o from\"../../../../core/Accessor.js\";import{createTask as i}from\"../../../../core/asyncUtils.js\";import n from\"../../../../core/Evented.js\";import r from\"../../../../core/Handles.js\";import{handlesGroup as s,makeHandle as a}from\"../../../../core/handleUtils.js\";import l from\"../../../../core/Logger.js\";import{isNone as c,isSome as d,abortMaybe as u,unwrapOr as p,none as h}from\"../../../../core/maybe.js\";import{ignoreAbortErrors as g}from\"../../../../core/promiseUtils.js\";import{initial as v}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as _,i as b,b as y,n as C,g as I,a as T,j as P,y as O}from\"../../../../chunks/vec3.js\";import{c as S}from\"../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as j}from\"../../../../core/support/WatchUpdatingTracking.js\";import{projectOrLoad as w,projectBoundingRect as R}from\"../../../../geometry/projection.js\";import{empty as A,containsPointObject as E,intersectsSegment as H}from\"../../../../geometry/support/aaBoundingRect.js\";import{fromPoints as F,create as L}from\"../../../../geometry/support/ray.js\";import{zValueInAbsoluteHeightMode as V}from\"../../../../support/elevationInfoUtils.js\";import{LineOfSightAnalysisResult as D}from\"../LineOfSightAnalysisResult.js\";import{LineOfSightComputation as x}from\"./LineOfSightComputation.js\";import{LineOfSightRayIntersector as N}from\"./LineOfSightRayIntersector.js\";import{logFailedGeometryProjectionError as k}from\"../support/projectionUtils.js\";import{StoreResults as z}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as G,hasLod as U,getIntersectedFeatureBSRadius as M}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{ImmediateTask as Z,TaskPriority as q}from\"../../../support/Scheduler.js\";import B from\"../../../../geometry/Point.js\";const W=\"esri.views.3d.analysis.LineOfSight.LineOfSightController\",J=l.getLogger(W);let K=class extends(n.EventedMixin(o)){constructor(e){super(e),this.updateOnCameraChange=!0,this._effectiveObserverElevationMode=\"absolute-height\",this._observerFeatureId=null,this._updatingHandles=new j,this._frameTask=Z,this._handles=new r,this._computationHandles=new r,this._externalObserverUpdate=!0}initialize(){const e=this.view.resourceController?.scheduler;this._frameTask=e?e.registerTask(q.LINE_OF_SIGHT_TOOL):Z,this._intersector=new N({view:this.view}),this._handles.add([this._connectObserver(),this._connectComputations(),this._connectTargets()])}destroy(){this._handles.destroy(),this._computationHandles.destroy(),this._computations.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(e){this._frameTask.priority=e}get _computations(){return this.analysisViewData.computations}get _elevationAlignedObserverPositionRenderSpace(){return this.analysisViewData.observerEngineLocation}set _elevationAlignedObserverPositionRenderSpace(e){this.analysisViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._elevationAlignedObserverPositionRenderSpace)}_computeResult(e){const t=e.computation,{inputPoints:o,computationResult:i}=t,{observerAdjusted:n,targetAdjusted:r}=o,{start:s,end:a}=i;_(s,n),_(a,r);this._canCompute(t)?this._computeIntersection(e):this._interpolateIntersection(e),t.notifyResultChanged(),this.emit(\"result-changed\",{target:e.computation.target,result:t.result})}_updateAdjustedPointsFromFeatures(e){const o=this.view,{sceneIntersectionHelper:i}=o,{inputPoints:n}=e,{observerAdjusted:r,observerFeatureId:s,targetFeatureId:a,targetAdjusted:l}=n;if(c(s)&&c(a))return;const u=b(r,l),p=this._intersector.intersector,h=F(n.observer,n.target,Y);p.options.store=z.ALL,i.intersectToolIntersectorRay(h,p);let g=null,v=null,m=null,f=null;for(const _ of p.results.all){const e=G(_,this.view);if(c(e)||c(_.distanceInRenderSpace))continue;const i=t(e);c(i)||(d(s)&&i===s&&(c(g)&&(g=this._getFeatureDistanceThreshold(_,o,u)),_.distanceInRenderSpace<g&&(m=_)),d(a)&&i===a&&(c(v)&&(v=this._getFeatureDistanceThreshold(_,o,u)),c(f)&&_.distanceInRenderSpace<u&&u-_.distanceInRenderSpace<v&&(f=_)))}d(m)&&m.getIntersectionPoint(r)&&(n.observerSurfaceNormal=m.getTransformedNormal(S())),d(f)&&f.getIntersectionPoint(l)&&(n.targetSurfaceNormal=f.getTransformedNormal(S()))}_getFeatureDistanceThreshold(e,t,o){if(U(e)){const i=M(e,t);if(d(i))return Math.min(i*ee,o)}return 1e-5*o}_adjustStartEndPositions(e){const t=this._screenPixelSize,o=this.view,{inputPoints:i}=e,{observer:n,observerSurfaceNormal:r,target:s,targetSurfaceNormal:a,observerAdjusted:l,targetAdjusted:c}=i,u=X;_(l,n),_(c,s),this._updateAdjustedPointsFromFeatures(e),d(r)?_(u,r):y(u,c,l);const p=t;C(u,u),I(u,u,Math.min(p,1)),T(l,l,u),d(a)?_(u,a):y(u,l,c);const h=o.state.camera.computeScreenPixelSizeAt(c);C(u,u),I(u,u,Math.min(h,1)),T(c,c,u)}_computeIntersection({computation:e,interpolationInfo:t}){const{view:o}=this,{sceneIntersectionHelper:i,renderCoordsHelper:n}=o;if(c(i))return;const r=this._intersector.intersector,{computationResult:s,inputPoints:a}=e,{observer:l,target:u}=a,{start:p,end:h}=s,g=F(p,h,Y);r.options.store=z.MIN,i.intersectToolIntersectorRay(g,r);const v=r.results.min,m=s.intersection,f=X;let b=!0;if(d(v)&&v.getIntersectionPoint(m)){_(t.originalIntersection,m),_(t.originalObserver,p),_(t.originalTarget,h),n.fromRenderCoords(m,f,o.spatialReference);const e=1-P(h,u)/P(p,u);b=P(l,m)>=e*P(l,u)}const y=new B(f,o.spatialReference);{const{result:t,target:i}=e;d(t)?(t.target=i,t.intersectedGraphic=b?null:G(v,o),t.intersectedLocation=b?null:y,t.visible=b):e.result=new D({target:i,elevationAlignedTargetLocation:e.elevationAlignedTargetLocation,intersectedGraphic:b?null:G(v,o),intersectedLocation:b?null:y,visible:b})}s.isValid=a.isValid=!0,s.isTargetVisible=b}_interpolateIntersection({computation:e,interpolationInfo:t}){const{computationResult:o,inputPoints:i}=e,{start:n,end:r,intersection:s}=o,{originalIntersection:a,originalObserver:l,originalTarget:c}=t;if(_(s,a),i.isValid){const e=X,t=P(l,a)/P(l,c);O(e,n,l),I(e,e,1-t),T(s,s,e),O(e,r,c),I(e,e,t),T(s,s,e),o.isValid=!0}else e.result=null,o.isValid=!1,o.isTargetVisible=!1}_canCompute(e){const t=this.analysisViewData.elevationAlignedObserver,o=this.view.frustum;if(c(t)||c(e.elevationAlignedTargetLocation)||c(o))return!1;const{observerAdjusted:i,targetAdjusted:n}=e.inputPoints,r=o.intersectsPoint(i),s=o.intersectsPoint(n);return r&&s}_onObserverPositionChange(e,o,i,n,r){if(this._externalObserverUpdate=r,c(e))return this.analysisViewData.elevationAlignedObserver=null,void(this._observerFeatureId=null);if(c(o))return k(this.analysis,e.spatialReference,J),void(this.analysisViewData.elevationAlignedObserver=null);const s=this._getEffectiveElevationInfo(o,i),{absoluteZ:a,elevation:l}=V(o.x,o.y,o.z,this.view.spatialReference,this.view,s),d=o.clone();d.z=a,this._effectiveObserverElevationMode=s.mode,this.analysisViewData.elevationAlignedObserver=d;const u=S();this.view.renderCoordsHelper.toRenderCoords(d,u),this._elevationAlignedObserverPositionRenderSpace=u,this._observerGroundOffsetRenderSpace=a-l,this._observerFeatureId=t(n),this.priority=q.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onObserverRenderSpacePositionChangeForComputation(e,t,o,i,n){const{inputPoints:r}=e;switch(_(r.observer,t),r.observerFeatureId=n,r.observerSurfaceNormal=null,i){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(r.observer,o,r.observer);c(r.observerFeatureId)&&(r.observerSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=q.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetPositionChange(e,o,i,n,r,s=!0){const a=e.inputPoints;if(s&&(a.isValid=!1),c(i))return d(o)&&k(this.analysis,o.spatialReference,J),e.elevationAlignedTargetLocation=null,void e.notifyInputPointsChanged();const l=this._getEffectiveElevationInfo(i,n),{absoluteZ:u,elevation:p}=V(i.x,i.y,i.z,this.view.spatialReference,this.view,l),h=i.clone();switch(h.z=u,e.elevationAlignedTargetLocation=h,this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,a.target),a.targetFeatureId=t(r),a.targetSurfaceNormal=null,l.mode){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(a.target,u-p,a.target);c(a.targetFeatureId)&&(a.targetSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=q.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectComputationToTarget(e){return s([this._updatingHandles.add((()=>({computation:e,targetPosition:e.target.position,targetElevationInfo:e.target.elevationInfo,targetFeatureInfo:e.target.feature,projectedTargetPosition:w(e.target.position,this.view.spatialReference)})),(({computation:e,targetPosition:t,targetElevationInfo:o,targetFeatureInfo:i,projectedTargetPosition:n})=>{d(n.pending)?this._updatingHandles.addPromise(n.pending):this._onTargetPositionChange(e,t,n.geometry,o,i)}),v)])}_connectComputationToObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this.analysisViewData.elevationAlignedObserver})),(({computation:e})=>{this._externalObserverUpdate&&(e.inputPoints.isValid=!1,e.notifyInputPointsChanged())}),v)}_connectComputationToRenderSpaceObserver(e){return this._updatingHandles.add((()=>({computation:e,observer:this._elevationAlignedObserverPositionRenderSpace,observerGroundOffset:this._observerGroundOffsetRenderSpace,observerElevationMode:this._effectiveObserverElevationMode,observerFeatureId:this._observerFeatureId})),(({computation:e,observer:t,observerGroundOffset:o,observerElevationMode:i,observerFeatureId:n})=>{this._onObserverRenderSpacePositionChangeForComputation(e,t,o,i,n)}),v)}_connectComputationToCamera(e){return this._updatingHandles.add((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:t})=>{!this.updateOnCameraChange||e.inputPoints.isValid&&!t||e.notifyInputPointsChanged()}))}_connectComputationToSlicePlane(e){return this._updatingHandles.add((()=>this.view.slicePlane),(()=>{e.inputPoints.isValid=!1,e.notifyInputPointsChanged()}))}_connectComputationToElevation(e){const t=(o,i)=>{const n=this.analysis.observer,r=e.target;let s=null,a=null,l=null,u=null,p=null,h=null;if(d(n)&&d(n.position)){const e=w(n.position,this.view.spatialReference);if(d(e.pending))return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(o,i)));s=e.geometry,a=n.elevationInfo,l=n.feature}if(d(r.position)){const e=w(r.position,this.view.spatialReference);if(d(e.pending))return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(o,i)));u=e.geometry,p=r.elevationInfo,h=r.feature}c(s)&&c(u)||(R(o,i,$,this.view.spatialReference),d(s)&&E($,s)&&this._onObserverPositionChange(d(n)?n.position:null,s,a,l,!1),d(u)&&E($,u)&&this._onTargetPositionChange(e,r.position,u,p,h,!1),d(s)&&d(u)&&H($,s,u)&&e.notifyInputPointsChanged())};return this.view.elevationProvider.on(\"elevation-change\",(e=>t(e.extent,e.spatialReference)))}_connectComputationToTask(e){let t=h;const o={computation:e,interpolationInfo:{originalIntersection:S(),originalObserver:S(),originalTarget:S()}};return s([this._updatingHandles.add((()=>e.inputPoints),(()=>{t=u(t),t=i((async e=>{await g(this._frameTask.schedule((()=>this._computeResult(o)),e))}))}),{initial:!0,equals:()=>!1}),a((()=>t=u(t)))])}_connectComputation(e){const t=this._computationHandles;t.has(e)||t.add([this._connectComputationToTarget(e),this._connectComputationToObserver(e),this._connectComputationToRenderSpaceObserver(e),this._connectComputationToCamera(e),this._connectComputationToSlicePlane(e),this._connectComputationToElevation(e),this._connectComputationToTask(e)],e)}_disconnectComputation(e){this._computationHandles.remove(e)}_onComputationCollectionChange({added:e,removed:t}){for(const o of t)this._disconnectComputation(o);for(const o of e)this._connectComputation(o)}_onTargetCollectionChange({added:e,removed:t}){for(const o of t)this._removeTarget(o);for(const o of e)this._addTarget(o)}_onCursorTargetChange(e,t){d(t)&&this._removeTarget(t),d(e)&&this._addTarget(e)}_addTarget(e){this._computations.some((t=>t.target===e))||this._computations.add(new x({target:e}))}_removeTarget(e){const t=this._computations.findIndex((t=>t.target===e));this._computations.removeAt(t)}_connectObserver(){return s([this._updatingHandles.add((()=>({observerPosition:d(this.analysis.observer)?this.analysis.observer.position:null,projectedObserverPosition:w(d(this.analysis.observer)?this.analysis.observer.position:null,this.view.spatialReference),observerElevationInfo:d(this.analysis.observer)?this.analysis.observer.elevationInfo:null,observerFeatureInfo:d(this.analysis.observer)?this.analysis.observer.feature:null})),(({observerPosition:e,projectedObserverPosition:t,observerElevationInfo:o,observerFeatureInfo:i})=>{d(t.pending)?this._updatingHandles.addPromise(t.pending):this._onObserverPositionChange(e,t.geometry,o,i,!0)}),v)])}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this._computations),(e=>this._onComputationCollectionChange(e)),{initial:!0,final:!0})}_connectTargets(){return s([this._updatingHandles.addOnCollectionChange((()=>this.analysis.targets),(e=>this._onTargetCollectionChange(e)),{initial:!0,final:!0}),this._updatingHandles.add((()=>this.analysisViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)}))])}get _isCameraDirty(){const e=this.analysisViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:o}=t;if(c(e)||c(o))return!1;const i=X;o.toRenderCoords(e,i);const n=t.state.camera.computeScreenPixelSizeAt(i);return Math.abs((n-this._screenPixelSize)/this._screenPixelSize)>Q}_getEffectiveElevationInfo(e,t){return e.hasZ?p(t,{mode:\"absolute-height\",offset:0}):{mode:\"on-the-ground\",offset:0}}};e([m({constructOnly:!0})],K.prototype,\"analysis\",void 0),e([m({constructOnly:!0})],K.prototype,\"analysisViewData\",void 0),e([m({constructOnly:!0})],K.prototype,\"view\",void 0),e([m()],K.prototype,\"updating\",null),e([m()],K.prototype,\"priority\",null),e([m()],K.prototype,\"updateOnCameraChange\",void 0),e([m()],K.prototype,\"_computations\",null),e([m()],K.prototype,\"_elevationAlignedObserverPositionRenderSpace\",null),e([m()],K.prototype,\"_observerGroundOffsetRenderSpace\",void 0),e([m()],K.prototype,\"_effectiveObserverElevationMode\",void 0),e([m()],K.prototype,\"_observerFeatureId\",void 0),e([m()],K.prototype,\"_screenPixelSize\",null),e([m({readOnly:!0})],K.prototype,\"_updatingHandles\",void 0),e([m()],K.prototype,\"_frameTask\",void 0),e([m()],K.prototype,\"_isCameraDirty\",null),K=e([f(W)],K);const Q=.1,X=S(),Y=L(),$=A(),ee=.05;export{K as LineOfSightController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../Color.js\";import t from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(e){super(e),this.enabled=!0,this.glowColor=new o([255,127,0]),this.glowWidth=8,this.innerColor=new o([255,255,255]),this.innerWidth=.75,this.globalAlpha=.75}};e([r({type:Boolean})],s.prototype,\"enabled\",void 0),e([r({type:o})],s.prototype,\"glowColor\",void 0),e([r({type:Number})],s.prototype,\"glowWidth\",void 0),e([r({type:o})],s.prototype,\"innerColor\",void 0),e([r({type:Number})],s.prototype,\"innerWidth\",void 0),e([r({type:Number})],s.prototype,\"globalAlpha\",void 0),s=e([i(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightLaserLineConfiguration\")],s);let n=class extends t{constructor(e){super(e),this.size=.5,this.color=new o([255,127,0,.75])}};e([r({type:Number})],n.prototype,\"size\",void 0),e([r({type:o})],n.prototype,\"color\",void 0),n=e([i(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightObserverConfiguration\")],n);let p=class extends t{constructor(e){super(e),this.size=.5,this.visibleColor=new o([3,252,111,.75]),this.occludedColor=new o([252,3,69,.75]),this.undefinedColor=new o([127,127,127,.75])}};e([r({type:Number})],p.prototype,\"size\",void 0),e([r({type:o})],p.prototype,\"visibleColor\",void 0),e([r({type:o})],p.prototype,\"occludedColor\",void 0),e([r({type:o})],p.prototype,\"undefinedColor\",void 0),p=e([i(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTargetConfiguration\")],p);class l extends t{constructor(e){super(e),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new o([3,252,111,1]),this.visibleOuterColor=new o([3,252,111,.15]),this.occludedInnerColor=new o([252,3,69,1]),this.occludedOuterColor=new o([252,3,69,.1]),this.undefinedInnerColor=new o([255,255,255,1]),this.undefinedOuterColor=new o([127,127,127,.2])}}e([r({type:Number})],l.prototype,\"innerWidth\",void 0),e([r({type:Number})],l.prototype,\"outerWidth\",void 0),e([r({type:o})],l.prototype,\"visibleInnerColor\",void 0),e([r({type:o})],l.prototype,\"visibleOuterColor\",void 0),e([r({type:o})],l.prototype,\"occludedInnerColor\",void 0),e([r({type:o})],l.prototype,\"occludedOuterColor\",void 0),e([r({type:o})],l.prototype,\"undefinedInnerColor\",void 0),e([r({type:o})],l.prototype,\"undefinedOuterColor\",void 0);let d=class extends t{constructor(e){super(e),this.laserLine=new s,this.observer=new n,this.target=new p,this.lineOfSight=new l}};e([r({type:s})],d.prototype,\"laserLine\",void 0),e([r({type:n})],d.prototype,\"observer\",void 0),e([r({type:p})],d.prototype,\"target\",void 0),e([r({type:l})],d.prototype,\"lineOfSight\",void 0),d=e([i(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightToolConfiguration\")],d);export{l as LineOfSightConfiguration,s as LineOfSightLaserLineConfiguration,n as LineOfSightObserverConfiguration,p as LineOfSightTargetConfiguration,d as LineOfSightToolConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport o from\"../../../../Color.js\";import{Manipulator3D as t}from\"../../interactive/Manipulator3D.js\";import{createManipulatorMaterial as r}from\"../../interactive/manipulatorUtils.js\";import{disableDisplayOnGrab as e}from\"../../interactive/editingTools/manipulatorUtils.js\";import{createSphereGeometry as i}from\"../../webgl-engine/lib/GeometryUtil.js\";import{ManipulatorStateCustomFlags as s}from\"../../../interactive/interfaces.js\";function m(t,e,s){return{geometry:i(t,32,32),material:r(o.toUnitRGBA(e)),stateMask:s}}function n(o){const t=[];return o.customColor1&&t.push(m(o.size,o.customColor1,s.Custom1)),o.customColor2&&t.push(m(o.size,o.customColor2,s.Custom2)),o.customColor3&&t.push(m(o.size,o.customColor3,s.Custom3)),o.color&&t.push(m(o.size,o.color)),t}function u(o,r){const i=n(r),s=new t({view:o,renderObjects:i,elevationInfo:{mode:\"absolute-height\",offset:0}});return e(s),s}export{u as createSphereManipulator,m as createSphereManipulatorRenderObject,n as createSphereManipulatorRenderObjects};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import i from\"../../../../analysis/LineOfSightAnalysisObserver.js\";import a from\"../../../../analysis/LineOfSightAnalysisTarget.js\";import r from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{destroyMaybe as n,isSome as o,isNone as l,applySome as c}from\"../../../../core/maybe.js\";import{watch as u,syncAndInitial as h,initial as p}from\"../../../../core/reactiveUtils.js\";import{property as d}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as g}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as _}from\"../../../../core/support/WatchUpdatingTracking.js\";import{create as m,fromPoints as v}from\"../../../../geometry/support/lineSegment.js\";import{getGraphicEffectiveElevationInfo as b,getConvertedElevation as y}from\"../../../../support/elevationInfoUtils.js\";import f from\"../../../../symbols/support/ElevationInfo.js\";import{LineOfSightRayIntersector as T}from\"./LineOfSightRayIntersector.js\";import{LineOfSightToolConfiguration as C}from\"./LineOfSightToolConfiguration.js\";import{createSphereManipulator as w,createSphereManipulatorRenderObjects as M}from\"./lineOfSightToolUtils.js\";import{LaserlineVisualElement as L}from\"../../interactive/visualElements/LaserlineVisualElement.js\";import{IntersectorType as k}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import\"../../../input/ViewEvents.js\";import{AnalysisToolBase as V}from\"../../../interactive/AnalysisToolBase.js\";import{createManipulatorDragEventPipeline as O}from\"../../../interactive/dragEventPipeline.js\";import{ManipulatorStateCustomFlags as S}from\"../../../interactive/interfaces.js\";import{createScreenPointFromEvent as D}from\"../../../support/screenUtils.js\";import{MouseButton as E}from\"../../../input/IViewEvents.js\";var I;!function(e){e.Ready=\"ready\",e.Creating=\"creating\",e.Created=\"created\"}(I||(I={}));let H=class extends V{constructor(e){super(e),this.removeIncompleteOnCancel=!1,this.configuration=new C,this.analysisViewData=null,this._laserlineVisualElement=null,this._grabbedManipulator=null,this._analysisHandles=new r,this._handles=new r,this._updatingHandles=new _,this._manipulatorHandles=new r,this._targetTrackerManipulator=null}initialize(){this._intersector=new T({view:this.view}),this._handles.add(u((()=>this.state),(e=>{e===I.Created&&this.finishToolCreation()}),h)),this._observerManipulator=this._createObserverManipulator(),this._handles.add([this._updatingHandles.add((()=>({...this.configuration.observer})),(()=>this._updateObserverManipulatorStyle())),this._updatingHandles.add((()=>this.analysisViewData.elevationAlignedObserver),(e=>this._onObserverLocationChange(e)),p),this._updatingHandles.add((()=>({...this.configuration.laserLine})),(()=>this._createVisualElements()),p),this._updatingHandles.add((()=>this._laserLineRendererDependencies()),(e=>this._updateLaserLineRenderer(e))),this._connectComputations(),this._updatingHandles.addWhen((()=>!this._shouldRenderTracker),(()=>this._clearCursorTracker()),p)])}destroy(){this._updatingHandles=n(this._updatingHandles),this._handles=n(this._handles),this._manipulatorHandles=n(this._manipulatorHandles),this._analysisHandles=n(this._analysisHandles),this._observerManipulator=null,this._clearCursorTracker(),this._removeVisualElements(),this._intersector=null,this._set(\"analysis\",null)}get state(){return this.active?this.hasGrabbedManipulators?I.Created:I.Creating:o(this.analysis.observer)&&o(this.analysis.observer.position)?I.Created:I.Ready}get cursor(){return this.active&&this._showTracker?\"crosshair\":null}get updating(){return o(this.analysisViewData)&&this.analysisViewData.updating||this._updatingHandles.updating}get _showTracker(){return this.active&&\"mouse\"===this._latestPointerMovePointerType}get _shouldRenderTracker(){return this._showTracker&&o(this.analysis.observer)&&o(this.analysis.observer.position)&&!this.hasGrabbedManipulators}continue(){this.view.activeTool=this}stop(){this.view.activeTool=null}onEditableChange(){this.analysisViewData.editable=this.internallyEditable}onInputEvent(e){switch(e.type){case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"key-down\":this._keyDownHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e)}}onInputEventAfter(e){if(\"immediate-click\"===e.type)this._clickHandler(e)}onShow(){}onHide(){}onDeactivate(){this._clearCursorTracker()}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(e=>this._onComputationsCollectionChange(e)),{initial:!0,final:!0})}_onComputationsCollectionChange({added:e,removed:t}){for(const i of t)this._disconnectComputation(i);for(const i of e)this._connectComputation(i)}_connectComputation(e){if(this.destroyed)return void s.getLogger(this.declaredClass).warn(\"Attempting to connect an analysis to a destroyed LineOfSight tool. Ignoring.\");const t=this._analysisHandles;if(t.has(e))return;const i=this._createTargetManipulator(e.target);l(this._targetTrackerManipulator)&&i.metadata.target===this.analysisViewData.cursorTarget&&(this._targetTrackerManipulator=i,this._targetTrackerManipulator.available=!1,this._targetTrackerManipulator.interactive=!1,this._updateLaserLineRenderer()),t.add([this._updatingHandles.add((()=>this._getLineOfSightManipulatorStateDependencies(e)),(()=>this._updateManipulatorState(i,e)),p),this._updatingHandles.add((()=>e.elevationAlignedTargetLocation),(e=>this._onTargetLocationChange(e,i)),p)],e)}_disconnectComputation(e){if(this.destroyed)return void s.getLogger(this.declaredClass).warn(\"Attempting to disconnect an analysis from a destroyed LineOfSight tool. Ignoring.\");this._analysisHandles.remove(e);const t=this._getTargetManipulator(e.target);o(t)&&(this.manipulators.remove(t),this._manipulatorHandles.remove(t),o(this._targetTrackerManipulator)&&this._targetTrackerManipulator===t&&(this._targetTrackerManipulator=null))}_clearCursorTracker(){this.analysisViewData.cursorTarget=n(this.analysisViewData.cursorTarget)}_createManipulator(e,t,i){const a=w(this.view,e);return a.metadata=i,this._manipulatorHandles.add([t(a),a.events.on(\"grab-changed\",(e=>this._manipulatorGrabChanged(a,e))),a.events.on(\"immediate-click\",(e=>this._manipulatorClick(a,e)))],a),this.manipulators.add(a),a}_createTargetManipulator(e){const t=this.configuration,i={size:t.target.size,customColor1:t.target.visibleColor,customColor2:t.target.occludedColor,customColor3:t.target.undefinedColor,visible:!0},a={target:e,type:\"target\"},r=this._createManipulator(i,(e=>this._createTargetManipulatorDragPipeline(e)),a);return o(e.position)?r.elevationAlignedLocation=e.position:r.available=!1,r}_getTargetManipulator(e){let t=null;return this.manipulators.forEach((i=>{const a=i.manipulator;l(t)&&\"target\"===a.metadata.type&&a.metadata.target===e&&(t=a)})),t}_createObserverManipulator(){const e=this.configuration,t={size:e.observer.size,color:e.observer.color,visible:!0};return this._createManipulator(t,(e=>this._createObserverManipulatorDragPipeline(e)),{type:\"observer\",intersection:null})}_updateObserverManipulatorStyle(){const e=this._observerManipulator,t=this.configuration.observer,i={size:t.size,color:t.color,visible:e.available};e.renderObjects=M(i)}_screenToIntersection(){return e=>{const t=this._intersector.getScreenPointIntersection(e.screenEnd);return l(t)?null:{...e,intersection:t}}}_createTargetManipulatorDragPipeline(e){return O(e,((t,i,a)=>{i.next(this._screenToIntersection()).next(this._updateTargetDragStep(e)).next((()=>this._updateLaserLineRenderer())),a.next(this._cancelTargetDragStep(e.metadata.target)).next((()=>this._updateLaserLineRenderer()))}))}_createObserverManipulatorDragPipeline(e){return O(e,((e,t,i)=>{t.next(this._screenToIntersection()).next(this._updateObserverDragStep()).next((()=>this._updateLaserLineRenderer())),i.next(this._cancelObserverDragStep()).next((()=>this._updateLaserLineRenderer()))}))}_updateObserverDragStep(){return e=>(o(e.intersection.mapPoint)?(l(this.analysis.observer)&&(this.analysis.observer=new i),this._updateFromIntersection(this.analysis.observer,e.intersection)):this.analysis.observer=null,e)}_cancelObserverDragStep(){const e=o(this.analysis.observer)&&o(this.analysis.observer.position)?this.analysis.observer.clone():null;return t=>(this.analysis.observer=e,t)}_updateTargetDragStep(e){return t=>{this._updateFromIntersection(e.metadata.target,t.intersection);const i=t.intersection.mapPoint;return o(i)&&(e.elevationAlignedLocation=i),t}}_cancelTargetDragStep(e){const t=c(e.position,(e=>e.clone()));return i=>(e.position=t,i)}_manipulatorGrabChanged(e,t){switch(t.action){case\"start\":this._grabbedManipulator=e;break;case\"end\":this._grabbedManipulator===e&&(this._grabbedManipulator=null)}}_updateManipulatorState(e,t){const{isValid:i,isTargetVisible:a}=t.computationResult;e.state=i?a?S.Custom1:S.Custom2:S.Custom3}_getLineOfSightManipulatorStateDependencies(e){const{isValid:t,isTargetVisible:i}=e.computationResult;return{isValid:t,isTargetVisible:i}}_laserLineRendererDependencies(){return{laserlineVisualElement:this._laserlineVisualElement,grabbedManipulator:this._grabbedManipulator,shouldRenderTracker:this._shouldRenderTracker,observerPosition:o(this.analysis.observer)?this.analysis.observer.position:null,visible:this.visible}}_updateLaserLineRenderer(e=this._laserLineRendererDependencies()){const{laserlineVisualElement:t,grabbedManipulator:i,shouldRenderTracker:a,observerPosition:r,visible:s}=e;if(l(t))return;const n=o(i)?i:a&&o(r)?this._targetTrackerManipulator:null;this.configuration.laserLine.enabled&&o(n)&&s?(t.visible=!0,t.heightManifoldTarget=n.renderLocation,n!==this._observerManipulator?t.lineVerticalPlaneSegment=v(this._observerManipulator.renderLocation,n.renderLocation,P):t.lineVerticalPlaneSegment=null):(t.visible=!1,t.heightManifoldTarget=null,t.lineVerticalPlaneSegment=null)}_createVisualElements(){const e=this.configuration.laserLine;this._removeVisualElements(),this._laserlineVisualElement=new L({view:this.view,attached:!0,visible:this.visible,style:{glowColor:t.toUnitRGB(e.glowColor),glowWidth:e.glowWidth,innerColor:t.toUnitRGB(e.innerColor),innerWidth:e.innerWidth,globalAlpha:e.globalAlpha}})}_removeVisualElements(){o(this._laserlineVisualElement)&&(this._laserlineVisualElement.destroy(),this._laserlineVisualElement=null)}_onObserverLocationChange(e){l(e)?this._observerManipulator.available=!1:(this._observerManipulator.metadata.intersection=null,this._observerManipulator.available=!0,this._observerManipulator.elevationAlignedLocation=e)}_onTargetLocationChange(e,t){o(e)?(t.elevationAlignedLocation=e,t!==this._targetTrackerManipulator&&(t.available=!0)):t.available=!1}_addPointFromClickEvent(e){const t=this._intersector.getScreenPointIntersection(e);if(!l(t)&&!l(t.mapPoint))if(o(this.analysis.observer)&&o(this.analysis.observer.position)){this._clearCursorTracker();const e=new a;this._updateFromIntersection(e,t),this.analysis.targets.add(e)}else{const e=new i;this._updateFromIntersection(e,t),this.analysis.observer=e}}_clickHandler(e){this.active&&e.button!==E.Right&&(this._addPointFromClickEvent(D(e)),e.stopPropagation())}_doubleClickHandler(e){this.active&&e.button!==E.Right&&(this.stop(),e.stopPropagation())}_keyDownHandler(e){this.active&&\"Escape\"===e.key&&(this.stop(),e.stopPropagation())}_pointerMoveHandler(e){if(this.hasGrabbedManipulators)return;if(this._latestPointerMovePointerType=e.pointerType,this._updateLaserLineRenderer(),!this._showTracker||l(this.analysis.observer)||l(this.analysis.observer.position))return;const t=D(e),i=this._intersector.getScreenPointIntersection(t);o(i)&&o(i.mapPoint)&&(l(this.analysisViewData.cursorTarget)&&(this.analysisViewData.cursorTarget=new a),this._updateFromIntersection(this.analysisViewData.cursorTarget,i),this._updateLaserLineRenderer())}_updateFromIntersection(e,t){if(l(t.mapPoint))return e.position=null,e.elevationInfo=null,void(e.feature=null);switch(t.type){case k.OBJECT:if(o(t.graphic)){const i=t.graphic,a=b(i);\"on-the-ground\"===a.mode&&(a.mode=\"relative-to-ground\",a.offset=0),e.elevationInfo=new f(a),e.feature=i}else e.elevationInfo=null,e.feature=null;break;case k.TERRAIN:case k.I3S:e.elevationInfo=new f({mode:\"on-the-ground\"}),e.feature=null;break;default:e.elevationInfo=null,e.feature=null}const i=t.mapPoint.clone();i.z=y(this.view,i,{mode:\"absolute-height\",offset:0},e.elevationInfo),e.position=i}_manipulatorClick(e,t){if(\"observer\"===e.metadata.type||e.grabbing||e.dragging||t.button!==E.Right||this.analysis.targets.length<=1)return;const{target:i}=e.metadata;this.analysis.targets.remove(i),t.stopPropagation()}get testInfo(){return{laserLineVisualElement:this._laserlineVisualElement}}};e([d({constructOnly:!0})],H.prototype,\"view\",void 0),e([d({constructOnly:!0})],H.prototype,\"analysis\",void 0),e([d({readOnly:!0})],H.prototype,\"state\",null),e([d({readOnly:!0})],H.prototype,\"cursor\",null),e([d()],H.prototype,\"removeIncompleteOnCancel\",void 0),e([d({readOnly:!0})],H.prototype,\"updating\",null),e([d({type:C})],H.prototype,\"configuration\",void 0),e([d({constructOnly:!0})],H.prototype,\"analysisViewData\",void 0),e([d({readOnly:!0})],H.prototype,\"_showTracker\",null),e([d()],H.prototype,\"_latestPointerMovePointerType\",void 0),e([d()],H.prototype,\"_shouldRenderTracker\",null),e([d()],H.prototype,\"_laserlineVisualElement\",void 0),e([d()],H.prototype,\"_grabbedManipulator\",void 0),H=e([g(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\")],H);const P=m();export{H as LineOfSightTool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import t from\"../../../../core/Accessor.js\";import n from\"../../../../core/Handles.js\";import{makeHandle as o}from\"../../../../core/handleUtils.js\";import{destroyMaybe as s,isNone as a}from\"../../../../core/maybe.js\";import{initial as l}from\"../../../../core/reactiveUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/mat4f64.js\";import{b as d}from\"../../../../chunks/vec3.js\";import{d as m,c as h}from\"../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as p}from\"../../../../core/support/WatchUpdatingTracking.js\";import{LineVisualElement as v}from\"../../interactive/visualElements/LineVisualElement.js\";import{PointVisualElement as g}from\"../../interactive/visualElements/PointVisualElement.js\";let f=class extends t{constructor(i){super(i),this._lineOfSightVisualizations=[],this._computationHandles=new n,this._updatingHandles=new p}initialize(){this.addHandles(this._connectComputations()),this._createObserverVisualization()}destroy(){this._updatingHandles=s(this._updatingHandles),this._computationHandles=s(this._computationHandles),this._observerVisualElement=s(this._observerVisualElement)}get visible(){return this.analysisViewData.visible}get updating(){return this._updatingHandles.updating}get interactiveAndEditable(){return this.analysisViewData.interactive&&this.analysisViewData.editable}get testInfo(){return{visualizations:this._lineOfSightVisualizations}}get _configuration(){return this.analysisViewData.configuration}_createLineOfSightVisualization(){const i=this._configuration,t=this.view,n={view:t,attached:!0,width:i.outerWidth,innerWidth:i.innerWidth},o=e.toUnitRGBA(i.visibleOuterColor),s=e.toUnitRGBA(i.visibleInnerColor),a=e.toUnitRGBA(i.occludedOuterColor),l=e.toUnitRGBA(i.occludedInnerColor),r=e.toUnitRGBA(i.undefinedOuterColor),u=e.toUnitRGBA(i.undefinedInnerColor),c={visibleLineVisualElement:new v({...n,color:o,innerColor:s}),occludedLineVisualElement:new v({...n,color:a,innerColor:l}),undefinedLineVisualElement:new v({...n,color:r,innerColor:u}),targetVisualElement:new g({view:t,attached:!0,...b,size:8})};return this._lineOfSightVisualizations.push(c),c}_destroyLineOfSightVisualization(i){i.visibleLineVisualElement=s(i.visibleLineVisualElement),i.occludedLineVisualElement=s(i.occludedLineVisualElement),i.undefinedLineVisualElement=s(i.undefinedLineVisualElement),i.targetVisualElement=s(i.targetVisualElement),this._lineOfSightVisualizations.splice(this._lineOfSightVisualizations.indexOf(i),1)}_updateLineOfSightVisualization(i,t,n){const o=this._configuration,{computationResult:s,inputPoints:l}=i,{start:r,end:u,intersection:c,isValid:h,isTargetVisible:p}=s,{observer:v}=l,g=C;g[12]=v[0],g[13]=v[1],g[14]=v[2];const f=d(V,r,v),b=d(_,u,v),O=d(y,c,v),{visibleLineVisualElement:E,occludedLineVisualElement:A,undefinedLineVisualElement:L,targetVisualElement:w}=t,z=a(this.analysisViewData.elevationAlignedObserver)||a(i.elevationAlignedTargetLocation),S=this.visible&&!z;E.visible=S,A.visible=S,L.visible=S,w.visible=S,w.attached=!n.interactiveAndEditable,S&&(E.geometry=null,A.geometry=null,L.geometry=null,w.geometry=i.elevationAlignedTargetLocation,h?p?(E.geometry=[[m(f),m(b)]],E.transform=g,E.color=e.toUnitRGBA(o.visibleOuterColor),w.color=e.toUnitRGBA(o.visibleInnerColor)):(E.geometry=[[m(f),m(O)]],E.transform=g,E.color=e.toUnitRGBA(o.occludedOuterColor),A.geometry=[[m(O),m(b)]],A.transform=g,w.color=e.toUnitRGBA(o.occludedInnerColor)):(L.geometry=[[m(f),m(b)]],L.transform=g,w.color=e.toUnitRGBA(o.undefinedInnerColor)))}_getLineOfSightVisualizationDependencies(i){const{computationResult:e}=i,{occludedOuterColor:t,visibleOuterColor:n}=this._configuration;return{computationResult:e,occludedOuterColor:t,visibleOuterColor:n,visible:this.visible,interactiveAndEditable:this.interactiveAndEditable}}_connectComputation(i){const e=this._computationHandles;if(e.has(i))return;const t=this._createLineOfSightVisualization();e.add([this._updatingHandles.add((()=>this._getLineOfSightVisualizationDependencies(i)),(e=>this._updateLineOfSightVisualization(i,t,e)),{initial:!0,equals:()=>!1}),o((()=>this._destroyLineOfSightVisualization(t)))],i)}_disconnectComputation(i){this._computationHandles.remove(i)}_connectComputations(){return this._updatingHandles.addOnCollectionChange((()=>this.analysisViewData.computations),(i=>this._onComputationsCollectionChange(i)),{initial:!0,final:!0})}_onComputationsCollectionChange({added:i,removed:e}){for(const t of e)this._disconnectComputation(t);for(const t of i)this._connectComputation(t)}_createObserverVisualization(){const i=e.toUnitRGBA(this._configuration.visibleInnerColor),t=new g({view:this.view,attached:!1,color:i,...b});this._observerVisualElement=t,this.addHandles(this._updatingHandles.add((()=>({observer:this.analysisViewData.elevationAlignedObserver,interactiveAndEditable:this.interactiveAndEditable,visible:this.visible})),(({observer:i,interactiveAndEditable:e,visible:n})=>{a(i)||e||!n?t.attached=!1:(t.geometry=i,this._observerVisualElement.attached=!0)}),l))}};i([r({constructOnly:!0})],f.prototype,\"analysis\",void 0),i([r({constructOnly:!0})],f.prototype,\"analysisViewData\",void 0),i([r({constructOnly:!0})],f.prototype,\"view\",void 0),i([r({readOnly:!0})],f.prototype,\"visible\",null),i([r()],f.prototype,\"updating\",null),i([r()],f.prototype,\"interactiveAndEditable\",null),i([r()],f.prototype,\"testInfo\",null),i([r()],f.prototype,\"_configuration\",null),f=i([u(\"esri.views.3d.analysis.LineOfSight.LineOfSightVisualization\")],f);const b={size:6,pixelSnappingEnabled:!1,primitive:\"circle\",elevationInfo:{mode:\"absolute-height\",offset:0},outlineSize:0},V=h(),_=h(),y=h(),C=c();export{f as LineOfSightVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import s from\"../../../core/Collection.js\";import o from\"../../../core/Evented.js\";import{destroyMaybe as r,isSome as e,applySome as n}from\"../../../core/maybe.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{c as p}from\"../../../chunks/vec3f64.js\";import{AnalysisView3D as y}from\"./AnalysisView3D.js\";import{LineOfSightConfiguration as u}from\"./LineOfSight/LineOfSightConfiguration.js\";import{LineOfSightController as h}from\"./LineOfSight/LineOfSightController.js\";import{LineOfSightTool as c}from\"./LineOfSight/LineOfSightTool.js\";import{LineOfSightVisualization as m}from\"./LineOfSight/LineOfSightVisualization.js\";import{connectAnalysisViewToTool as d,removeAnalysisViewTool as g}from\"../../analysis/analysisViewUtils.js\";let f=class extends(y(o.EventedMixin(i))){constructor(t){super(t),this.type=\"line-of-sight-view-3d\",this.analysis=null,this.tool=null,this.computations=new s,this.elevationAlignedObserver=null,this.configuration=new u,this.observerEngineLocation=p(),this.cursorTarget=null,this.editable=!0}initialize(){const t=this.view,i=this.analysis;this._analysisController=new h({analysis:i,analysisViewData:this,view:t}),this._analysisVisualization=new m({analysis:i,analysisViewData:this,view:t}),this.addHandles([this._analysisController.on(\"result-changed\",(t=>{t.target!==this.cursorTarget&&this.emit(\"result-changed\",t)})),d(this,c)])}destroy(){g(this),this._analysisController=r(this._analysisController),this._analysisVisualization=r(this._analysisVisualization)}get results(){return this.computations.map((t=>t.result))}get priority(){return this._analysisController.priority}set priority(t){this._analysisController.priority=t}get updating(){return e(this._analysisController)&&this._analysisController.updating||e(this._analysisVisualization)&&this._analysisVisualization.updating}getResultForTarget(t){const i=this.computations.find((i=>i.target===t));return n(i,(t=>t.result))}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}};t([a({readOnly:!0})],f.prototype,\"type\",void 0),t([a({constructOnly:!0,nonNullable:!0})],f.prototype,\"analysis\",void 0),t([a()],f.prototype,\"tool\",void 0),t([a({readOnly:!0})],f.prototype,\"results\",null),t([a()],f.prototype,\"priority\",null),t([a()],f.prototype,\"computations\",void 0),t([a()],f.prototype,\"elevationAlignedObserver\",void 0),t([a()],f.prototype,\"configuration\",void 0),t([a()],f.prototype,\"observerEngineLocation\",void 0),t([a()],f.prototype,\"cursorTarget\",void 0),t([a()],f.prototype,\"updating\",null),t([a()],f.prototype,\"editable\",void 0),t([a()],f.prototype,\"_analysisController\",void 0),t([a()],f.prototype,\"_analysisVisualization\",void 0),f=t([l(\"esri.views.3d.analysis.LineOfSightAnalysisView3D\")],f);const v=f;export{v as default};\n"],"sourceRoot":""}