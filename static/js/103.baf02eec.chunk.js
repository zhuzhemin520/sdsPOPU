(this["webpackJsonppopulation-arcgis"]=this["webpackJsonppopulation-arcgis"]||[]).push([[103],{1152:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return w}));var r=n(16),o=n(447),i=n(295),s=n(99);const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function p(e){for(const t of e)if(t.length>2)return!0;return!1}function d(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length];t+=r[0]*o[1]-o[0]*r[1]}return t<=0}function f(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function y(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return g(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const r of t.coordinates)g(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const r of t.coordinates){b(e,r[0],n);for(let t=1;t<r.length;t++)m(e,r[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return j(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const r=t.coordinates;b(e,r[0],n);for(let o=1;o<r.length;o++)m(e,r[o],n);return e}(e,t,n)}}function b(e,t,n){const r=f(t);!function(e){return!d(e)}(r)?g(e,r,n):h(e,r,n)}function m(e,t,n){const r=f(t);!function(e){return d(e)}(r)?g(e,r,n):h(e,r,n)}function g(e,t,n){for(const r of t)j(e,r,n);e.lengths.push(t.length)}function h(e,t,n){for(let r=t.length-1;r>=0;r--)j(e,t[r],n);e.lengths.push(t.length)}function j(e,t,n){const[r,o,i]=t;e.coords.push(r,o),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function w(e){if(!e)throw new r.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,o=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!o.test(n))throw new r.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function v(e,t={}){var n;const r=[],o=new Set,i=new Set;let a,d=!1,f=null,y=!1,{geometryType:b=null}=t,m=!1;for(const h of c(e)){const{geometry:e,properties:t,id:n}=h;if((!e||(b||(b=l(e.type)),l(e.type)===b))&&(d||(d=p(u(e))),y||(y=null!=n,y&&(a=typeof n,f=Object.keys(t).filter((e=>t[e]===n)))),y&&null!=n&&(f.length>1?f=f.filter((e=>t[e]===n)):1===f.length&&(f=t[f[0]]===n?f:[])),!m&&t)){let e=!0;for(const n in t){if(o.has(n))continue;const a=t[n];if(null==a){e=!1,i.add(n);continue}const l=O(a);"unknown"!==l?(i.delete(n),o.add(n),r.push({name:Object(s.t)(n),alias:n,type:l})):i.add(n)}m=e}}const g=Object(s.t)(1===(null==(n=f)?void 0:n.length)&&f[0]||null);if(g)for(const l of r)if(l.name===g&&Object(s.q)(l)){l.type="esriFieldTypeOID";break}return{fields:r,geometryType:b,hasZ:d,objectIdFieldName:g,objectIdFieldType:a,unknownFields:Array.from(i)}}function S(e,t){return Array.from(function*(e,t={}){const{geometryType:n,objectIdField:r}=t;for(const a of e){var s;const{geometry:e,properties:c,id:u}=a;if(e&&l(e.type)!==n)continue;const p=c||{};let d=null!=(s=p[r])?s:null;r&&null!=u&&!p[r]&&(p[r]=d=u);const f=new o.a(e?y(new i.a,e,t):null,p,null,d);yield f}}(c(e),t))}},1334:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return S})),n.d(t,"h",(function(){return F})),n.d(t,"i",(function(){return I})),n.d(t,"j",(function(){return T}));n(167);var r=n(134),o=n(16),i=n(22),s=n(2),a=n(47),l=n(96),c=n(336),u=n(760),p=n(1152),d=n(913),f=n(900),y=n(922),b=n(57);const m=i.a.getLogger("esri.layers.graphics.sources.ogcfeature"),g="http://www.opengis.net/def/crs/",h=`${g}OGC/1.3/CRS84`;async function j(e,t,n={},i=5){const{links:a}=e,l=P(a,"items","application/geo+json")||P(a,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(s.k)(l))throw new o.a("ogc-feature-layer:missing-items-page","Missing items url");const{data:c}=await Object(r.default)(l.href,{signal:n.signal,query:{limit:i,...n.customParameters,token:n.apiKey},headers:{accept:"application/geo+json"}});await Object(p.d)(c);const u=Object(p.c)(c,{geometryType:t.geometryType}),b=t.fields||u.fields||[],g=null!=t.hasZ?t.hasZ:u.hasZ,h=u.geometryType,j=t.objectIdField||u.objectIdFieldName||"OBJECTID";let O=t.timeInfo;const w=b.find((({name:e})=>e===j));if(w)w.editable=!1,w.nullable=!1;else{if(!u.objectIdFieldType)throw new o.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");b.unshift({name:j,alias:j,type:"number"===u.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(j!==u.objectIdFieldName){const e=b.find((({name:e})=>e===u.objectIdFieldName));e&&(e.type="esriFieldTypeInteger")}b===u.fields&&u.unknownFields.length>0&&m.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:u.unknownFields}});for(const r of b){if(null==r.name&&(r.name=r.alias),null==r.alias&&(r.alias=r.name),"esriFieldTypeOID"!==r.type&&"esriFieldTypeGlobalID"!==r.type&&(r.editable=null==r.editable||!!r.editable,r.nullable=null==r.nullable||!!r.nullable),!r.name)throw new o.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:r});if(!y.a.jsonValues.includes(r.type))throw new o.a("ogc-feature-layer:invalid-field-type",`invalid type for field "${r.name}"`,{field:r})}if(O){const e=new f.a(b);if(O.startTimeField){const t=e.get(O.startTimeField);t?(O.startTimeField=t.name,t.type="esriFieldTypeDate"):O.startTimeField=null}if(O.endTimeField){const t=e.get(O.endTimeField);t?(O.endTimeField=t.name,t.type="esriFieldTypeDate"):O.endTimeField=null}if(O.trackIdField){const t=e.get(O.trackIdField);t?O.trackIdField=t.name:(O.trackIdField=null,m.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:O}}))}O.startTimeField||O.endTimeField||(m.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:O}}),O=null)}return{drawingInfo:h?Object(d.d)(h):null,extent:R(e),geometryType:h,fields:b,hasZ:!!g,objectIdField:j,timeInfo:O}}async function O(e,t={}){const{links:n}=e,i=P(n,"data","application/json")||P(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(Object(s.k)(i))throw new o.a("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:a,customParameters:l,signal:c}=t,{data:u}=await Object(r.default)(i.href,{signal:c,headers:{accept:"application/json"},query:{...l,token:a}});return u}async function w(e,t={}){const{links:n}=e,i=P(n,"conformance","application/json")||P(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(Object(s.k)(i))throw new o.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:a,customParameters:l,signal:c}=t,{data:u}=await Object(r.default)(i.href,{signal:c,headers:{accept:"application/json"},query:{...l,token:a}});return u}async function v(e,t={}){const{apiKey:n,customParameters:o,signal:i}=t,{data:s}=await Object(r.default)(e,{signal:i,headers:{accept:"application/json"},query:{...o,token:n}});return s}async function S(e,t={}){const n="application/vnd.oai.openapi+json;version=3.0",o=P(e.links,"service-desc",n);if(Object(s.k)(o))return m.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:i,customParameters:a,signal:l}=t,{data:c}=await Object(r.default)(o.href,{signal:l,headers:{accept:n},query:{...a,token:i}});return c}function F(e){var t;const n=null==(t=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e))?void 0:t.groups;if(!n)return null;const{authority:r,code:o}=n;switch(r.toLowerCase()){case"ogc":switch(o.toLowerCase()){case"crs27":return b.a.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return b.a.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(o,10);return Number.isNaN(e)?null:e}default:return null}}async function I(e,t,n){const r=await T(e,t,n);return Object(c.h)(r)}async function T(e,t,n){const{collection:i,layerDefinition:d,maxRecordCount:f,queryParameters:{apiKey:y,customParameters:m},spatialReference:g,supportedCrs:h}=e,{links:j}=i,O=P(j,"items","application/geo+json")||P(j,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(s.k)(O))throw new o.a("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:w,num:v,start:S,timeExtent:F,where:I}=t;if(t.objectIds)throw new o.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const T=b.a.fromJSON(g),k=Object(s.u)(t.outSpatialReference,T),R=k.isWGS84?null:x(k,h),D=C(w,h),G=function(e){if(Object(s.k)(e))return null;const{start:t,end:n}=e;return`${Object(s.l)(t)?t.toISOString():".."}/${Object(s.l)(n)?n.toISOString():".."}`}(F),M=(E=I,Object(s.k)(E)||!E||"1=1"===E?null:E),q=null!=v?v:null!=S&&void 0!==S?10:f,{data:N}=await Object(r.default)(O.href,{...n,query:{...m,...D,crs:R,datetime:G,query:M,limit:q,startindex:S,token:y},headers:{accept:"application/geo+json"}});var E;let _=!1;if(N.links){_=!!N.links.find((e=>"next"===e.rel))}!_&&Number.isInteger(N.numberMatched)&&Number.isInteger(N.numberReturned)&&(_=N.numberReturned<N.numberMatched);const{fields:L,geometryType:J,hasZ:Z,objectIdField:$}=d,A=Object(p.a)(N,{geometryType:J,hasZ:Z,objectIdField:$});if(!R&&k.isWebMercator)for(const r of A)if(Object(s.l)(r.geometry)){const e=Object(c.i)(r.geometry,J,Z,!1);e.spatialReference=b.a.WGS84,r.geometry=Object(c.d)(Object(l.d)(e,k))}for(const r of A)r.objectId=r.attributes[$];const W=R||!R&&k.isWebMercator?k.toJSON():a.b,Q=new u.a;return Q.exceededTransferLimit=_,Q.features=A,Q.fields=L,Q.geometryType=J,Q.hasZ=Z,Q.objectIdFieldName=$,Q.spatialReference=W,Q}function x(e,t){var n,r,o;const{isWebMercator:i,wkid:s}=e;if(!s)return null;const a=i?null!=(n=null!=(r=null!=(o=t[3857])?o:t[102100])?r:t[102113])?n:t[900913]:t[e.wkid];return a?`${g}${a}`:null}function k(e){if(Object(s.k)(e))return"";const{xmin:t,ymin:n,xmax:r,ymax:o}=e;return`${t},${n},${r},${o}`}function C(e,t){if(!function(e){return Object(s.l)(e)&&"extent"===e.type}(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:k(e)};const r=x(n,t);return Object(s.l)(r)?{bbox:k(e),"bbox-crs":r}:n.isWebMercator?{bbox:k(Object(l.d)(e,b.a.WGS84))}:null}function R(e){var t;const n=null==(t=e.extent)?void 0:t.spatial;if(!n)return null;const r=n.bbox[0],o=4===r.length,i=r[0],s=r[1],a=o?void 0:r[2];return{xmin:i,ymin:s,xmax:o?r[2]:r[3],ymax:o?r[3]:r[4],zmin:a,zmax:o?void 0:r[5],spatialReference:b.a.WGS84.toJSON()}}function P(e,t,n){return e.find((e=>e.rel===t&&e.type===n))||e.find((e=>e.rel===t&&!e.type))}},1425:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Z}));var r=n(0),o=(n(167),n(374)),i=(n(560),n(595),n(597),n(561),n(596),n(263),n(424),n(449),n(450),n(403)),s=n(721),a=n(1),l=(n(17),n(12),n(10)),c=n(323),u=n(423),p=n(16),d=n(286),f=n(2),y=n(1334),b=n(474),m=n(57);let g=class extends d.a{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getSource(){const{featureDefinition:{collection:e,layerDefinition:t,spatialReference:n,supportedCrs:r},layer:{apiKey:o,customParameters:i,effectiveMaxRecordCount:s}}=this;return{type:"ogc-source",collection:e,layerDefinition:t,maxRecordCount:s,queryParameters:{apiKey:o,customParameters:i},spatialReference:n,supportedCrs:r}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){return this.queryFeaturesJSON(e,t).then((e=>b.default.fromJSON(e)))}queryFeaturesJSON(e,t={}){const n=this.getSource();return this.load(t).then((()=>Object(y.i)(n,e,t)))}queryObjectIds(e,t={}){return null}serviceSupportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}_conformsToType(e,t){var n;const r=new RegExp(`^${t}$`,"i");return null!=(n=e.conformsTo.some((e=>r.test(e))))&&n}_getCapabilities(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:t,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getMaxRecordCount(e){var t,n,r,o,i,s,a,l,c;return null!=(t=null==e||null==(n=e.components)||null==(r=n.parameters)||null==(o=r.limit)||null==(i=o.schema)?void 0:i.maximum)?t:null==e||null==(s=e.components)||null==(a=s.parameters)||null==(l=a.limitFeatures)||null==(c=l.schema)?void 0:c.maximum}_getStorageSpatialReference(e){var t;const n=null!=(t=e.storageCrs)?t:y.a,r=Object(y.h)(n);return Object(f.k)(r)?m.a.WGS84:new m.a({wkid:r})}_getSupportedSpatialReferences(e,t){var n;const r="#/crs",o=null!=(n=e.crs)?n:[y.a],i=o.includes(r)?o.filter((e=>e!==r)).concat(t.crs):o,s=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return i.filter((e=>!s.test(e)))}async _loadOGCServices(e,t){const n=Object(f.l)(t)?t.signal:null,{apiKey:r,collectionId:o,customParameters:i,fields:s,geometryType:a,hasZ:l,objectIdField:u,timeInfo:d,url:b}=e,m={fields:null==s?void 0:s.map((e=>e.toJSON())),geometryType:c.c.toJSON(a),hasZ:l,objectIdField:u,timeInfo:null==d?void 0:d.toJSON()},g={apiKey:r,customParameters:i,signal:n},h=await Object(y.f)(b,g),[j,O]=await Promise.all([Object(y.e)(h,g),Object(y.d)(h,g)]);if(!this._conformsToType(j,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new p.a("ogc-feature-layer:no-geojson-support","Server does not support geojson");const w=O.collections.find((e=>e.id===o));if(!w)throw new p.a("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const v=this._conformsToType(j,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await Object(y.g)(h,g):null,S=await Object(y.c)(w,m,g),F=this._getMaxRecordCount(v),I=this._getCapabilities(S.hasZ,F),T=this._getStorageSpatialReference(w).toJSON(),x=this._getSupportedSpatialReferences(w,O),k=new RegExp(`^${y.b}`,"i"),C={};for(const c of x){const e=Object(y.h)(c);Object(f.l)(e)&&(C[e]||(C[e]=c.replace(k,"")))}this.featureDefinition={capabilities:I,collection:w,layerDefinition:S,spatialReference:T,supportedCrs:C}}};Object(r.a)([Object(a.b)()],g.prototype,"featureDefinition",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],g.prototype,"layer",void 0),Object(r.a)([Object(a.b)()],g.prototype,"type",void 0),g=Object(r.a)([Object(l.a)("esri.layers.graphics.sources.OGCFeatureSource")],g);var h=n(910),j=n(593),O=n(730),w=n(745),v=n(757),S=n(722),F=n(773),I=n(723),T=n(594),x=n(592),k=n(732),C=n(183),R=n(686),P=n(448),D=n(729),G=n(99),M=n(405),q=n(679),N=n(249),E=n(728),_=n(86);const L=Object(D.a)();let J=class extends(Object(h.a)(Object(O.a)(Object(v.a)(Object(w.a)(Object(j.a)(Object(F.a)(Object(k.a)(Object(x.a)(Object(S.a)(Object(I.a)(Object(T.a)(Object(s.a)(u.a))))))))))))){constructor(e){super(e),this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new g({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((()=>this._fetchService(e)))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){var e,t,n;return null!=(e=null!=(t=this.maxRecordCount)?t:null==(n=this.capabilities)?void 0:n.query.maxRecordCount)?e:5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){Object(G.k)(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Object(E.a)(this,e)}createQuery(){return new N.a}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var n;let r,o=!1;const i=null==t||null==(n=t.feature)?void 0:n.attributes,s=this.typeIdField&&(null==i?void 0:i[this.typeIdField]);return null!=s&&this.types&&(o=this.types.some((t=>{var n,o;return t.id==s&&(r=null==(n=t.domains)?void 0:n[e],"inherited"===(null==(o=r)?void 0:o.type)&&(r=this._getLayerDomain(e)),!0)}))),o||r||(r=this._getLayerDomain(e)),r}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(N.a.from(e)||this.createQuery(),t))).then((e=>{var t;return null!=e&&null!=(t=e.features)&&t.forEach((e=>{e.layer=e.sourceLayer=this})),e}))}serviceSupportsSpatialReference(e){var t,n;return null!=(t=null==(n=this.source)?void 0:n.serviceSupportsSpatialReference(e))&&t}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),Object(G.k)(this.renderer,this.fieldsIndex),Object(G.l)(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(const t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};Object(r.a)([Object(a.b)({readOnly:!0,json:{origins:{service:{read:!0}}}})],J.prototype,"capabilities",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],J.prototype,"collectionId",void 0),Object(r.a)([Object(a.b)({type:String})],J.prototype,"copyright",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],J.prototype,"defaultPopupTemplate",null),Object(r.a)([Object(a.b)({type:String})],J.prototype,"definitionExpression",void 0),Object(r.a)([Object(a.b)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],J.prototype,"description",void 0),Object(r.a)([Object(a.b)({type:String})],J.prototype,"displayField",void 0),Object(r.a)([Object(a.b)({type:Number})],J.prototype,"effectiveMaxRecordCount",null),Object(r.a)([Object(a.b)(C.b)],J.prototype,"elevationInfo",void 0),Object(r.a)([Object(a.b)({type:[P.a],json:{origins:{service:{name:"layerDefinition.fields"}}}})],J.prototype,"fields",void 0),Object(r.a)([Object(a.b)(L.fieldsIndex)],J.prototype,"fieldsIndex",void 0),Object(r.a)([Object(a.b)({readOnly:!0,type:_.a,json:{origins:{service:{name:"layerDefinition.extent"}}}})],J.prototype,"fullExtent",void 0),Object(r.a)([Object(a.b)({type:c.a.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:c.a.read}}}}})],J.prototype,"geometryType",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],J.prototype,"hasZ",void 0),Object(r.a)([Object(a.b)({type:Boolean,readOnly:!0})],J.prototype,"isTable",null),Object(r.a)([Object(a.b)({type:[M.a],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:q.a},write:!0}}}})],J.prototype,"labelingInfo",void 0),Object(r.a)([Object(a.b)(C.d)],J.prototype,"labelsVisible",void 0),Object(r.a)([Object(a.b)(C.e)],J.prototype,"legendEnabled",void 0),Object(r.a)([Object(a.b)({type:Number})],J.prototype,"maxRecordCount",void 0),Object(r.a)([Object(a.b)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],J.prototype,"objectIdField",void 0),Object(r.a)([Object(a.b)({type:["OGCFeatureLayer"]})],J.prototype,"operationalLayerType",void 0),Object(r.a)([Object(a.b)(C.k)],J.prototype,"popupEnabled",void 0),Object(r.a)([Object(a.b)({type:o.a,json:{name:"popupInfo",write:!0}})],J.prototype,"popupTemplate",void 0),Object(r.a)([Object(a.b)({types:i.a,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:i.b,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],J.prototype,"renderer",null),Object(r.a)([Object(a.b)(C.n)],J.prototype,"screenSizePerspectiveEnabled",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],J.prototype,"source",void 0),Object(r.a)([Object(a.b)({readOnly:!0,type:m.a,json:{origins:{service:{read:!0}}}})],J.prototype,"spatialReference",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],J.prototype,"title",void 0),Object(r.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],J.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:String,readOnly:!0})],J.prototype,"typeIdField",void 0),Object(r.a)([Object(a.b)({type:[R.a]})],J.prototype,"types",void 0),Object(r.a)([Object(a.b)(C.o)],J.prototype,"url",void 0),J=Object(r.a)([Object(l.a)("esri.layers.OGCFeatureLayer")],J);const Z=J}}]);
//# sourceMappingURL=103.baf02eec.chunk.js.map