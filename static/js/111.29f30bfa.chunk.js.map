{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/VoxelLayerView3D.js"],"names":["d","s","i","l","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","fullOpacity","n","get","suspended","canResume","suspendInfo","getSuspendInfo","legendEnabled","updating","updatingHandles","isUpdating","updatingProgress","visible","_overrideIfSome","loaded","view","ready","viewNotReady","layerNotLoaded","layerInvisible","a","prototype","readOnly","type","Boolean","p","u","c","arguments","slicePlaneEnabled","supportsHeightUnitConversion","postscript","addResolvingPromise","_validateHeightModelInfo","async","AbortController","signal","handles","add","abort","defaultsFromMap","heightModelInfoReady","heightModelInfo","effectiveScaleRange","minScale","maxScale","outsideScaleRange","y","API","VerboseAPI","Error","m","_usedMemory","_futureMemory","_wasmLayerId","_handles","_dbgFlags","Set","baseUrl","parsedUrl","path","wasmLayerId","viewingMode","_stage","renderView","renderingContext","WEBGL2","capabilities","colorBufferFloat","textureFloat","spatialReference","currentVariableId","getVolume","getVariable","dimensions","zDimension","size","renderingFormat","addVoxelLayerViewToWasm","then","_suspendedHandle","voxelWasm","setEnabled","renderMode","_pushRenderModeToWasm","_pushCurrentVariableIdToWasm","getSections","_pushSectionsToWasm","getVariableStyles","_pushVariableStylesToWasm","getVolumeStyles","_pushVolumeStylesToWasm","enableDynamicSections","_pushEnableDynamicSectionsToWasm","enableIsosurfaces","_pushEnableIsosurfacesToWasm","enableSections","_pushEnableSectionsToWasm","enableSlices","_pushEnableSlicesToWasm","removeVoxelLayerViewFromWasm","destroy","remove","updatingFlagChanged","notifyChange","getUsedMemory","getUnloadedMemory","ignoresMemoryFactor","performanceInfo","nodes","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","setUsedMemory","captureFrustum","toggleFullVolumeExtentDraw","getLayerTimes","getCurrentLayerTimeIndex","_dbg","setRenderMode","setStaticSections","setCurrentVariable","setVariableStyles","_accountForEnableSlices","length","slices","enabled","setVolumeStyles","setEnableDynamicSections","setEnableIsosurfaces","setEnableSections","has","warn","h","b"],"mappings":"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","file":"static/js/111.29f30bfa.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.handles.add(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Error.js\";import t from\"../../../core/Handles.js\";import r from\"../../../core/Logger.js\";import{isSome as a,destroyMaybe as o}from\"../../../core/maybe.js\";import{watch as i,initial as l}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as d}from\"../../../geometry/support/spatialReferenceUtils.js\";import{LayerView3D as m}from\"./LayerView3D.js\";import c from\"../../layers/LayerView.js\";import{ContextType as u}from\"../../webgl/context-util.js\";var y;!function(e){e[e.API=1]=\"API\",e[e.VerboseAPI=2]=\"VerboseAPI\",e[e.Error=3]=\"Error\"}(y||(y={}));let p=class extends(m(c)){constructor(){super(...arguments),this._usedMemory=0,this._futureMemory=0,this.type=\"voxel-3d\",this._wasmLayerId=-1,this._handles=new t,this._dbgFlags=new Set}get baseUrl(){return this.layer.parsedUrl?.path??\"\"}get wasmLayerId(){return this._wasmLayerId}initialize(){if(this._dbgFlags.add(y.Error),\"local\"!==this.view.viewingMode)throw new s(\"voxel:unsupported-viewingMode\",\"Voxel layers support local viewingMode only.\",{});if(this.view._stage.renderView.renderingContext.type!==u.WEBGL2)throw new s(\"voxel:unsupported-context\",\"Voxel layers are supported in WebGL2 rendering contexts only.\",{});if(!!!this.view._stage.renderView.renderingContext.capabilities.colorBufferFloat?.textureFloat)throw new s(\"voxel:missing-color-buffer-float\",\"Voxel layers require the WebGL2 extension EXT_color_buffer_float\",{});const e=this.layer.spatialReference;if(!d(e,this.view.spatialReference))throw new s(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this scene layer is incompatible with the spatial reference of the view\",{});const t=this.layer.currentVariableId,r=this.layer.getVolume(t),o=this.layer.getVariable(t);if(a(r)&&a(o)){const e=r.dimensions[0],s=r.dimensions[1],t=r.zDimension;if(t>1){const a=r.dimensions[t],i=e.size*s.size*a.size;let l=1;switch(o.renderingFormat.type){case\"Int16\":case\"UInt16\":l=2;break;case\"Int32\":case\"UInt32\":case\"Float32\":l=4}this._futureMemory=l*i}}const n=this.view.addVoxelLayerViewToWasm(this).then((e=>{this._wasmLayerId=e,this._suspendedHandle=i((()=>this.suspended),(e=>{const s=this.view.voxelWasm;a(s)&&s.setEnabled(this,!e)}),l),this._handles.add([i((()=>this.layer.renderMode),(e=>this._pushRenderModeToWasm(e))),i((()=>this.layer.currentVariableId),(e=>this._pushCurrentVariableIdToWasm(e))),i((()=>this.layer.getSections()),(e=>this._pushSectionsToWasm(e))),i((()=>this.layer.getVariableStyles()),(e=>this._pushVariableStylesToWasm(e))),i((()=>this.layer.getVolumeStyles()),(e=>this._pushVolumeStylesToWasm(e))),i((()=>this.layer.enableDynamicSections),(e=>this._pushEnableDynamicSectionsToWasm(e))),i((()=>this.layer.enableIsosurfaces),(e=>this._pushEnableIsosurfacesToWasm(e))),i((()=>this.layer.enableSections),(e=>this._pushEnableSectionsToWasm(e))),i((()=>this.layer.enableSlices),(e=>this._pushEnableSlicesToWasm(e)))])})).catch((e=>{if(this.view.removeVoxelLayerViewFromWasm(this),this._wasmLayerId=-1,-1===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer description was invalid.\",{});if(-2===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer web assembly module failed to download.\",{})}));this.addResolvingPromise(n)}destroy(){this.view.removeVoxelLayerViewFromWasm(this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null),this._handles=o(this._handles)}isUpdating(){const e=this.view.voxelWasm;return!(this._wasmLayerId<0||!a(e))&&e.isUpdating(this._wasmLayerId)}updatingFlagChanged(){this.notifyChange(\"updating\")}getUsedMemory(){return this._usedMemory}getUnloadedMemory(){return this._futureMemory}ignoresMemoryFactor(){return!0}get performanceInfo(){return{nodes:0,displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null}}setUsedMemory(e){this._usedMemory=e,this._futureMemory=0}captureFrustum(){const e=this.view.voxelWasm;a(e)&&e.captureFrustum()}toggleFullVolumeExtentDraw(){const e=this.view.voxelWasm;a(e)&&e.toggleFullVolumeExtentDraw(this)}getLayerTimes(){let e=[];const s=this.view.voxelWasm;return a(s)&&(e=s.getLayerTimes(this)),e}getCurrentLayerTimeIndex(){let e=0;const s=this.view.voxelWasm;return a(s)&&(e=s.getCurrentLayerTimeIndex(this)),e}_pushRenderModeToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushRenderModeToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));!!a(s)&&s.setRenderMode(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushRenderModeToWasm() failed!\")}_pushSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushSectionsToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));!!a(s)&&s.setStaticSections(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushSectionsToWasm() failed!\")}_pushCurrentVariableIdToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() called!, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));!!a(s)&&s.setCurrentVariable(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() failed!\")}_pushVariableStylesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushVariableStylesToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;a(s)&&(t=s.setVariableStyles(this,e),t||this._dbg(y.Error,\"VoxelLayerView3D._pushVariableStylesToWasm() failed!\"))}_accountForEnableSlices(e,s){const t=a(s)?s:this.layer.enableSlices;for(let r=0;r<e.length;++r){const s=e[r];for(const e of s.slices)e.enabled=e.enabled&&t}}_pushVolumeStylesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushVolumeStylesToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;a(s)&&(this._accountForEnableSlices(e,null),t=s.setVolumeStyles(this,e),t||this._dbg(y.Error,\"VoxelLayerView3D._pushVolumeStylesToWasm() failed!\"))}_pushEnableDynamicSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushEnableDynamicSectionsToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;a(s)&&(t=s.setEnableDynamicSections(this,e),t||this._dbg(y.Error,\"VoxelLayerView3D._pushEnableDynamicSectionsToWasm() failed!\"))}_pushEnableSlicesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushEnableSlicesToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;if(a(s)){const r=this.layer.getVolumeStyles();this._accountForEnableSlices(r,e),t=s.setVolumeStyles(this,r),t||this._dbg(y.Error,\"VoxelLayerView3D._pushEnableSlicesToWasm() failed!\")}}_pushEnableIsosurfacesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushEnableIsosurfacesToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;a(s)&&(t=s.setEnableIsosurfaces(this,e),t||this._dbg(y.Error,\"VoxelLayerView3D._pushEnableIsosurfacesToWasm() failed!\"))}_pushEnableSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushEnableSectionsToWasm() called, \"+(a(s)?\"have WASM\":\"don't have WASM!!!\"));let t=!1;a(s)&&(t=s.setEnableSections(this,e),t||this._dbg(y.Error,\"VoxelLayerView3D._pushEnableSectionsToWasm() failed!\"))}_dbg(e,s){this._dbgFlags.has(e)&&(e===y.Error?r.getLogger(this.declaredClass).error(s):r.getLogger(this.declaredClass).warn(s))}};e([n()],p.prototype,\"layer\",void 0),e([n()],p.prototype,\"baseUrl\",null),p=e([h(\"esri.views.3d.layers.VoxelLayerView3D\")],p);const b=p;export{b as default};\n"],"sourceRoot":""}