{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":["d","s","i","l","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","fullOpacity","n","get","suspended","canResume","suspendInfo","getSuspendInfo","legendEnabled","updating","updatingHandles","isUpdating","updatingProgress","visible","_overrideIfSome","loaded","view","ready","viewNotReady","layerNotLoaded","layerInvisible","a","prototype","readOnly","type","Boolean","p","u","h","layerViews","_allLayerViewVisibility","forEach","handles","add","on","_layerViewsChangeHandler","visibilityMode","_applyVisibility","_applyExclusiveVisibility","target","added","toArray","removed","moved","_set","_get","length","reduce","some","_hasLayerViewVisibleOverrides","_isOverridden","_findLayerViewForLayer","find","_firstVisibleOnLayerOrder","layers","getItemAt","remove","map","y","cast"],"mappings":"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","file":"static/js/123.264b7f38.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as r}from\"../../core/collectionUtils.js\";import{isNone as t}from\"../../core/maybe.js\";import{watch as l,sync as a}from\"../../core/reactiveUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"./LayerView.js\";let p=class extends h{constructor(i){super(i),this.type=\"group\",this.layerViews=new e}_allLayerViewVisibility(i){this.layerViews.forEach((e=>{e.visible=i}))}initialize(){this.handles.add([this.layerViews.on(\"change\",(i=>this._layerViewsChangeHandler(i))),l((()=>this.layer.visibilityMode),(()=>this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))),a),l((()=>this.visible),(i=>{this._applyVisibility((()=>this._allLayerViewVisibility(i)),(()=>{}))}),a)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(i){this._set(\"layerViews\",s(i,this._get(\"layerViews\")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((i,e)=>i+e.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.layerViews.some((i=>i.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((i=>i._isOverridden(\"visible\")))}_findLayerViewForLayer(i){return i&&this.layerViews.find((e=>e.layer===i))}_firstVisibleOnLayerOrder(){const i=this.layer.layers.find((i=>this._findLayerViewForLayer(i)?.visible));return i&&this._findLayerViewForLayer(i)}_applyExclusiveVisibility(i){t(i)&&(i=this._firstVisibleOnLayerOrder(),t(i)&&this.layerViews.length>0&&(i=this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))),this.layerViews.forEach((e=>{e.visible=e===i}))}_layerViewsChangeHandler(i){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((i=>l((()=>i.visible),(e=>this._applyVisibility((()=>{e!==this.visible&&(i.visible=this.visible)}),(()=>this._applyExclusiveVisibility(e?i:null)))),a))).toArray(),\"grouplayerview:visible\");const e=i.added[i.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(e?.visible?e:null)))}_applyVisibility(i,e){this._hasLayerViewVisibleOverrides()&&(\"inherited\"===this.layer?.visibilityMode?i():\"exclusive\"===this.layer?.visibilityMode&&e())}};i([y({cast:r})],p.prototype,\"layerViews\",null),i([y({readOnly:!0})],p.prototype,\"updatingProgress\",null),i([y()],p.prototype,\"view\",void 0),p=i([o(\"esri.views.layers.GroupLayerView\")],p);const n=p;export{n as default};\n"],"sourceRoot":""}