(this["webpackJsonppopulation-arcgis"]=this["webpackJsonppopulation-arcgis"]||[]).push([[74],{1104:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i(0),n=i(28),a=i(108),r=i(243),o=i(509),l=i(22),c=i(2),u=i(446),h=i(1),d=(i(17),i(12),i(10));let p=class extends(Object(r.b)(Object(o.b)(Object(u.b)(a.a.EventedMixin(n.a))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";l.a.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}}))}get fullOpacity(){return Object(c.u)(this.get("layer.opacity"),1)*Object(c.u)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null==(e=this.layer)?void 0:e.legendEnabled)}get updating(){var e;return!((null==(e=this.updatingHandles)||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}canResume(){var e,t,i;return this.visible&&(null==(e=this.layer)?void 0:e.loaded)&&!(null!=(t=this.parent)&&t.suspended)&&(null==(i=this.view)?void 0:i.ready)||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(s.a)([Object(h.b)()],p.prototype,"fullOpacity",null),Object(s.a)([Object(h.b)()],p.prototype,"layer",void 0),Object(s.a)([Object(h.b)()],p.prototype,"parent",void 0),Object(s.a)([Object(h.b)({readOnly:!0})],p.prototype,"suspended",null),Object(s.a)([Object(h.b)({readOnly:!0})],p.prototype,"suspendInfo",null),Object(s.a)([Object(h.b)({readOnly:!0})],p.prototype,"legendEnabled",null),Object(s.a)([Object(h.b)({type:Boolean,readOnly:!0})],p.prototype,"updating",null),Object(s.a)([Object(h.b)({readOnly:!0})],p.prototype,"updatingProgress",null),Object(s.a)([Object(h.b)()],p.prototype,"visible",null),Object(s.a)([Object(h.b)()],p.prototype,"view",void 0),p=Object(s.a)([Object(d.a)("esri.views.layers.LayerView")],p);const b=p},1106:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i(0),n=i(226),a=i(23),r=i(13),o=i(1),l=(i(17),i(12),i(10)),c=i(868);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),Object(c.c)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.handles.add(Object(n.c)((()=>e.abort()))),await Object(r.h)((()=>{var e;return null==(e=this.view.defaultsFromMap)?void 0:e.heightModelInfoReady}),t),Object(a.q)(t);const i=Object(c.b)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return Object(s.a)([Object(o.b)()],t.prototype,"view",void 0),Object(s.a)([Object(o.b)()],t.prototype,"slicePlaneEnabled",void 0),t=Object(s.a)([Object(l.a)("esri.views.3d.layers.LayerView3D")],t),t}},1202:function(e,t,i){"use strict";i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return g}));var s=i(2),n=i(33),a=i(20),r=i(147),o=i(233),l=i(232),c=i(172),u=i(275),h=i(135),d=i(94),p=i(49),b=i(8),m=i(74),_=i(56),O=i(70),y=i(11);function g(e){const t=new m.a,{vertex:i,fragment:g}=t;return Object(h.b)(i,e),t.include(o.a,e),t.attributes.add(y.a.POSITION,"vec3"),t.attributes.add(y.a.UV0,"vec2"),t.varyings.add("vpos","vec3"),e.hasMultipassTerrain&&t.varyings.add("depth","float"),i.uniforms.add(new d.a("textureCoordinateScaleFactor",(e=>Object(s.l)(e.texture)&&Object(s.l)(e.texture.descriptor.textureCoordinateScaleFactor)?e.texture.descriptor.textureCoordinateScaleFactor:n.a))),i.code.add(b.b`
    void main(void) {
      vpos = position;
      ${e.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0 * textureCoordinateScaleFactor;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `),t.include(r.a,e),t.include(l.b,e),g.uniforms.add([new _.a("tex",(e=>e.texture)),new p.a("opacity",(e=>e.opacity))]),t.varyings.add("vTexCoord","vec2"),e.output===a.a.Alpha?g.code.add(b.b`
    void main() {
      discardBySlice(vpos);
      ${e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture2D(tex, vTexCoord).a * opacity;
      if (alpha  < ${b.b.float(c.a)}) {
        discard;
      }

      gl_FragColor = vec4(alpha);
    }
    `):(g.include(u.a),g.code.add(b.b`
    void main() {
      discardBySlice(vpos);
      ${e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      gl_FragColor = texture2D(tex, vTexCoord) * opacity;

      if (gl_FragColor.a < ${b.b.float(c.a)}) {
        discard;
      }

      gl_FragColor = highlightSlice(gl_FragColor, vpos);
      ${e.transparencyPassType===O.a.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
    `)),t}const f=Object.freeze(Object.defineProperty({__proto__:null,build:g},Symbol.toStringTag,{value:"Module"}))},1239:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var s=i(20),n=i(34),a=i(480),r=i(102),o=i(101),l=i(52),c=i(378),u=i(173),h=i(0),d=i(8),p=i(75),b=i(80),m=i(21),_=i(77),O=i(76),y=i(129),g=i(70),f=i(227),x=i(1202),v=i(7),j=i(36);class T extends d.a{}class w extends b.a{initializeProgram(e){return new O.a(e.rctx,w.shader.get().build(this.configuration),_.a)}_setPipelineState(e,t){const i=this.configuration,n=e===g.a.NONE,a=e===g.a.FrontFace;return Object(j.g)({blending:i.output!==s.a.Color&&i.output!==s.a.Alpha||!i.transparent?null:n?E:Object(o.f)(e),culling:Object(j.c)(i.cullFace),depthTest:{func:Object(o.g)(e)},depthWrite:n?i.writeDepth&&j.e:Object(o.h)(e),colorWrite:j.d,stencilWrite:i.hasOccludees?y.j:null,stencilTest:i.hasOccludees?t?y.f:y.e:null,polygonOffset:n||a?null:Object(o.e)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}w.shader=new p.a(x.a,(()=>i.e(237).then(i.bind(null,1621))));const E=Object(j.i)(v.b.ONE,v.b.ONE_MINUS_SRC_ALPHA);class S extends f.a{constructor(){super(...arguments),this.output=s.a.Color,this.cullFace=n.b.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=g.a.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}Object(h.a)([Object(m.b)({count:s.a.COUNT})],S.prototype,"output",void 0),Object(h.a)([Object(m.b)({count:n.b.COUNT})],S.prototype,"cullFace",void 0),Object(h.a)([Object(m.b)()],S.prototype,"hasSlicePlane",void 0),Object(h.a)([Object(m.b)()],S.prototype,"transparent",void 0),Object(h.a)([Object(m.b)()],S.prototype,"enableOffset",void 0),Object(h.a)([Object(m.b)()],S.prototype,"writeDepth",void 0),Object(h.a)([Object(m.b)()],S.prototype,"hasOccludees",void 0),Object(h.a)([Object(m.b)({count:g.a.COUNT})],S.prototype,"transparencyPassType",void 0),Object(h.a)([Object(m.b)()],S.prototype,"hasMultipassTerrain",void 0),Object(h.a)([Object(m.b)()],S.prototype,"cullAboveGround",void 0);class P extends r.a{constructor(e){super(e,new I),this.supportsEdges=!0,this._configuration=new S}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<o.b,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}intersect(e,t,i,s,n,a,r){Object(u.h)(e,t,s,n,a,void 0,r)}requiresSlot(e,t){return(t===s.a.Color||t===s.a.Alpha||t===s.a.Highlight)&&(e===l.a.DRAPED_MATERIAL||(t===s.a.Highlight?e===l.a.OPAQUE_MATERIAL:e===(this.parameters.transparent?this.parameters.writeDepth?l.a.TRANSPARENT_MATERIAL:l.a.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:l.a.OPAQUE_MATERIAL)))}createGLMaterial(e){return new C(e)}createBufferWriter(){return new c.a(c.e)}}class C extends a.a{constructor(e){super({...e,...e.material.parameters})}_updateParameters(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(w,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}beginSlot(e){return this._output!==s.a.Color&&this._output!==s.a.Alpha||this._updateOccludeeState(e),this._updateParameters(e)}}class I extends r.b{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=n.b.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0}}},1364:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return u}));var s=i(2),n=i(37),a=i(726),r=i(296),o=i(122),l=i(303),c=i(47);function u(e){return d(e,!0)}function h(e){return d(e,!1)}function d(e,t){if(Object(s.k)(e))return null;const i=e.spatialReference,n=Object(c.e)(i),r="toJSON"in e?e.toJSON():e;if(!n)return r;const u=Object(c.p)(i)?102100:4326,h=l.a[u].maxX,d=l.a[u].minX;if(Object(o.f)(r))return b(r,h,d);if(Object(o.e)(r))return r.points=r.points.map((e=>b(e,h,d))),r;if(Object(o.d)(r))return p(r,n);if(Object(o.g)(r)||Object(o.h)(r)){const e=Object(a.a)(f,r),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},s=Object(l.c)(i.xmin,d)*(2*h),n=0===s?r:Object(l.d)(r,s);return i.xmin+=s,i.xmax+=s,i.xmax>h?y(n,h,t):i.xmin<d?y(n,d,t):n}return r}function p(e,t){if(!t)return e;const i=function(e,t){const i=[],{ymin:s,ymax:n,xmin:a,xmax:r}=e,o=e.xmax-e.xmin,[l,c]=t.valid,{x:u,frameId:h}=m(e.xmin,t),{x:d,frameId:p}=m(e.xmax,t),b=u===d&&o>0;if(o>2*c){const e={xmin:a<r?u:d,ymin:s,xmax:c,ymax:n},t={xmin:l,ymin:s,xmax:a<r?d:u,ymax:n},o={xmin:0,ymin:s,xmax:c,ymax:n},b={xmin:l,ymin:s,xmax:0,ymax:n},m=[],O=[];_(e,o)&&m.push(h),_(e,b)&&O.push(h),_(t,o)&&m.push(p),_(t,b)&&O.push(p);for(let i=h+1;i<p;i++)m.push(i),O.push(i);i.push(new g(e,[h]),new g(t,[p]),new g(o,m),new g(b,O))}else u>d||b?i.push(new g({xmin:u,ymin:s,xmax:c,ymax:n},[h]),new g({xmin:l,ymin:s,xmax:d,ymax:n},[p])):i.push(new g({xmin:u,ymin:s,xmax:d,ymax:n},[h]));return i}(e,t).map((e=>e.extent));return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}}function b(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const i=Object(l.c)(s,t);e[0]=s+i*(-2*t)}else if(s<i){const t=Object(l.c)(s,i);e[0]=s+t*(-2*i)}}else{const s=e.x;if(s>t){const i=Object(l.c)(s,t);e.x+=i*(-2*t)}else if(s<i){const t=Object(l.c)(s,i);e.x+=t*(-2*i)}}return e}function m(e,t){const[i,s]=t.valid,n=2*s;let a,r=0;return e>s?(a=Math.ceil(Math.abs(e-s)/n),e-=a*n,r=a):e<i&&(a=Math.ceil(Math.abs(e-i)/n),e+=a*n,r=-a),{x:e,frameId:r}}function _(e,t){const{xmin:i,ymin:s,xmax:n,ymax:a}=t;return O(e,i,s)&&O(e,i,a)&&O(e,n,a)&&O(e,n,s)}function O(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function y(e,t,i=!0){const s=!Object(o.h)(e);if(s&&Object(r.a)(e),i)return(new x).cut(e,t);const n=s?e.rings:e.paths,a=s?4:2,l=n.length,c=-2*t;for(let r=0;r<l;r++){const e=n[r];if(e&&e.length>=a){const t=[];for(const i of e)t.push([i[0]+c,i[1]]);n.push(t)}}return s?e.rings=n:e.paths=n,e}class g{constructor(e,t){this.extent=e,this.frameIds=t}}const f=Object(n.m)();class x{constructor(){this._linesIn=[],this._linesOut=[]}cut(e,t){let i;if(this._xCut=t,e.rings)this._closed=!0,i=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,i=e.paths,this._minPts=2}for(const n of i){if(!n||n.length<this._minPts)continue;let e=!0;for(const t of n)e?(this.moveTo(t),e=!1):this.lineTo(t);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(const n of this._linesIn)n&&n.length>=this._minPts&&i.push(n);const s=-2*this._xCut;for(const n of this._linesOut)if(n&&n.length>=this._minPts){for(const e of n)e[0]+=s;i.push(n)}return this._closed?e.rings=i:e.paths=i,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){const t=this._side(e[0]);if(t*this._prevSide==-1){const i=this._intersect(this._prevPt,e);this._lineTo(this._xCut,i,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){const e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(e,t,i){this._closed?(this._lineIn.push([i<=0?e:this._xCut,t]),this._lineOut.push([i>=0?e:this._xCut,t])):(i<=0&&this._lineIn.push([e,t]),i>=0&&this._lineOut.push([e,t]))}_lineTo(e,t,i){this._closed?(this._addPolyVertex(this._lineIn,i<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,i>=0?e:this._xCut,t)):i<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):i>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}_addPolyVertex(e,t,i){const s=e.length;s>1&&e[s-1][0]===t&&e[s-2][0]===t?e[s-1][1]=i:e.push([t,i])}_checkClosingPt(e){const t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this._xCut?-1:e>this._xCut?1:0}_intersect(e,t){const i=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+i*(t[1]-e[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},1657:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return C}));var s=i(0),n=i(226),a=i(2),r=i(23),o=i(13),l=i(1),c=(i(17),i(12),i(10)),u=i(37),h=i(28),d=i(180),p=i(40),b=i(1364);let m=class extends h.a{constructor(e){super(e)}get bounds(){const e=this.coords;return Object(a.k)(e)||Object(a.k)(e.extent)?null:Object(u.t)(e.extent)}get coords(){var e;const t=null==(e=Object(a.t)(this.element.georeference))?void 0:e.coords;return Object(p.s)(t,this.spatialReference).geometry}get normalizedCoords(){return d.a.fromJSON(Object(b.b)(this.coords))}get normalizedBounds(){const e=Object(a.l)(this.normalizedCoords)?this.normalizedCoords.extent:null;return Object(a.l)(e)?Object(u.t)(e):null}};Object(s.a)([Object(l.b)()],m.prototype,"spatialReference",void 0),Object(s.a)([Object(l.b)()],m.prototype,"element",void 0),Object(s.a)([Object(l.b)()],m.prototype,"bounds",null),Object(s.a)([Object(l.b)()],m.prototype,"coords",null),Object(s.a)([Object(l.b)()],m.prototype,"normalizedCoords",null),Object(s.a)([Object(l.b)()],m.prototype,"normalizedBounds",null),m=Object(s.a)([Object(c.a)("esri.layers.support.media.MediaElementView")],m);var _=i(678),O=i(1106),y=i(429),g=i(34),f=i(169),x=i(130),v=i(427),j=i(355),T=i(11),w=i(1239),E=i(1104),S=i(7);let P=class extends(Object(O.a)(E.a)){constructor(){super(...arguments),this.type="media-3d",this.drapeSourceType=_.a.RasterImage,this.updatePolicy=g.k.ASYNC,this._uidToElement=new Map,this._renderedElements=new Map,this._lastDrapingExtent=null,this._update=Object(r.f)((async(e,t,i)=>{const s=await this._collectMediaElements(e,t,i);this._synchronizeRenderElements(s)}),0)}initialize(){this._renderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.handles.add([Object(n.c)((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this))),Object(o.b)((()=>this.layer.source),"refresh",(()=>this._updateWithLastDrapingExtent()))]),this.updatingHandles.add((()=>this.suspended),(()=>this._updateWithLastDrapingExtent()))}setDrapingExtent(e,t){this._lastDrapingExtent={overlays:e,spatialReference:t},this._updateWithLastDrapingExtent()}getHit(e){const t=this._uidToElement.get(e);return t?{type:"media",element:t,layer:this.layer}:null}_updateWithLastDrapingExtent(){if(Object(a.k)(this._lastDrapingExtent)||this.suspended)return void(this._renderer&&this._synchronizeRenderElements(new Set));const{overlays:e,spatialReference:t}=this._lastDrapingExtent;this.updatingHandles.addPromise(this._update(e,t).catch((()=>{})))}async _collectMediaElements(e,t,i){const s=this.layer.source;return Object(a.k)(s)?new Set:new Set((await Promise.all(e.map((e=>s.queryElements(Object(u.C)(e.extent,t),{signal:i}))))).flat())}_synchronizeRenderElements(e){this._synchronizeRenderElementsRemove(e),this._synchronizeRenderElementsAdd(e)}_synchronizeRenderElementsRemove(e){const t=new Set,i=[];this._renderedElements.forEach(((s,n)=>{e.has(n)||(t.add(n),Object(a.l)(s.renderData)&&i.push(s.renderData.renderGeometry),this._removeElement(n,s))})),this._renderer.removeGeometries(i,x.a.REMOVE)}_synchronizeRenderElementsAdd(e){for(const t of e)this._renderedElements.has(t)||this._createRenderElement(t)}_removeElement(e,{renderData:t,handle:i}){this._destroyRenderData(t),this._renderedElements.delete(e),this._uidToElement.delete(e.uid),i.remove()}async _createRenderElement(e){const t=new m({spatialReference:this.view.spatialReference,element:e}),i={renderData:null,handle:Object(n.b)([this.updatingHandles.add((()=>e.opacity),(e=>{Object(a.l)(i.renderData)&&i.renderData.material.setParameters({opacity:e})})),this.updatingHandles.add((()=>t.coords),(e=>{Object(a.l)(i.renderData)?this._updateGeometry(i,i.renderData,e):this._initializeRenderData(t,i)})),this.updatingHandles.add((()=>e.content),(()=>this._initializeRenderData(t,i))),Object(n.a)(t)])};this._renderedElements.set(e,i),this._uidToElement.set(e.uid,e),this.updatingHandles.addPromise(e.load().catch((()=>{}))),this._initializeRenderData(t,i)}_initializeRenderData(e,t){const{coords:i,element:s}=e;if(Object(a.k)(i)||Object(a.k)(s.content))return void(t.renderData=this._destroyRenderData(t.renderData));if(Object(a.l)(t.renderData))return;const n=this._createTexture(s.content);this.view._stage.add(n);const o=this.view._stage.loadImmediate(n);Object(r.l)(o)&&this.updatingHandles.addPromise(o);const l=new w.a({initTextureTransparent:!0,textureId:n.id,opacity:s.opacity,transparent:!0}),c=this._positionVertexBufferFromCoordinates(i),u=[0,1,2,0,2,3],h=new f.a([[T.a.POSITION,{data:c,size:3,exclusive:!0}],[T.a.UV0,{data:[0,0,1,0,1,1,0,1],size:2,exclusive:!0}]],[[T.a.POSITION,u],[T.a.UV0,u]]),d=new v.a(h,l,{layerUid:this.layer.uid,graphicUid:s.uid});this._renderer.addGeometries([d],x.a.ADD),t.renderData={renderGeometry:d,texture:n,material:l}}_updateGeometry(e,t,i){if(Object(a.k)(i))return void(e.renderData=this._destroyRenderData(e.renderData));const s=this._positionVertexBufferFromCoordinates(i);t.renderGeometry.vertexAttributes.get(T.a.POSITION).data=s,this._renderer.modifyGeometries([t.renderGeometry],x.b.VERTEXATTRS)}_positionVertexBufferFromCoordinates(e){const[t,i,s,n]=e.rings[0];return new Float64Array([t[0],t[1],y.a,n[0],n[1],y.a,s[0],s[1],y.a,i[0],i[1],y.a])}_destroyRenderData(e){return Object(a.k)(e)||(this.view._stage.remove(e.texture),this._renderer.removeGeometries([e.renderGeometry],x.a.REMOVE),e.material.dispose()),null}_createTexture(e){const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,i=e instanceof HTMLImageElement?e.naturalHeight:e.height;return new j.a(e,{wrap:{s:S.B.CLAMP_TO_EDGE,t:S.B.CLAMP_TO_EDGE},preMultiplyAlpha:!0,width:t,height:i,mipmap:!0,powerOfTwoResizeMode:g.f.STRETCH,updateCallback:()=>this.view.basemapTerrain.overlayManager.setDrawTexturesDirty()})}get test(){const e=this;return{get numberOfElements(){return e._renderedElements.size}}}};Object(s.a)([Object(l.b)({readOnly:!0})],P.prototype,"type",void 0),Object(s.a)([Object(l.b)()],P.prototype,"layer",void 0),P=Object(s.a)([Object(c.a)("esri.views.3d.layers.MediaLayerView3D")],P);const C=P}}]);
//# sourceMappingURL=74.bfcac7bf.chunk.js.map