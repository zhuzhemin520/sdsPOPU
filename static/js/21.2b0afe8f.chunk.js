(this["webpackJsonppopulation-arcgis"]=this["webpackJsonppopulation-arcgis"]||[]).push([[21],{1126:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(78),s=i(510);class a extends s.a{constructor(t,e,i){super(e,i),this.point=t}equals(t){return t instanceof a&&Object(n.f)(this.point,t.point)}}},1135:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}},1148:function(t,e,i){"use strict";i.d(e,"a",(function(){return P})),i.d(e,"b",(function(){return C})),i.d(e,"c",(function(){return D})),i.d(e,"d",(function(){return w})),i.d(e,"e",(function(){return x})),i.d(e,"f",(function(){return S})),i.d(e,"g",(function(){return g})),i.d(e,"h",(function(){return v})),i.d(e,"i",(function(){return M}));var n,s,a=i(2),r=i(31),o=i(5),c=i(9),l=i(40),d=i(45),h=i(110),u=i(267),p=i(55),b=i(127),O=i(325),f=i(200),m=i(114),_=i(222),j=i(1110);function g(t,e){return y(t,(()=>e))}function v(t){return y(t,(t=>t.plane))}function y(t,e){const i=Object(c.f)(),n=Object(c.f)();let s=!1;return o=>{const c=e(o);if("start"===o.action){const e=Object(r.j)(o.screenStart,Object(r.c)(p.c.get())),n=Object(O.c)(t.state.camera,e,T);Object(a.l)(n)&&(s=Object(d.n)(c,n,i))}if(!s)return null;const l=Object(r.j)(o.screenEnd,Object(r.c)(p.c.get())),h=Object(O.c)(t.state.camera,l,T);return Object(a.k)(h)?null:Object(d.n)(c,h,n)?{...o,renderStart:i,renderEnd:n,plane:c,ray:h}:null}}function w(t,e,i,n=null,s=null){return function(t,e,i,n=null,s=null){let o=null;return c=>{if("start"===c.action&&(o=t.sceneIntersectionHelper.intersectElevationFromScreen(Object(r.g)(c.screenStart.x,c.screenStart.y),e,i,s),Object(a.l)(o)&&Object(a.l)(n)&&!Object(l.u)(o,o,n)))return null;if(Object(a.k)(o))return null;const d=t.sceneIntersectionHelper.intersectElevationFromScreen(Object(r.g)(c.screenEnd.x,c.screenEnd.y),e,i,s);return Object(a.l)(d)?Object(a.l)(n)&&!Object(l.u)(d,d,n)?null:{...c,mapStart:o,mapEnd:d}:null}}(t,i,Object(b.l)(e,t,i),n,s)}function S(t,e,i,n=null,s=null){return w(t,i,Object(b.j)(e),n,s)}function x(t,e,i,n){const s=e.toMap(t.screenStart,{include:[i]});return Object(a.l)(s)?S(e,i,s,n):null}function M(t,e,i){let n=null;const s=new j.a;return s.next(g(t,function(t,e){const i=A,n=R,s=Object(d.d)();t.renderCoordsHelper.worldUpAtPosition(e,i);const a=Object(o.o)(s,i,Object(o.k)(n,e,t.state.camera.eye));return Object(o.o)(a,a,i),Object(d.h)(e,a,s)}(t,e))).next(function(t,e){const i=Object(c.f)(),n=Object(o.u)(e);t.renderCoordsHelper.worldUpAtPosition(e,i);const s=Object(c.f)(),a=Object(c.f)(),r=s=>(Object(o.k)(s,s,e),Object(u.c)(i,s,s),"global"===t.viewingMode&&Object(o.u)(s)*Math.sign(Object(o.n)(i,s))<.001-n&&Object(o.k)(s,Object(o.p)(s,i,.001),e),Object(o.j)(s,s,e),s);return t=>(t.renderStart=r(Object(o.l)(s,t.renderStart)),t.renderEnd=r(Object(o.l)(a,t.renderEnd)),t)}(t,e)).next(P(t,i)).next((t=>{t.mapEnd.x=t.mapStart.x,t.mapEnd.y=t.mapStart.y,n=t})),t=>(n=null,s.execute(t),n)}function P(t,e){const i=t.renderCoordsHelper;return t=>{const n=i.fromRenderCoords(t.renderStart,e),s=i.fromRenderCoords(t.renderEnd,e);return Object(a.l)(n)&&Object(a.l)(s)?{...t,mapStart:n,mapEnd:s}:null}}function C(t){let e=null;return i=>{switch(i.action){case"start":e=t.disableDisplay();break;case"end":case"cancel":Object(a.l)(e)&&(e.remove(),e=null)}return i}}function D(t,e=null){const i=Object(f.b)(t.state.viewingMode);i.options.selectionMode=!0,i.options.store=m.c.MIN,i.options.hud=!1;const s=Object(r.g)(),o={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},l=Object(c.f)(),d=Object(a.u)(e,t.spatialReference),h=e=>{t.map.ground&&t.map.ground.opacity<1?o.exclude.add(_.b):o.exclude.delete(_.b),t.sceneIntersectionHelper.intersectIntersectorScreen(Object(r.j)(e,s),i,o);const a=i.results.min;let c;if(a.getIntersectionPoint(l))c=a.intersector===m.b.TERRAIN?n.GROUND:n.OTHER;else{if(!i.results.ground.getIntersectionPoint(l))return null;c=n.GROUND}return{location:t.renderCoordsHelper.fromRenderCoords(l,d),surfaceType:c}};let u;return t=>{if("start"===t.action){const e=h(t.screenStart);u=Object(a.l)(e)?e.location:null}if(Object(a.k)(u))return null;const e=h(t.screenEnd);return Object(a.l)(e)&&Object(a.l)(e.location)?{...t,mapStart:u,mapEnd:e.location,surfaceType:e.surfaceType}:null}}(s=n||(n={}))[s.GROUND=0]="GROUND",s[s.OTHER=1]="OTHER";const A=Object(c.f)(),R=Object(c.f)(),T=Object(h.c)()},1157:function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return M}));var n=i(46),s=i(563),a=i(41),r=i(1183),o=i(102),c=i(734);const l={main:new n.a([255,127,0]),selected:new n.a([255,255,255]),staged:new n.a([12,207,255]),outline:new n.a([0,0,0,.5]),selectedOutline:new n.a([255,255,255])},d=.3;function h(t,e){const i=t.clone();return i.a*=e,i}function u(t,e){const i=t.clone(),n=Object(s.b)(i);n.s*=e;const a=Object(s.e)(n);return i.r=a.r,i.g=a.g,i.b=a.b,i}function p(t,e){if(e)for(const i in e)t[i]=e[i]}class b{constructor(t){this.color=l.main,this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=o.c.Opaque,p(this,t)}}class O{constructor(t){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=l.main,this.outlineColor=l.outline,this.renderOccluded=o.c.Opaque,this.hoverOutlineColor=l.selectedOutline,p(this,t)}apply(t,e){const i=this[t];e.setParameters({color:x(i),transparent:"color"!==t||i.a<1,renderOccluded:this.renderOccluded})}}class f{constructor(t){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.color=h(l.main,.5),this.hoverColor=l.main,this.renderOccluded=o.c.Transparent,this.minSquaredEdgeLength=900,p(this,t)}apply(t,e){const i=this[t];e.setParameters({color:x(i),transparent:i.a<1,renderOccluded:this.renderOccluded})}}class m{constructor(t){this.vertex=new O({color:l.main,outlineColor:l.outline}),this.edge=new O({color:u(h(l.main,2/3),.5),outlineColor:h(l.outline,.5),size:8,collisionPadding:8}),this.selected=new O({color:l.selected,outlineColor:l.outline}),this.edgeOffset=new f,p(this,t)}}class _{constructor(t){this.color=l.selected,this.width=1.5,this.stipplePattern=Object(c.a)(5),this.stippleOffColor=l.outline,this.falloff=0,this.innerWidth=1.5,this.innerColor=l.selected,this.renderOccluded=o.c.OccludeAndTransparent,p(this,t)}apply(t){t.color=x(this.color),t.width=this.width,t.stipplePattern=this.stipplePattern,t.stippleOffColor=x(this.stippleOffColor),t.falloff=this.falloff,t.innerWidth=this.innerWidth,t.innerColor=x(this.innerColor),t.renderOccluded=this.renderOccluded}}class j{constructor(t){this.color=l.selected,this.size=4,this.outlineSize=1,this.outlineColor=l.outline,this.shape="square",p(this,t)}apply(t){t.color=x(this.color),t.size=this.size,t.outlineSize=this.outlineSize,t.outlineColor=x(this.outlineColor),t.primitive=this.shape}}class g{constructor(t){this.innerColor=l.selected,this.innerWidth=1,this.glowColor=l.main,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=d,this.globalAlphaContrastBoost=1.5,this.radius=3,this.heightFillColor=l.main,p(this,t)}apply(t,e=1){const i={glowColor:n.a.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:n.a.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*e,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in t?t.style=i:t.laserlineStyle=i}}class v{constructor(t){this.outline=new _({color:l.outline,renderOccluded:o.c.OccludeAndTransparentStencil,stippleOffColor:l.selected,stipplePattern:Object(c.a)(5),width:1.5,innerWidth:0}),this.staged=new _({color:l.selected,renderOccluded:o.c.OccludeAndTransparentStencil,innerColor:l.staged,stippleOffColor:l.outline,stipplePattern:Object(c.a)(5),width:1.5}),this.shadowStyle=new g({globalAlpha:d,glowColor:l.main,glowFalloff:8,glowWidth:8,innerColor:l.selected,innerWidth:1}),p(this,t)}}class y{constructor(t){this.outline=new j({color:l.selected,outlineColor:l.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new g({globalAlpha:d,glowColor:l.main,glowFalloff:1.5,glowWidth:6,innerColor:l.selected,innerWidth:1,radius:2}),p(this,t)}}class w extends _{constructor(t){super(),this.extensionType=r.b.GROUND_RAY,p(this,t)}}class S{constructor(t){this.lineGraphics=new v,this.pointGraphics=new y,this.heightPlane=new g({globalAlpha:d,glowColor:l.main,glowFalloff:8,glowWidth:8,innerColor:l.selected,innerWidth:1}),this.heightBox=new g({globalAlpha:d,glowColor:l.main,glowFalloff:8,glowWidth:8,innerColor:l.selected,innerWidth:0,heightFillColor:l.main}),this.zVerticalLine=new w({color:h(l.main,.5),falloff:2,innerColor:h(l.selected,0),renderOccluded:o.c.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:r.b.GROUND_RAY}),this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,p(this,t)}}function x(t){return Object(a.d)(n.a.toUnitRGBA(t))}const M=new class{constructor(t){this.visualElements=new S,this.reshapeManipulators=new m,this.zManipulator=new b,p(this,t)}colorToVec4(t){return x(t)}}},1166:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),s=i(23);class a{constructor(t,e){this._textureRep=t,this._disposed=!1;const i=this._textureRep.acquire(e);Object(s.l)(i)?(i.then((t=>{this._disposed?Object(n.r)(t):this._textureRef=t})),this.loadPromise=i):this._textureRef=i}dispose(){this._textureRef=Object(n.r)(this._textureRef),this._disposed=!0}get glTexture(){return Object(n.l)(this._textureRef)?this._textureRef.glTexture:null}}},1179:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(0),s=i(226),a=i(2),r=i(446),o=i(1),c=(i(17),i(12),i(10));const l=t=>{let e=class extends(Object(r.b)(t)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(t){this._userInteractive=t}get updating(){return!1}get visible(){return!Object(a.l)(this.parent)||this.parent.visible&&!this.parent.suspended}set visible(t){this._overrideIfSome("visible",t)}forceInteractiveForViewModel(){return this._interactiveViewModelCount++,Object(s.c)((()=>this._interactiveViewModelCount--))}};return Object(n.a)([Object(o.b)({readOnly:!0})],e.prototype,"type",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],e.prototype,"analysis",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],e.prototype,"parent",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],e.prototype,"view",void 0),Object(n.a)([Object(o.b)({type:Boolean})],e.prototype,"interactive",null),Object(n.a)([Object(o.b)()],e.prototype,"_userInteractive",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],e.prototype,"updating",null),Object(n.a)([Object(o.b)()],e.prototype,"visible",null),Object(n.a)([Object(o.b)()],e.prototype,"_interactiveViewModelCount",void 0),e=Object(n.a)([Object(c.a)("esri.views.3d.analysis.AnalysisView3D")],e),e}},1182:function(t,e,i){"use strict";var n;i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return s})),function(t){t.Horizontal="horizontal",t.Vertical="vertical",t.Direct="direct"}(n||(n={}));const s=[n.Horizontal,n.Vertical,n.Direct]},1183:function(t,e,i){"use strict";i.d(e,"a",(function(){return g})),i.d(e,"b",(function(){return x}));i(32);var n=i(64),s=i(2),a=i(13),r=i(5),o=i(9),c=i(60),l=i(401),d=i(763),h=i(67),u=i(189),p=i(110),b=i(1236),O=i(1117),f=i(285),m=i(102),_=i(11),j=i(475);class g extends O.a{constructor(t){super(t),this._ray=Object(p.c)(),this._externalResources=null,this._handles=new n.a,this._isWorldDown=!1,this._start=Object(o.f)(),this._end=Object(o.h)(1,0,0),this._width=1,this._color=Object(l.c)(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=Object(l.c)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._falloff=0,this._extensionType=x.LINE,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=m.c.OccludeAndTransparent,this._fadedExtensions=C,this.applyProps(t)}createExternalResources(){const t=new j.a(this.materialParameters);this._handles.add(Object(a.f)((()=>this.view.state.camera),(()=>{this._updateGeometry()})));const e=new b.a({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:t,laserline:e}}destroyExternalResources(){Object(s.l)(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}forEachExternalMaterial(t){Object(s.l)(this._externalResources)&&t(this._externalResources.material)}createGeometries(t){const e=[Object(o.f)(),Object(o.f)()],i=this.extensionType===x.FADED;i&&e.push(Object(o.f)(),Object(o.f)());const n=i?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,a=Object(f.j)(e,null,n);t.addGeometry(a,Object(s.t)(this._externalResources).material),this._updateVertices(t)}updateVisibility(t){super.updateVisibility(t),Object(s.l)(this._externalResources)&&(this._externalResources.laserline.visible=t)}setStartEndFromWorldDownAtLocation(t){this._isWorldDown=!0,Object(r.l)(this._start,t),this.view.renderCoordsHelper.worldUpAtPosition(t,this._end),Object(r.k)(this._end,t,this._end),Object(p.f)(this._start,this._end,this._ray),this._updateGeometry()}get start(){return this._start}set start(t){this._isWorldDown=!1,Object(r.t)(this._start,t)||(Object(r.l)(this._start,t),Object(p.f)(this._start,this._end,this._ray),this._updateGeometry())}get end(){return this._end}set end(t){this._isWorldDown=!1,Object(r.t)(this._end,t)||(Object(r.l)(this._end,t),Object(p.f)(this._start,this._end,this._ray),this._updateGeometry())}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this._updateMaterial())}get color(){return this._color}set color(t){Object(c.g)(t,this._color)||(Object(c.c)(this._color,t),this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){t!==this._polygonOffset&&(this._polygonOffset=t,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(t){this._writeDepthEnabled!==t&&(this._writeDepthEnabled=t,this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(t){t!==this._innerWidth&&(this._innerWidth=t,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(t){Object(c.g)(t,this._innerColor)||(Object(c.c)(this._innerColor,t),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const e=Object(s.l)(t)!==Object(s.l)(this._stipplePattern);this._stipplePattern=t,e?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(t){(Object(s.k)(t)||Object(s.k)(this._stippleOffColor)||!Object(c.g)(t,this._stippleOffColor))&&(this._stippleOffColor=Object(s.l)(t)?Object(l.a)(t):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(t){t!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=t,this._updateMaterial())}get falloff(){return this._falloff}set falloff(t){t!==this._falloff&&(this._falloff=t,this._updateMaterial())}get extensionType(){return this._extensionType}set extensionType(t){t!==this._extensionType&&(this._extensionType=t,this._updateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&Object(s.l)(this._laserlineStyle)}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(t){this._laserlineStyle=t,Object(s.l)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,Object(s.l)(t)&&(this._externalResources.laserline.style=t))}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(t){this._laserlineEnabled!==t&&(this._laserlineEnabled=t,Object(s.l)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._updateMaterial())}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(t){this._fadedExtensions=Object(s.u)(t,C),this.recreateGeometry()}_updateMaterial(){Object(s.k)(this._externalResources)||this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,hasPolygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateGeometry(){Object(s.l)(this.object)&&this._updateVertices(this.object)}_updateVertices(t){const e=this._extensionType===x.FADED?this._updateLineSegmentFinite(S):this._updateLineSegmentInfinite(this._extensionType,S);this._updateVertexAttributes(t,e),Object(s.l)(this._externalResources)&&(this._externalResources.laserline.intersectsLine=e)}_updateLineSegmentFinite(t){return Object(u.f)(this._start,this._end,t)}_updateLineSegmentInfinite(t,e){const i=this.view.state.camera;switch(Object(d.c)(this._ray,v),t){case x.LINE:v.c0=-Number.MAX_VALUE;break;case x.RAY:case x.GROUND_RAY:{const t=this._ray.origin,e=Object(s.u)(this.view.elevationProvider.getElevation(t[0],t[1],t[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),i=this.view.renderCoordsHelper.getAltitude(t);this._isWorldDown&&i<e&&Object(r.x)(v.ray.direction,v.ray.direction),this._extensionType===x.GROUND_RAY&&null!=e&&(v.c1=Math.abs(i-e));break}}if(!Object(h.i)(i.frustum,v))return Object(u.f)(this._start,this._end,e);const n=Object(d.e)(v,y),a=Object(d.d)(v,w);return Object(u.f)(n,a,e)}_updateVertexAttributes(t,e){const i=t.geometries[0].getMutableAttribute(_.a.POSITION).data;if(this.extensionType===x.FADED){const t=Object(u.h)(e,-this.fadedExtensions.start,y);i[0]=t[0],i[1]=t[1],i[2]=t[2];const n=Object(u.h)(e,0,y);i[3]=n[0],i[4]=n[1],i[5]=n[2];const s=Object(u.h)(e,1,y);i[6]=s[0],i[7]=s[1],i[8]=s[2];const a=Object(u.h)(e,1+this.fadedExtensions.end,y);i[9]=a[0],i[10]=a[1],i[11]=a[2]}else{const t=Object(u.h)(e,0,y);i[0]=t[0],i[1]=t[1],i[2]=t[2];const n=Object(u.h)(e,1,y);i[3]=n[0],i[4]=n[1],i[5]=n[2]}t.geometryVertexAttrsUpdated(t.geometryRecords[0])}}const v=Object(d.a)(),y=Object(o.f)(),w=Object(o.f)(),S=Object(u.d)();var x,M;(M=x||(x={}))[M.LINE=0]="LINE",M[M.RAY=1]="RAY",M[M.GROUND_RAY=2]="GROUND_RAY",M[M.FADED=3]="FADED";const P=1/3,C={start:P,end:P}},1184:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(2),s=i(23),a=i(915),r=i(559),o=i(1110),c=i(1135),l=i(124);class d{constructor(){this.next=new o.a}createSnapDragEventPipelineStep({predicate:t=(()=>!0),cancel:e,snappingManager:i,snappingContext:a,updatingHandles:r,useZ:c=!0}){if(Object(n.k)(i))return t=>t;let l=null,d=null;const h=()=>{l=Object(n.a)(l),i.doneSnapping(),Object(n.l)(d)&&d.frameTask.remove(),d=null};e.next((t=>(h(),t))),this.next=new o.a;const u=this._createSnapFunction(i,c);let p=null,b=null,O=null;return e=>{if(!t(e))return e;if("start"===e.action){const t=this._createFrameTask(i.view);if(d=this._createSnappingInfo(a,e,t),d.context.selfSnappingZ=null,!c&&Object(n.l)(e.info)){const t=this._extractSelfSnappingZ(a.coordinateHelper,e.info.handle.component);Object(n.l)(t)&&(d.context.selfSnappingZ={value:t,elevationInfo:a.elevationInfo})}}if(Object(n.l)(d)){const{context:t,originalScenePos:a,originalPos:o}=d,{mapEnd:h,mapStart:f,action:m,scenePoints:_}=e,j=this._updatePosition(o,this._computeMapDelta(h,f)),g=this._computeMapDelta(f,o),v={...e,action:"update"},y=d.context,w=this._updateScenePosition(a,_),S=i.update({point:j,scenePoint:w,context:t});if(O=S,this._applySnappedUpdate(h,S,g,c),p=j,b=w,"end"!==m){const{frameTask:t}=d;Object(n.k)(l)&&(l=new AbortController),r.addPromise(Object(s.i)(u({frameTask:t,event:v,context:y,point:j,scenePoint:w,delta:g,lastPos:p,lastScenePos:b,lastUpdate:O},l.signal)))}}return"end"===e.action&&h(),e}}_createSnapFunction(t,e){return Object(s.f)((async({frameTask:i,point:s,scenePoint:r,context:o,event:c,delta:l,lastPos:d,lastScenePos:h,lastUpdate:u},p)=>{const b=await i.schedule((()=>t.snap({point:s,scenePoint:r,context:o,signal:p})),p);if(b.valid){let r=await i.schedule((()=>b.apply()),p);s!==d&&Object(n.l)(d)&&(r=t.update({point:d,scenePoint:h,context:o})),Object(a.b)(r,u)||(this._applySnappedUpdate(c.mapEnd,r,l,e),this.next.execute(c))}}))}_createFrameTask(t){return"3d"===t.type?t.resourceController.scheduler.registerTask(l.b.SNAPPING):l.a}_createSnappingInfo(t,e,i){return{context:new c.a({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:Object(n.l)(e.info)?e.info.handle:null,excludeFeature:t.excludeFeature,visualizer:t.visualizer}),originalPos:Object(n.l)(e.snapOrigin)?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:Object(n.l)(e.scenePoints)?e.scenePoints.sceneStart:null,frameTask:i}}_updatePosition(t,[e,i,n]){const s=Object(r.a)(t);return s.x+=e,s.y+=i,s.hasZ&&(s.z+=n),s}_updateScenePosition(t,e){return Object(n.k)(t)||Object(n.k)(e)?null:this._updatePosition(t,this._computeMapDelta(e.sceneEnd,e.sceneStart))}_computeMapDelta(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}_applySnappedUpdate(t,e,[i,n,s],a){t.x=e.x+i,t.y=e.y+n,a&&t.hasZ&&e.hasZ&&(t.z=e.z+s)}_extractSelfSnappingZ(t,e){if(!t.hasZ())return null;const i=e.vertices;let s=null;for(const a of i){const e=t.getZ(a.pos);if(Object(n.l)(s)&&Math.abs(e-s)>1e-6)return null;Object(n.k)(s)&&(s=e)}return s}}},1211:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));let n=t=>({vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}),s=(t,e,i)=>{for(let a=0,r=e.length;a<r;a++){let r=e[a];Array.isArray(r)?s(t,r,i):null!=r&&!1!==r&&("string"==typeof r&&(r=n(r)),i.push(r))}};function a(t,e,i){if(Array.isArray(e))i=e,e=void 0;else if(e&&("string"==typeof e||e.hasOwnProperty("vnodeSelector"))||i&&("string"==typeof i||i.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let n,a;return i&&1===i.length&&"string"==typeof i[0]?n=i[0]:i&&(a=[],s(t,i,a),0===a.length&&(a=void 0)),{vnodeSelector:t,properties:e,children:a,text:""===n?void 0:n,domNode:null}}},1212:function(t,e,i){"use strict";i.d(e,"a",(function(){return j})),i.d(e,"b",(function(){return g})),i.d(e,"c",(function(){return f})),i.d(e,"d",(function(){return v})),i.d(e,"e",(function(){return m})),i.d(e,"f",(function(){return b})),i.d(e,"g",(function(){return p})),i.d(e,"h",(function(){return y})),i.d(e,"i",(function(){return _}));var n,s,a=i(2),r=i(1102),o=i(68),c=i(5),l=i(9),d=i(40),h=i(47),u=i(1210);function p(t){return O(t,n.Direct)}function b(t){return O(t,n.Horizontal)}function O(t,e){const{hasZ:i,spatialReference:s}=t,c=Object(u.a)(s);let l=0;const d=Object(o.m)(c);if(Object(a.k)(d))return null;const h=e===n.Direct?g:v;for(const n of t.paths){if(n.length<2)continue;const t=n.length-1;for(let e=0;e<t;++e){const t=n[e];S[0]=t[0],S[1]=t[1],S[2]=i?t[2]:0;const r=n[e+1];x[0]=r[0],x[1]=r[1],x[2]=i?r[2]:0;const o=h(S,x,s);if(Object(a.k)(o))return null;l+=o.value}}return Object(r.c)(l,d)}function f(t,e){const{spatialReference:i}=t;return Object(h.d)(i,e.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,g(S,x,i)):null}function m(t,e){const{spatialReference:i}=t;return Object(h.d)(i,e.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,v(S,x,i)):null}function _(t,e){const{spatialReference:i}=t;return Object(h.d)(i,e.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,y(S,x,i)):null}function j(t){return S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,function(t,e){const i=Object(o.y)(e);return Object(a.l)(i)?Object(r.c)(t[2],i):null}(S,t.spatialReference)}function g(t,e,i){const s=w(t,e,i,n.Direct);return Object(a.l)(s)?Object(r.c)(s.direct,s.unit):null}function v(t,e,i){const s=w(t,e,i,n.Horizontal);return Object(a.l)(s)?Object(r.c)(s.horizontal,s.unit):null}function y(t,e,i){const s=w(t,e,i,n.Vertical);return Object(a.l)(s)?Object(r.c)(s.verticalSigned,s.unit):null}function w(t,e,i,s){const r=Object(u.a)(i),l=Object(o.m)(r);if(Object(a.k)(l))return null;const h=e[2]-t[2];if(s===n.Vertical)return{verticalSigned:h,unit:l};if(!Object(d.C)(t,i,M,r)||!Object(d.C)(e,i,P,r))return null;if(s===n.Direct)return{direct:Object(c.r)(P,M),unit:l};if(Object(c.B)(C,t[0],t[1],e[2]),!Object(d.C)(C,i,C,r))return null;const p=Object(c.r)(C,P);return s===n.Horizontal?{horizontal:p,unit:l}:{direct:Object(c.r)(P,M),horizontal:p,vertical:Math.abs(h),unit:l}}(s=n||(n={}))[s.Direct=0]="Direct",s[s.Horizontal=1]="Horizontal",s[s.Vertical=2]="Vertical";const S=Object(l.f)(),x=Object(l.f)(),M=Object(l.f)(),P=Object(l.f)(),C=Object(l.f)()},1214:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(226),s=i(927),a=i(360),r=i(926),o=i(1126),c=i(743);class l{draw(t,e){const i=this._getUniqueHints(t),l=[];for(const n of i)n instanceof s.a&&l.push(this.visualizeIntersectionPoint(n,e)),n instanceof a.a&&l.push(this.visualizeLine(n,e)),n instanceof r.a&&l.push(this.visualizeParallelSign(n,e)),n instanceof c.a&&l.push(this.visualizeRightAngleQuad(n,e)),n instanceof o.a&&l.push(this.visualizePoint(n,e));return Object(n.b)(l)}_getUniqueHints(t){const e=[];for(const i of t){let t=!0;for(const n of e)if(i.equals(n)){t=!1;break}t&&e.push(i)}return e}}},1230:function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return d}));var n=i(5),s=i(9),a=i(40),r=i(66),o=i(55),c=i(185);class l{constructor(t=Object(s.f)(),e=Object(s.f)()){this.startRenderSpace=t,this.endRenderSpace=e,this.type="euclidean"}eval(t,e,i){return Object(n.q)(e,this.startRenderSpace,this.endRenderSpace,t),i&&(Object(n.k)(i,this.endRenderSpace,this.startRenderSpace),Object(n.w)(i,i)),e}createRenderGeometry(t,e){const i=[],s=[],a=(e,a)=>{const r=u;Object(n.k)(r,e,t),i.push([r[0],r[1],r[2]]),s.push([a[0],a[1],a[2]])},r=e.worldUpAtPosition(this.eval(.5,h),o.d.get());return a(this.startRenderSpace,r),a(this.endRenderSpace,r),{points:i,normals:s}}static fromPositionAndVector(t,e,i=1){return Object(n.p)(h,e,i),Object(n.j)(h,t,h),new l(Object(s.d)(t),Object(s.d)(h))}}class d{constructor(t,e,i){this.startRenderSpace=t,this.endRenderSpace=e,this.renderSpatialReference=i,this.type="geodesic",this._start=Object(s.f)(),this._end=Object(s.f)(),this._pcpf=Object(r.g)(i),this._project=Object(a.b)(i,this._pcpf),this._projectIn(t,this._start),this._projectIn(e,this._end)}_projectIn(t,e){this._project?Object(a.C)(t,this.renderSpatialReference,e,this._pcpf):Object(n.l)(e,t)}eval(t,e,i){if(this._project)if(i){const s=u;Object(c.i)(this._start,this._end,t,e,s),Object(n.j)(p,e,s),Object(a.C)(e,this._pcpf,e,this.renderSpatialReference),Object(a.C)(p,this._pcpf,p,this.renderSpatialReference),Object(n.k)(i,p,e),Object(n.w)(i,i)}else Object(c.h)(this._start,this._end,t,e),Object(a.C)(e,this._pcpf,e,this.renderSpatialReference);else Object(n.q)(e,this._start,this._end,t),i&&(Object(n.k)(i,this._end,this._start),Object(n.w)(i,i));return e}createRenderGeometry(t,e){const i=[],s=[],a=(e,a)=>{const r=p;Object(n.k)(r,e,t),i.push([r[0],r[1],r[2]]),s.push([a[0],a[1],a[2]])};for(let n=0;n<128;++n){const t=n/127,i=h,s=u;this.eval(t,i),e.worldUpAtPosition(i,s),a(i,s)}return{points:i,normals:s}}}const h=Object(s.f)(),u=Object(s.f)(),p=Object(s.f)()},1240:function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i(46),s=(i(32),i(226)),a=i(2),r=i(5),o=i(9),c=i(62),l=i(1183),d=i(64),h=i(13),u=i(31),p=i(26),b=i(60),O=i(401),f=i(1117),m=i(285),_=i(102),j=i(11),g=i(475);class v extends f.a{constructor(t){super(t),this._handles=new d.a,this._location=Object(o.f)(),this._direction=Object(o.h)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=Object(O.c)(1,0,1,1),this._renderOccluded=_.c.OccludeAndTransparent,this.applyProps(t)}get location(){return this._location}set location(t){Object(r.t)(this._location,t)||(Object(r.l)(this._location,t),this._updateGeometry())}get direction(){return this._direction}set direction(t){Object(r.t)(this._direction,t)||(Object(r.l)(this._direction,t),this._updateGeometry())}setDirectionFromPoints(t,e){Object(r.w)(this._direction,Object(r.k)(this._direction,e,t)),this._updateGeometry()}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this._updateMaterial())}get offset(){return this._offset}set offset(t){t!==this._offset&&(this._offset=t,this._updateGeometry())}get length(){return this._length}set length(t){t!==this._length&&(this._length=t,this._updateGeometry())}get color(){return this._color}set color(t){Object(b.g)(t,this._color)||(Object(b.c)(this._color,t),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._updateMaterial())}createExternalResources(){const t=new g.a(this.materialParameters);this._handles.add(Object(h.f)((()=>this.view.state.camera),(()=>{this._updateGeometry()}))),this._externalResources={material:t}}destroyExternalResources(){this._handles.removeAll(),this._externalResources=null}createGeometries(t){const e=Object(m.j)([Object(o.f)(),Object(o.f)()]),i=Object(m.j)([Object(o.f)(),Object(o.f)()]),n=Object(a.t)(this._externalResources).material;t.addGeometry(e,n),t.addGeometry(i,n),this._updateVertices(t)}forEachExternalMaterial(t){Object(a.l)(this._externalResources)&&t(this._externalResources.material)}_updateMaterial(){Object(a.k)(this._externalResources)||this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}_updateGeometry(){const t=this.object;Object(a.k)(t)||this._updateVertices(t)}_updateVertices(t){const e=this.view.state.camera;e.projectToScreen(this.location,w),Object(r.j)(y,this.location,this.direction),e.projectToScreen(y,S),Object(p.f)(S,Object(p.a)(S,S,w)),this._updateVertexAttributes(e,t,0,w,S,1),this._updateVertexAttributes(e,t,1,w,S,-1)}_updateVertexAttributes(t,e,i,n,s,a){const r=e.geometryRecords[i],o=r.geometry.getMutableAttribute(j.a.POSITION).data,c=Object(p.b)(x,Object(p.s)(x,s[1]*a,s[0]*-a),this.offset+this.width/2),l=Object(p.j)(M,Object(p.j)(M,Object(p.j)(M,n,Object(p.b)(M,s,this.length/2)),c),c),d=Object(p.j)(P,l,Object(p.b)(P,s,-this.length));t.unprojectFromScreen(l,y),o[0]=y[0],o[1]=y[1],o[2]=y[2],t.unprojectFromScreen(d,y),o[3]=y[0],o[4]=y[1],o[5]=y[2],e.geometryVertexAttrsUpdated(r)}}const y=Object(o.f)(),w=Object(u.g)(),S=Object(u.g)(),x=Object(u.g)(),M=Object(u.g)(),P=Object(u.g)();var C=i(1299),D=i(1268),A=i(362),R=i(205),T=i(78),z=i(1214),k=i(251);class E extends z.a{visualizeIntersectionPoint(t,e){const{coordinateHelper:i,view:r}=e;return Object(s.a)(new C.a({view:r,primitive:"circle",geometry:i.vectorToPoint(t.intersectionPoint),elevationInfo:Object(a.u)(t.elevationInfo,e.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:n.a.toUnitRGBA(A.a.orange),pixelSnappingEnabled:!1}))}visualizePoint(t,e){const{view:i,coordinateHelper:a}=e,r=this._alignPoint(t.point,t.domain,e);return Object(s.a)(new C.a({view:i,primitive:"circle",geometry:a.vectorToPoint(r),elevationInfo:this._hintElevationInfo(t,e),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:n.a.toUnitRGBA(A.a.orange),pixelSnappingEnabled:!1}))}visualizeLine(t,e){const{view:i,coordinateHelper:n}=e,a=this._alignPoint(t.lineStart,t.domain,e),r=this._alignPoint(t.lineEnd,t.domain,e);return Object(s.a)(this._createLineSegmentHintFromMap(t.type,a,r,n,this._hintElevationInfo(t,e),i,t.fadeLeft,t.fadeRight))}visualizeParallelSign(t,e){const{view:i,coordinateHelper:a}=e,o=this._hintElevationInfo(t,e),c=this._alignPoint(t.lineStart,t.domain,e),l=this._alignPoint(t.lineEnd,t.domain,e),d=Object(k.a)(c,a,o,i),h=Object(k.a)(l,a,o,i),u=Object(r.q)(h,d,h,.5),p=new v({view:i,attached:!1,offset:A.a.parallelLineHintOffset,length:A.a.parallelLineHintLength,width:A.a.parallelLineHintWidth,color:n.a.toUnitRGBA(A.a.orange),location:u,renderOccluded:_.c.Opaque});return p.setDirectionFromPoints(d,u),p.attached=!0,Object(s.a)(p)}visualizeRightAngleQuad(t,e){const{view:i,coordinateHelper:a}=e,r=this._hintElevationInfo(t,e),o=this._alignPoint(t.previousVertex,t.domain,e),c=this._alignPoint(t.centerVertex,t.domain,e),l=this._alignPoint(t.nextVertex,t.domain,e);return Object(s.a)(new D.a({view:i,attached:!0,color:n.a.toUnitRGBA(A.a.orange),renderOccluded:_.c.Transparent,outlineRenderOccluded:_.c.Opaque,outlineColor:n.a.toUnitRGBA(A.a.orange),outlineSize:A.a.rightAngleHintOutlineSize,size:A.a.rightAngleHintSize,geometry:{previous:Object(k.a)(o,a,r,i),center:Object(k.a)(c,a,r,i),next:Object(k.a)(l,a,r,i)}}))}_createLineSegmentHintFromMap(t,e,i,n,s,a,r=!0,c=!0){const l=Object(o.f)(),d=Object(o.f)();return Object(k.c)(e,i,n,s,a,l,d),this._createLineSegmentHint(t,a,l,d,r,c)}_createLineSegmentHint(t,e,i,s,a=!0,r=!0){const o=new l.a({view:e,extensionType:l.b.FADED,start:i,end:s,color:n.a.toUnitRGBA(A.a.orange),renderOccluded:_.c.Opaque});switch(t){case T.a.TARGET:o.width=A.a.lineHintWidthTarget,o.fadedExtensions={start:0,end:A.a.lineHintFadedExtensions};break;case T.a.REFERENCE_EXTENSION:o.width=A.a.lineHintWidthReference,o.fadedExtensions={start:0,end:0};break;case T.a.REFERENCE:o.width=A.a.lineHintWidthReference,o.fadedExtensions={start:a?A.a.lineHintFadedExtensions:0,end:r?A.a.lineHintFadedExtensions:0}}return o.attached=!0,o}_alignPoint(t,e,i){const n=this._getSelfSnappingZ(e,i);if(Object(a.k)(n))return t;const s=i.coordinateHelper,r=s.vectorToPoint(t,H);return r.z=n,s.pointToVector(r)}_hintElevationInfo(t,e){return Object(a.l)(this._getSelfSnappingZ(t.domain,e))?Object(a.t)(e.selfSnappingZ).elevationInfo:Object(a.u)(t.elevationInfo,e.elevationInfo)}_getSelfSnappingZ(t,{selfSnappingZ:e}){return t===R.a.SELF&&Object(a.l)(e)?e.value:null}}const H=new c.a},1266:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i(0),s=i(46),a=i(28),r=i(1),o=(i(17),i(12),i(10)),c=(i(343),i(1211));i(513);const l={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let d=class extends a.a{constructor(t){super(t),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.backgroundColor=new s.a([0,0,0,.6]),this.textColor=new s.a([255,255,255]),this._textShadowSize=1}get position(){return[this.x,this.y]}set position(t){this._set("x",t[0]),this._set("y",t[1])}get _textShadowColor(){return this.backgroundColor}get _textShadow(){const t=this._textShadowColor.toCss(!1);return`0 0 ${this._textShadowSize}px ${t}`}get _padding(){return.5*this.fontSize}get _borderRadius(){return this._padding}render(){return Object(c.a)("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this._padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,"");t.font=`${this.fontSize}px ${e}`;const i=this._padding,n=this._borderRadius,s=t.measureText(this.text).width,a=this.fontSize,r=h[this.anchor];t.textAlign="center",t.textBaseline="middle";const o=s+2*i,c=a+2*i,l=this.x+r.x*o,d=this.y+r.y*c;this._roundedRect(t,l,d,o,c,n),t.fillStyle=this.backgroundColor.toCss(!0),t.fill();const u=this.x+(r.x+.5)*o,p=this.y+(r.y+.5)*c;this._renderTextShadow(t,this.text,u,p),t.fillStyle=this.textColor.toCss(!0),t.fillText(this.text,u,p)}_renderTextShadow(t,e,i,n){t.lineJoin="miter",t.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/u.length})`;const s=this._textShadowSize;for(const[a,r]of u)t.fillText(e,i+s*a,n+s*r)}_roundedRect(t,e,i,n,s,a){t.beginPath(),t.moveTo(e,i+a),t.arcTo(e,i,e+a,i,a),t.lineTo(e+n-a,i),t.arcTo(e+n,i,e+n,i+a,a),t.lineTo(e+n,i+s-a),t.arcTo(e+n,i+s,e+n-a,i+s,a),t.lineTo(e+a,i+s),t.arcTo(e,i+s,e,i+s-a,a),t.closePath()}_cssClasses(){const t={"esri-text-overlay-item":!0};for(const e in l)t[l[e]]=this.anchor===e;return t}};Object(n.a)([Object(r.b)()],d.prototype,"x",void 0),Object(n.a)([Object(r.b)()],d.prototype,"y",void 0),Object(n.a)([Object(r.b)()],d.prototype,"position",null),Object(n.a)([Object(r.b)()],d.prototype,"text",void 0),Object(n.a)([Object(r.b)()],d.prototype,"fontSize",void 0),Object(n.a)([Object(r.b)()],d.prototype,"anchor",void 0),Object(n.a)([Object(r.b)()],d.prototype,"visible",void 0),Object(n.a)([Object(r.b)()],d.prototype,"backgroundColor",void 0),Object(n.a)([Object(r.b)()],d.prototype,"textColor",void 0),Object(n.a)([Object(r.b)()],d.prototype,"_textShadowSize",void 0),Object(n.a)([Object(r.b)()],d.prototype,"_textShadowColor",null),Object(n.a)([Object(r.b)()],d.prototype,"_textShadow",null),Object(n.a)([Object(r.b)()],d.prototype,"_padding",null),Object(n.a)([Object(r.b)()],d.prototype,"_borderRadius",null),d=Object(n.a)([Object(o.a)("esri.views.overlay.TextOverlayItem")],d);const h={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},u=[];{const t=16;for(let e=0;e<360;e+=360/t)u.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}const p=d},1268:function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i(64),s=i(2),a=i(13),r=i(30),o=i(35),c=i(5),l=i(9),d=i(60),h=i(401),u=i(55),p=i(1117),b=i(169),O=i(285),f=i(102),m=i(11),_=i(871),j=i(475);class g extends p.a{constructor(t){super(t),this._handles=new n.a,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=Object(l.f)(),this._up=Object(l.f)(),this._right=Object(l.f)(),this._renderOccluded=f.c.OccludeAndTransparent,this._color=Object(h.c)(1,0,0,1),this._outlineColor=Object(h.c)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=f.c.Opaque,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._updateQuadMaterial())}get color(){return this._color}set color(t){Object(d.c)(this._color,t),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(t){Object(d.c)(this._outlineColor,t),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(t){const e=0===this._outlineSize!=(0===t);this._outlineSize=t,e?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(t){t!==this._size&&(this._size=t,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(t){this._outlineRenderOccluded=t,this._updateOutlineMaterial()}set geometry({previous:t,center:e,next:i}){this._maxSize=Math.min(Object(c.r)(e,t),Object(c.r)(e,i))/3,Object(c.w)(this._up,Object(c.k)(this._up,t,e)),Object(c.w)(this._right,Object(c.k)(this._right,i,e)),Object(c.l)(this._position,e),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new _.a(this._quadMaterialParameters),this._outlineMaterial=new j.a(this._outlineMaterialParameters),this._handles.add(Object(a.f)((()=>this.view.state.camera),(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(t){t(this._quadMaterial),t(this._outlineMaterial)}createGeometries(t){Object(c.t)(this._up,l.c)&&Object(c.t)(this._right,l.c)||(this._createQuadGeometry(t),this._createOutlineGeometry(t),this._updateTransform(t))}_createQuadGeometry(t){const e=this._quadGeometryData(this._up,this._right);t.addGeometry(e,this._quadMaterial)}_createOutlineGeometry(t){if(0===this._outlineSize)return;const e=Object(c.j)(u.d.get(),this._up,this._right),i=Object(O.j)([this._up,e,this._right]);t.addGeometry(i,this._outlineMaterial)}_updateTransform(t=this.object){const e=this.view.state.camera,i=this._size*e.computeScreenPixelSizeAt(this._position),n=Math.min(this._maxSize,i);Object(r.i)(v,this._position),Object(r.n)(v,v,[n,n,n]),Object(s.l)(t)&&(t.transformation=v)}_quadGeometryData(t,e){const i=Object(c.j)(u.d.get(),t,e);return new b.a([[m.a.POSITION,{size:3,data:[0,0,0,...e,...t,...i],exclusive:!0}]],[[m.a.POSITION,[0,1,2,1,2,3]]])}get _quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this._outlineMaterialParameters)}}const v=Object(o.d)()},1269:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i(0),s=i(28),a=i(2),r=i(23),o=i(1),c=(i(17),i(12),i(10)),l=i(124);let d=class extends s.a{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._abortController=null,this._stagedPoint=null,this._snap=Object(r.f)((async(t,e,i,n)=>{const s=await this._frameTask.schedule((()=>e.snap({...t,context:i,signal:n})),n);s.valid&&await this._frameTask.schedule((()=>{this.stagedPoint=s.apply(),t!==this._snapPoints&&Object(a.l)(this._snapPoints)&&(this.stagedPoint=e.update({...this._snapPoints,context:i}))}),n)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){var t,e;const i="3d"===this.view.type?null==(t=this.view)||null==(e=t.resourceController)?void 0:e.scheduler:null;this._frameTask=Object(a.l)(i)?i.registerTask(l.b.SNAPPING):l.a}destroy(){this._abortController=Object(a.a)(this._abortController),this._frameTask=Object(a.s)(this._frameTask)}async snap(t,e,i){const{point:n,scenePoint:s}=t;return this.stagedPoint=e.update({point:n,scenePoint:s,context:i}),this._snapPoints=t,Object(a.k)(this._abortController)&&(this._abortController=new AbortController),this._snap(t,e,i,this._abortController.signal)}abort(){this._abortController=Object(a.a)(this._abortController)}};Object(n.a)([Object(o.b)({constructOnly:!0})],d.prototype,"view",void 0),Object(n.a)([Object(o.b)()],d.prototype,"stagedPoint",null),Object(n.a)([Object(o.b)()],d.prototype,"constrainResult",void 0),Object(n.a)([Object(o.b)()],d.prototype,"_stagedPoint",void 0),d=Object(n.a)([Object(c.a)("esri.views.interactive.snapping.SnappingOperation")],d)},1270:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i(0),s=i(13),a=i(1),r=(i(17),i(12),i(10)),o=i(1159);let c=class extends o.a{constructor(t){super(t)}initialize(){this.addHandles(Object(s.f)((()=>this.analysisViewData.visible),(t=>this.visible=t),s.e))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};Object(n.a)([Object(a.b)({constructOnly:!0})],c.prototype,"analysis",void 0),Object(n.a)([Object(a.b)()],c.prototype,"analysisViewData",void 0),c=Object(n.a)([Object(r.a)("esri.views.interactive.AnalysisToolBase")],c)},1271:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return l}));var n=i(157),s=i(2),a=i(23),r=i(13);function o(t,e){t.interactive=!0;const{tool:i,view:o}=t;o.activeTool=i;let c=Object(a.n)(e,(()=>{o.activeTool===i&&(o.activeTool=null)}));return Object(n.b)((async t=>{await Object(r.h)((()=>Object(s.k)(i)||!i.active),t),c=Object(s.s)(c)}),e)}function c(t,e){return Object(r.f)((()=>t.interactive),(()=>function(t,e){t.interactive?function(t,e){l(t);const{view:i,analysis:n}=t,s=new e({view:i,analysis:n,analysisViewData:t});t.tool=s,i.tools.add(s)}(t,e):l(t)}(t,e)),r.e)}function l(t){const{view:e,tool:i}=t;Object(s.k)(i)||(e.tools.remove(i),t.tool=null)}},1276:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c}));const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAnFBMVEUAAAD/gAD/gAD/cAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/gAD/fAD/gAD/fAD/gAD/fAD/fQD/fQD/fQD/fQD/fQD/fgD/jR7/mjn/mjf/p1H/plH/smf/sWb/vHr/u3n/xYz/xIv/zZz/zJv/zJr/1Kv/1Kr/06r/06n/27n/27f/4cX/4cT/59D/7dr/8uX/9u7/+/f////u2EN0AAAAM3RSTlMACBAQICAoKDAwODhAQEhIUFBYYGhweICIkJCXmJ+gp6ivsLe4uL+/wMDHx8/P19/n7/cWvjXwAAACeUlEQVR42tWX3XqiMBCGY2pbtbrUnzhhdak/lHWliJD7v7fdJ+KG5AMhh30P8zCTmS+TycDaeBoHi5Wgf4jVYvbKmRfPgSAHMX9mPRnM1tSIGHM/c2QddLp4c8wxCvYIvqROBPfbHlm/sRYC6smMNTKn3sxZAyvyYNW1v38MM/IkcPQnZHPMLtciz9P9hhqwzoLD+cnfpTIUaYinyZlBkE2YKZcMXCyN/YhsPkuFlMfWJLiwo89VMxfpJDForMCwuG+Zx7ttGO2S/w4LJ42ZURDty5M0a4dqsZAQAihQfXqWdlhnpcmdEPAI0tv2EbnsbsKmdgi6/1GN7T1XJLx5sF0P9SWABMC+co5JBE4Ge/1NTM3EGIJgjFONXCdAbeQYwhN7pRrRV20LJNIhWOczdu+xPFzIBiQ62iIsyIOTvlZUY+HXySLQaMUEeSC1CPYxENIlwk+q8e0clFAIfiKG+qpaIvod4wfU8sqvkDLda+xCCqgDaAk7uyeNqD+feFlfGCcg3Hzsk+xS7Nz1Aq4CcauhhMc0uxaqIgcFsF0J+1WQyoCN7Y9ezeCVH5LhSxmyRvsihKbK1m7LafpSpkpj6yJgtsiVBh6AX5UyCVmMbrNpcwj5/h6DPN79JjAiQAhXVeN6SZI0q5bQnn4wBiHEqpUybp1ZJzWxStVCHhKhAhVLp/Emh6trHpGLaB6yZHk7wu3Z+ChOxhwUNEmYYjpUvqJDksSHraQmJm2DdqQK6sGUObybYtpSN+8Phm3pN2xjDH33R6b0CKxAZNLvl8foD3BBnSw5e8RI+G2P8GD9wHw6YN3wkfA0R4Zz8CGCIfOCv8zM738walXuLw6nXBvPr8wvAAAAAElFTkSuQmCC",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACtVBMVEUAAAD/AAD/gAD/VQD/gAD/gAD/bQD/gAD/cQD/gAD/dAD/gAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/fAD/gAD/gAD/fAD/gAD/fQD/fQD/gAD/fQD/egD/fQD/gAD/egD/fQD/gAD/ewD/gAD/ewD/gAD/ewD/fQD/fQD/gAD/ewD/fQD/gAD/fAD/gAD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/fQD/fQD/fgD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/gAL/fgD/gAb/gAT/gwr/hAz/hxH/hQ//iBX/iBP/ixn/iRf/jBr/jR7/jyP/jyL/kif/kCX/kyr/lS7/lCz/ljH/li//mTX/nDr/mjn/nTz/oEL/okf/o0r/pU3/pU7/qFL/plH/qFX/q1j/q1r/rl7/sGL/rmH/s2v/tW//tW7/t3L/uHL/unb/unf/vHv/vX3/v4D/vX7/v4D/wYT/v4L/wYX/x4//x5H/yZX/y5n/zZv/y5n/zJv/zZ3/zp//0aL/z6H/1Kr/1av/06r/1q//17H/2bT/2LP/2rb/27n/3bz/3r7/37//4MH/38D/4ML/4sX/4sb/4sf/48n/5cv/48r/5cz/5s7/6dT/6tb/69j/69n/7Nn/7dv/7dz/7t7/7t3/7+H/7+D/7+H/8eL/8uX/8uX/8ub/8+j/8+f/9On/9er/9Or/9ez/9e3/9ez/9u7/9e3/9+//9+7/+PD/+PH/+fT/+fL/+vb/+vX/+vb/+/f/+vb//Pn/+/j//Pr//Pn//fv//Pr//fv//v3//fz//////v7//v3///8ZYzD6AAAA5nRSTlMAAQIDBAYHCAkKCwwQERITGBkaGyUmKCkqKy0uLzAxMjIzNDQ2Njg4OTs+Pj9AQEJCQ0RERUZHUlJTVFVWWFlfYGFiY2RlZmdoaWprbG1ucHFyc3R1dnd4eXp8f4CAgYGCg4SEhYWGhoeIiYmKiouMjI2Nj5CQkZOUlZaXmJiZmpudnp6io6OkpaanqKmqqqusrK2xs7W2t7e4ubq7u7/AwMLExcXGyMrLzM3NztDR0tPU1NXW29zd3t/g4eLi5OTl5ufo6erq6+zs7e7u7+/w8PHy9PT29vf4+Pn5+vr7+/z9/f7+/pNrFTEAAAO8SURBVHjaldf5W1RVGAfwl4kGxa2yIDPbF82EJhkVUEOiUiDMcJa482XCijStNLLVpoWCbLHFaZUoMSkq2wgtW8mobFcryiiWkffv6J557jh3zj33zvD56f3h3vM873nP+z7nkJ3cPE9JxdX+OgSWX15aMG0CjcnUoiuRSls2byplyH1eDZSqZrkz+d0ThC1/QQ45c521Eo58p5GTSZcirbIpZGtGEBkI5pNaVhEyo3mzSCF7ITJW7CKLYxbDTsPG5qe33QezxdkkySqGndYY615CilI5Cy9sRVjYgVRzKcXJGmzdwsKHkEwnkylB2AsNse5zSIITKWkJnPzCut8gW5IsxRlw9CnrRuohO5MM43xw9D4Lt0JWm2jOOXD2Ogv3w6LQaGA/nL3AwuOwCLpJmIU0nmDheVidQ0IV0niAhQ5YVcfnH2zcCMNtLLwHheOJaB5s7OxuQlx4hHV7oeAhokrYaOeBjkYIv7LuJyhUEU3QYONFZj4YrQfwGeuGQrDSxtM0KK2N7h5koa8V+ICFdVA4SX2Kbt5xmA2j7SHsZGETFOZQqarwhzjhUAuAl1nYDIUFdAVkoe0s/LiLmT9eD91TLDwHhXJaDtmbrPvyEWzg4dfCEB5kYTsUrqIgJK8w8/C2MHDDgWYgromFXVDwkQbDRsRFhpkHWyHcBMO1oyzSgcI1VGdEd8V6o6uA8D7m2BZIDrJuPxTqKGBEnczc33nHFmZ+A7IvWDegTmEF4lb1s3Dk+wH+oxGyj1hYC6saqkDcVk74u6cJsk4W7oXVZVSCuK84aXTP5pBcGeFRWM2nQmMPOw+zyQ9t62DyLAtRWM2mPBgao1+zyVD3wyEkPMTCq7DKo/Gmdo50DbDJd22JbbudhXdgoeUSVcNkTfRbNvnv3U0QGmKs2w2LpUR0MVI1d4+wSW/0egC/i7APFkXKobq+7Wc2+avrHvSK4B/1UKUaWNQ/1nOEk2Kf7GdhNSTLSDgfKhvaDrDsbkhmkuAOQKnhmb2cqkVuBDfFeWDnzo4/2WQrUl2QuB7XwtZ1T+7ho9qRYmUOGc6Gk8hb/xoLvI0Up1KCqxyOVkf3sdADs0soaVIQaUS6Bpm/gUlgMplMR1pron39SNLyKcVcpBduCQMJXpLMx5gsdJEkexHGYJGLLFzFyFhJNilkeTVkxkM28oPIQOAUsjW5DGmVTSQnM3xwVHt6FjnLudAPW4GLMnq7zqyEUvW5x1KGTvAulSqiVRYeR2OSmz+7uKLGpwX8K8oXFJw4zu67/wFaspwc84wT2QAAAABJRU5ErkJggg==";var a=i(355);const r={mipmap:!0,preMultiplyAlpha:!0,width:64,height:64};function o(t){return t.fromData(n,(()=>new a.a(n,r)))}function c(t){return t.fromData(s,(()=>new a.a(s,r)))}},1297:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i(0),s=(i(167),i(1182)),a=i(137),r=i(228),o=i(27),c=i(1),l=(i(17),i(72)),d=i(10),h=i(12),u=i(62);let p=class extends(Object(o.b)(a.a)){constructor(t){super(t),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=s.a.Direct,this.offset=0,this.orientation=0}};Object(n.a)([Object(c.b)({type:["length"],json:{write:{isRequired:!0}}})],p.prototype,"type",void 0),Object(n.a)([Object(c.b)({type:u.a,json:{write:!0}})],p.prototype,"startPoint",void 0),Object(n.a)([Object(c.b)({type:u.a,json:{write:!0}})],p.prototype,"endPoint",void 0),Object(n.a)([Object(c.b)({type:s.b,nonNullable:!0,json:{write:{isRequired:!0}}})],p.prototype,"measureType",void 0),Object(n.a)([Object(c.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],p.prototype,"offset",void 0),Object(n.a)([Object(c.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((t=>r.c.normalize(Object(h.i)(t),0,!0)))],p.prototype,"orientation",void 0),p=Object(n.a)([Object(d.a)("esri.analysis.LengthDimension")],p);const b=p},1317:function(t,e,i){"use strict";i.d(e,"a",(function(){return y})),i.d(e,"b",(function(){return S}));var n=i(46),s=i(64),a=i(2),r=i(13),o=i(31),c=i(26),l=i(5),d=i(9),h=i(1229),u=i(251),p=i(0),b=i(28),O=i(1),f=(i(17),i(12),i(10)),m=(i(343),i(1211));i(513);let _=class extends b.a{constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set("startX",t[0]),this._set("startY",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set("endX",t[0]),this._set("endY",t[1])}get _strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get _lineCap(){return"round"}render(){const{height:t,left:e,top:i,width:n,x1:s,x2:a,y1:r,y2:o}=this._calculateCoordinates(j),c=`stroke: ${this._strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this._lineCap};`;return Object(m.a)("div",{classes:{"esri-line-overlay-item":!0},styles:{left:e+"px",top:i+"px",width:n+"px",height:t+"px",visibility:this.visible?"visible":"hidden"}},[Object(m.a)("svg",{width:n,height:t},[Object(m.a)("line",{x1:s,y1:r,x2:a,y2:o,style:c})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this._strokeStyle,t.lineWidth=this.width,t.lineCap=this._lineCap;const e=this._calculateCoordinates(j);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}_calculateCoordinates(t){const e=Math.min(this.startX,this.endX),i=Math.max(this.startX,this.endX),n=Math.min(this.startY,this.endY),s=Math.max(this.startY,this.endY),a=this.width;return t.left=e-a,t.top=n-a,t.width=i-e+2*a,t.height=Math.max(20,s-n+2*a),t.x1=this.startX-e+a,t.y1=this.startY-n+a,t.x2=this.endX-e+a,t.y2=this.endY-n+a,t}};Object(p.a)([Object(O.b)()],_.prototype,"startX",void 0),Object(p.a)([Object(O.b)()],_.prototype,"startY",void 0),Object(p.a)([Object(O.b)()],_.prototype,"endX",void 0),Object(p.a)([Object(O.b)()],_.prototype,"endY",void 0),Object(p.a)([Object(O.b)()],_.prototype,"startPosition",null),Object(p.a)([Object(O.b)()],_.prototype,"endPosition",null),Object(p.a)([Object(O.b)()],_.prototype,"width",void 0),Object(p.a)([Object(O.b)()],_.prototype,"color",void 0),Object(p.a)([Object(O.b)()],_.prototype,"visible",void 0),Object(p.a)([Object(O.b)({readOnly:!0})],_.prototype,"_strokeStyle",null),_=Object(p.a)([Object(f.a)("esri.views.overlay.LineOverlayItem")],_);const j={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0},g=_;var v=i(1266);class y extends h.a{constructor(t){super(t.view),this._handles=new s.a,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text="-",this._fontSize=14,this._backgroundColor=new n.a([0,0,0,.6]),this._textColor=new n.a([255,255,255]),this._distance=25,this._anchor="right",this.updatePositionOnCameraMove=!0,this.applyProps(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this.updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.attached&&(this._textItem.backgroundColor=this._backgroundColor)}get textColor(){return this._textColor}set textColor(t){this._textColor=t,this.attached&&(this._textItem.textColor=this._textColor)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this.updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this.updateLabelPosition())}overlaps(t){return!!this.attached&&this.textItem.visible&&t.textItem.visible&&this.view.overlay.overlaps(this._textItem,t.textItem)}updateLabelPosition(){if(!this.attached)return;this._showText=!1,this._showCallout=!1;const{geometry:t,view:e,visible:i}=this;if(Object(a.l)(t)&&e._stage)switch(t.type){case"point":if(!this._computeLabelPositionFromPoint(t.point,z))break;if(t.callout){const i=e.state.camera,n=t.callout.distance;Object(c.j)(T,T,[0,t.callout.offset]),i.renderToScreen(T,z),Object(c.s)(A,0,1),Object(c.b)(A,A,n*i.pixelRatio),Object(c.j)(A,A,T),i.renderToScreen(A,k),this._showCallout=this._updatePosition(z,k)}else this._textItem.position=[z[0],z[1]],this._textItem.anchor="center";this._showText=!0;break;case"corner":if(!this._computeLabelPositionFromCorner(t,this._distance,z,k))break;this._showCallout=this._updatePosition(z,k),this._showText=!0;break;case"segment":{if(!this._computeLabelPositionFromSegment(t,this._distance,this._anchor,z,k))break;this._showText=!0;const e=this._updatePosition(z,k);this._showCallout=!1!==t.callout&&e,this._showCallout||(this._textItem.anchor="center")}}this.updateVisibility(i)}_computeLabelPositionFromPoint(t,e){const i=this.view.state.camera;return i.projectToRenderScreen(t,T),!(T[2]<0||T[2]>1)&&(i.renderToScreen(T,e),!0)}_computeLabelPositionFromCorner(t,e,i,n){if(!t)return!1;const s=this.view.state.camera;return w(t.left,1,s,C),Object(c.n)(C,C),w(t.right,0,s,D),Object(c.j)(A,C,D),Object(c.n)(A,A),Object(c.f)(A,A),s.projectToRenderScreen(t.left.endRenderSpace,T),!(T[2]<0||T[2]>1)&&(s.renderToScreen(T,i),Object(c.b)(A,A,e*s.pixelRatio),Object(c.j)(A,A,T),s.renderToScreen(A,n),!0)}_computeLabelPositionFromSegment(t,e,i,n,s){if(!t)return!1;const a=t.segment,r=this.view.state.camera;Object(u.d)(a.startRenderSpace,a.endRenderSpace,r,C),Object(c.s)(A,-C[1],C[0]);let o=!1;switch(i){case"top":o=A[1]<0;break;case"bottom":o=A[1]>0;break;case"left":o=A[0]>0;break;case"right":o=A[0]<0}if(o&&Object(c.n)(A,A),0===Object(c.i)(A))switch(i){case"top":A[1]=1;break;case"bottom":A[1]=-1;break;case"left":A[0]=-1;break;case"right":A[0]=1}return a.eval(L[t.sampleLocation],R),r.projectToRenderScreen(R,T),!(T[2]<0||T[2]>1)&&(r.renderToScreen(T,n),Object(c.b)(A,A,e*r.pixelRatio),Object(c.j)(A,A,T),r.renderToScreen(A,s),!0)}_updatePosition(t,e){if(e){const i=e[0]-t[0],n=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(i)>Math.abs(n)?i>0?"left":"right":n>0?"top":"bottom",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor="center",!1}createResources(){this._textItem=new v.a({visible:!0,text:this._text,fontSize:this._fontSize,backgroundColor:this._backgroundColor,textColor:this._textColor}),this._calloutItem=new g({visible:!0,width:2}),this.updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this.updatePositionOnCameraMove&&this._handles.add(Object(r.f)((()=>this.view.state.camera),(()=>this.updateLabelPosition())))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function w(t,e,i,n){t.eval(e,x,P),Object(l.j)(M,x,P),i.projectToRenderScreen(x,E),i.projectToRenderScreen(M,I),Object(c.a)(n,G,H),Object(c.f)(n,n)}function S(t){switch(t){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}}const x=Object(d.f)(),M=Object(d.f)(),P=Object(d.f)(),C=Object(o.d)(),D=Object(o.d)(),A=Object(o.d)(),R=Object(d.f)(),T=Object(o.e)(),z=Object(o.g)(),k=Object(o.g)(),E=Object(o.e)(),H=E,I=Object(o.e)(),G=I,L={start:0,center:.5,end:1}},1419:function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));var n=i(2),s=i(5),a=i(9),r=i(60),o=i(1157),c=i(1117),l=i(255),d=i(82);var h=i(34),u=i(285),p=i(102),b=i(1420);class O extends c.a{constructor(t){super(t),this.view=null,this._renderOccluded=p.c.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=o.b.colorToVec4(o.b.reshapeManipulators.vertex.color),this._size=o.b.reshapeManipulators.vertex.size,this._outlineColor=o.b.colorToVec4(o.b.reshapeManipulators.vertex.outlineColor),this._outlineSize=o.b.reshapeManipulators.vertex.outlineSize,this._elevationInfo=null,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(t){this._vertices=t,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(t){this._spatialReference=t,this.recreateGeometry()}get color(){return this._color}set color(t){Object(r.g)(t,this._color)||(Object(r.c)(this._color,t),this._updateMaterial())}get size(){return this._size}set size(t){t!==this._size&&(this._size=t,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(t){Object(r.g)(t,this._outlineColor)||(Object(r.c)(this._outlineColor,t),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(t){t!==this._outlineSize&&(this._outlineSize=t,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(t){this._elevationInfo=t,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,transparent:this._color[3]<1,screenSizeScale:this.size,renderOccluded:this._renderOccluded}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,transparent:this._outlineColor[3]<1,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const t=this.vertices;if(Object(n.k)(t)||0===t.length)return[];const e=function(t,e,i,n,s){const a=new Float64Array(3*t.length),r=new Float64Array(a.length);t.forEach(((t,e)=>{a[3*e+0]=t[0],a[3*e+1]=t[1],a[3*e+2]=t.length>2?t[2]:0}));const o=Object(d.d)(a,e,0,r,0,a,0,a.length/3,i,n,s),c=null!=o;return{numVertices:t.length,position:a,mapPosition:r,projectionSuccess:c,sampledElevation:o}}(t,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,l.a.fromElevationInfo(this.elevationInfo)),i=[],a=e.numVertices,r=e.position;for(let n=0;n<a;++n){const t=Object(s.B)(f,r[3*n+0],r[3*n+1],r[3*n+2]),e=m(.5,t),a=m(.5,t);i.push({vertexGeometry:e,vertexOutlineGeometry:a})}return i}createGeometries(t){const e=this._createRenderGeometries();for(const{vertexGeometry:i,vertexOutlineGeometry:n}of e)t.addGeometry(i,this._vertexMaterial),t.addGeometry(n,this._vertexOutlineMaterial)}createExternalResources(){this._vertexMaterial=new b.a({...this._vertexMaterialParameters,writeDepth:!0,cullFace:h.b.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new b.a({...this._vertexOutlineMaterialParameters,transparent:!0,writeDepth:!0,cullFace:h.b.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachExternalMaterial(t){t(this._vertexMaterial),t(this._vertexOutlineMaterial)}}const f=Object(a.f)();function m(t,e){return Object(u.k)(t,16,16,{offset:e})}},1637:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return ti}));var n,s,a=i(0),r=i(28),o=i(59),c=i(22),l=i(2),d=i(13),h=i(1),u=(i(17),i(12),i(10)),p=i(1179),b=i(1182),O=i(64),f=i(68),m=i(14),_=i(1102),j=i(30),g=i(35),v=i(5),y=i(9),w=i(327),S=i(55),x=i(305),M=i(559),P=i(1230),C=i(1212);function D(t){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:i,dimension:{offset:n,measureType:s,orientation:a}}=t;return{elevationAlignedStartPoint:e,elevationAlignedEndPoint:i,offset:n,measureType:s,orientation:a}}function A({elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,offset:i,measureType:n,orientation:s},a,r=null){if(Object(l.k)(t)||Object(l.k)(e))return null;const o=z(Object(l.l)(r)?r.directSegment:new P.a,{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e},a),c=Object(l.l)(r)?r.primaryOffsetAxis:Object(y.f)();H(c,{measureType:n,elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,directSegment:o,orientation:s,renderCoordsHelper:a});const d=Object(l.l)(r)?r.dimensionSegment:new P.a;return G({elevationAlignedStartPoint:t,elevationAlignedEndPoint:e})&&n===b.a.Vertical?(Object(v.l)(d.startRenderSpace,o.startRenderSpace),Object(v.l)(d.endRenderSpace,o.endRenderSpace)):L(d,{offsetAxis:c,offset:i,relativeToSegment:o,renderCoordsHelper:a}),{directSegment:o,dimensionSegment:d,primaryOffsetAxis:c,spatialReference:a.spatialReference}}function R(t,e,i,s){return e===n.Start?(Object(v.l)(t.startRenderSpace,i.startRenderSpace),Object(v.l)(t.endRenderSpace,s.startRenderSpace)):(Object(v.l)(t.startRenderSpace,i.endRenderSpace),Object(v.l)(t.endRenderSpace,s.endRenderSpace)),t}function T(t,e,i,n){switch(e){case b.a.Direct:return z(t,i,n);case b.a.Horizontal:case b.a.Vertical:{const{elevationAlignedStartPoint:s,elevationAlignedEndPoint:a,dimension:r,geometry:o}=i;let c;r.measureType===b.a.Direct?(c=function(t,e){const i=t.directSegment.eval(.5,S.d.get()),n=e.worldUpAtPosition(i,S.d.get()),s=t.dimensionSegment.eval(.5,S.d.get()),a=Object(v.H)(S.d.get(),s,i);return!Object(v.f)(a,y.c)&&Object(v.n)(a,n)>0}(o,n)===s.z>a.z,e===b.a.Horizontal&&(c=!c)):c=!function(t){const{startRenderSpace:e,endRenderSpace:i}=t.dimensionSegment,{startRenderSpace:n,endRenderSpace:s}=t.directSegment;return Object(v.e)(n,e)<Object(v.e)(s,i)}(o);const[l,d]=c?[s,a]:[a,s],h=Object(M.a)(d,k);return e===b.a.Horizontal?h.z=l.z:(h.x=l.x,h.y=l.y),n.toRenderCoords(l,t.startRenderSpace),n.toRenderCoords(h,t.endRenderSpace),t}}}function z(t,e,i){return i.toRenderCoords(e.elevationAlignedStartPoint,t.startRenderSpace),i.toRenderCoords(e.elevationAlignedEndPoint,t.endRenderSpace),t}(s=n||(n={}))[s.Start=0]="Start",s[s.End=1]="End";const k=Object(x.j)(0,0,0,null);const E=new P.a;function H(t,e){const{measureType:i,elevationAlignedStartPoint:n,elevationAlignedEndPoint:s,directSegment:{startRenderSpace:a,endRenderSpace:r},directSegment:o,renderCoordsHelper:c}=e,d=o.eval(.5,S.d.get()),h=c.worldUpAtPosition(d,S.d.get()),u=c.worldBasisAtPosition(d,w.a.Y,S.d.get());switch(i){case b.a.Horizontal:Object(v.l)(t,h);break;case b.a.Vertical:Object(v.n)(a,h)<Object(v.n)(r,h)?Object(v.H)(t,r,a):Object(v.H)(t,a,r),Object(v.o)(t,t,h),Object(v.o)(t,t,h);break;case b.a.Direct:{const i=Object(l.u)(e.orientation,0);if(G({elevationAlignedStartPoint:n,elevationAlignedEndPoint:s}))Object(j.g)(I,-Object(m.h)(i),h),Object(v.v)(t,u,I);else{const e=Object(v.H)(S.d.get(),r,a),n=Object(v.o)(S.d.get(),e,h);Object(v.o)(n,n,e),Object(j.g)(I,Object(m.h)(i),e),Object(v.v)(t,n,I)}break}}return Object(v.f)(t,y.c)?Object(v.l)(t,u):Object(v.w)(t,t)}const I=Object(g.d)();function G({elevationAlignedStartPoint:t,elevationAlignedEndPoint:e}){return Object(l.l)(t)&&Object(l.l)(e)&&t.x===e.x&&t.y===e.y}function L(t,e){const{offsetAxis:i,offset:n,relativeToSegment:{startRenderSpace:s,endRenderSpace:a},relativeToSegment:r,renderCoordsHelper:o}=e,c=n/o.unitInMeters,[l,d]=function(t,e,i,n=0){const s=Object(v.n)(e,i),a=Object(v.n)(t,i),r=Math.abs(s-a)+n;return s>a?[r,n]:[n,r]}(s,a,i,c);return Object(v.I)(t.startRenderSpace,r.startRenderSpace,i,l),Object(v.I)(t.endRenderSpace,r.endRenderSpace,i,d),t}function V(t,e,i){const n=e.directSegment.eval(.5,S.d.get());return i.worldUpAtPosition(n,t)}function F(t,e){const{startRenderSpace:i,endRenderSpace:n}=e.directSegment;return Object(v.H)(t,n,i)}function U(t,e,i={invert:!1}){const{startRenderSpace:n,endRenderSpace:s}=e.dimensionSegment;return i.invert?Object(v.H)(t,n,s):Object(v.H)(t,s,n)}function B(t,e){const i=t.directSegment.eval(.5,S.d.get());return e.headingAtPosition(i,t.primaryOffsetAxis)}const Q=Object(y.f)();function W(t){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:i}=t;if(Object(l.k)(e)||Object(l.k)(i))return!1;const n=Object(C.c)(e,i);return Object(l.l)(n)&&Object(_.g)(n,"meters").value>N}const N=1e5;function q(t){return Object(l.l)(t.geometry)}let Y=class extends r.a{constructor(t){super(t),this._handles=new O.a}initialize(){const{computations:t}=this.analysisViewData;for(const e of t)this._addComputation(e);this.addHandles(t.on("change",(({added:t,removed:e})=>{for(const i of e)this._removeComputation(i);for(const i of t)this._addComputation(i)})))}destroy(){this._handles=Object(l.e)(this._handles)}get analysis(){return this.analysisViewData.analysis}get _defaultUnit(){return Object(f.e)(this.view)}_addComputation(t){this._handles.has(t)||this._handles.add(Object(d.f)((()=>D(t)),(e=>{const{measureType:i}=e;if(W(e)&&i!==b.a.Direct){const e=Math.round(Object(f.d)(N,"meters","kilometers"));return c.a.getLogger(this.declaredClass).warnOnce(`A ${i} dimension in the analysis (id: '${this.analysis.id}') will not display, because only direct dimensions can measure lengths greater than ${e} km. Update the measureType of the affected dimension to "direct" to display it.`),void(t.geometry=null)}const n=A(e,this.view.renderCoordsHelper,t.geometry);t.geometry=n,t.result.length=function(t,e,i){if(Object(l.k)(t))return null;const n=t.dimensionSegment.startRenderSpace,s=t.dimensionSegment.endRenderSpace,a=Object(C.b)(n,s,t.spatialReference);if(Object(l.k)(a))return null;const r=e===b.a.Vertical?Object(f.v)(a.value,a.unit,i):Object(f.r)(a.value,a.unit,i);return Object(_.g)(a,r)}(n,i,this._defaultUnit)}),d.e),t)}_removeComputation(t){this._handles.remove(t)}};Object(a.a)([Object(h.b)({constructOnly:!0})],Y.prototype,"analysisViewData",void 0),Object(a.a)([Object(h.b)({constructOnly:!0})],Y.prototype,"view",void 0),Object(a.a)([Object(h.b)()],Y.prototype,"analysis",null),Object(a.a)([Object(h.b)()],Y.prototype,"_defaultUnit",null),Y=Object(a.a)([Object(u.a)("esri.views.3d.analysis.Dimension.support.DimensionController")],Y);var X=i(521),Z=i(226),J=i(46),K=(i(167),i(228)),$=i(31),tt=i(45);const et={main:new J.a([255,127,0])};class it{constructor(){this.color=et.main,this.opacity=.5,this.radius=5}}class nt{constructor(){this.color=new J.a([127,127,127]),this.opacity=.5,this.radius=5}}class st{constructor(){this.lineSizeFraction=.8}}class at{constructor(){this.color=et.main,this.opacity=.5,this.linePaddingPx=4,this.focusedLinePaddingPx=6,this.lengthFraction=.5,this.minLengthMeters=.1}}class rt{constructor(){this.calloutOffsetPx=18,this.calloutOpacity=.5,this.calloutWidth=2,this.discScale=.3,this.focusMultiplier=2}}class ot{constructor(){this.lineSizeFraction=.25}}class ct{constructor(){this.marginPx=20,this.minScreenLengthFontSizeFactor=5}}class lt{constructor(){this.color=new J.a([255,127,0,.5])}}const dt=new class{constructor(){this.pointManipulators=new it,this.offsetManipulator=new at,this.orientationManipulator=new rt,this.markers=new st,this.labels=new ct,this.offsetLine=new ot,this.constraint=new lt,this.constraintThresholdPx=10,this.initialOffsetPx=50,this.orientationSnapThresholdDegrees=5,this.disabledPointIndicator=new nt,this.smallScreenLengthLineSizeFactor=2,this.pointerMoveTimeoutMs=2500}};var ht=i(1125),ut=i(1147),pt=i(1148),bt=i(482),Ot=i(285),ft=i(1110),mt=i(674),_t=i(62);class jt{constructor(t){this.start=t.start,this.end=t.end,this.offset=t.offset,this.heading=t.heading,this.rotation=t.rotation,this.direct=t.direct,this.horizontal=t.horizontal,this.vertical=t.vertical}manipulatorName(t){return Object.keys(this).find((e=>this.hasOwnProperty(e)&&t===this[e]))}values(){return[this.start,this.end,this.offset,this.heading,this.rotation,this.direct,this.horizontal,this.vertical]}forEachMeasureTypeManipulator(t){for(const e of b.b)t(this.manipulatorForMeasureType(e),e)}manipulatorForMeasureType(t){switch(t){case b.a.Direct:return this.direct;case b.a.Horizontal:return this.horizontal;case b.a.Vertical:return this.vertical}}}function gt(t,{lineSizePt:e,material:i}){const{calloutOffsetPx:n,calloutOpacity:s,calloutWidth:a,discScale:r,focusMultiplier:o}=dt.orientationManipulator;return{calloutLength:.25*bt.a*dt.markers.lineSizeFraction*Object($.h)(e)+n,calloutOpacity:s,calloutWidth:a,customStateMask:Ht,discScale:r,focusMultiplier:o,material:i,metadata:t}}function vt(t,e){return Object(ut.e)(t,gt(e.metadata,e))}function yt(t,e){Object(ut.i)(t,gt(t.metadata,e))}function wt(t,{computation:e,view:i}){return[Object(ft.e)(t,((t,n,s)=>{St({cancel:s,computation:e,settingHeading:!1,steps:n,view:i})})),t.events.on("immediate-click",(t=>{!function(t,e,i){const{dimension:n,geometry:s}=e;if(90===n.orientation||270===n.orientation)return n.orientation=0,void t.stopPropagation();if(Object(l.k)(s))return;const{renderCoordsHelper:a}=i,r=A({...D(e),orientation:90},a),o=A({...D(e),orientation:270},a);if(Object(l.k)(r)||Object(l.k)(o))return;const c=B(r,a),d=B(o,a),h=Pt(s,i),u=K.c.shortestSignedDiff(h,c),p=K.c.shortestSignedDiff(h,d);n.orientation=Math.abs(u)<Math.abs(p)?90:270,t.stopPropagation()}(t,e,i)}))]}function St(t){const{cancel:e,computation:i,settingHeading:n,steps:s,view:a}=t;if(!q(i))return;const{renderCoordsHelper:r}=a,{dimension:o,geometry:c}=i,d=Object(y.f)(),h=Rt(Object(y.f)(),c,c.directSegment,r),u=Tt(S.d.get(),{forHeading:n,geometry:c,renderCoordsHelper:r}),p=Object(tt.h)(h,u,Object(tt.d)()),b=Object(l.u)(o.orientation,n?()=>B(c,a.renderCoordsHelper):0);s.next(Object(pt.g)(a,p)).next((t=>{"start"===t.action&&Object(v.l)(d,t.renderStart);const e=Object(tt.q)(p),i=Object(ut.a)(d,t.renderEnd,h,e);let s=b-Object(m.q)(i);n||(s=function(t){const e=K.c.normalize(t)%90;return e<dt.orientationSnapThresholdDegrees?t-e:90-e<dt.orientationSnapThresholdDegrees?t+(90-e):t}(s)),o.orientation=s})),e.next(Object(ft.k)(o,["orientation"]))}function xt(t,{computation:e,manipulatorMeasureType:i,view:n}){let s=b.a.Direct,a=0,r=0;return[t.events.on("grab-changed",(o=>{if("start"!==o.action||!q(e))return;const{dimension:c,geometry:l}=e;s=c.measureType,a=c.offset,r=c.orientation;const d=Object(v.l)(S.d.get(),t.renderLocation);c.measureType=i,c.offset=function(t,e,i,n){const{directSegment:s}=i,a=H(S.d.get(),{measureType:e,directSegment:s,renderCoordsHelper:n}),r=L(E,{offsetAxis:a,offset:0,relativeToSegment:s,renderCoordsHelper:n}).eval(.5,S.d.get()),o=Object(v.H)(S.d.get(),t,r);return Object(v.n)(o,a)*n.unitInMeters}(d,i,l,n.renderCoordsHelper),c.orientation=0})),Object(ft.e)(t,((t,o,c)=>{if(!q(e))return;const{geometry:l,dimension:d}=e,{renderCoordsHelper:h}=n,u=T(Vt,i,e,h),p=H(S.d.get(),{measureType:i,directSegment:l.directSegment,renderCoordsHelper:h}),b=Object(pt.b)(t);o.next(b).next(Mt(n,d,u,p)),c.next(b).next((t=>(d.measureType=s,d.offset=a,d.orientation=r,t)))}))]}function Mt(t,e,i,n){const s=Object(v.k)(S.d.get(),i.endRenderSpace,i.startRenderSpace);Object(v.o)(s,s,n);const a=Object(tt.h)(i.startRenderSpace,s,Object(tt.d)()),r=Object(tt.h)(i.startRenderSpace,n,Object(tt.d)()),o=e.offset;let c,l=0;const d=new ft.a;return d.next(Object(pt.g)(t,a)).next((i=>{"start"===i.action&&(l=Object(tt.v)(r,i.renderStart));const n=(Object(tt.v)(r,i.renderEnd)-l)*t.renderCoordsHelper.unitInMeters;e.offset=o+n,c=i})),t=>(d.execute(t),c)}function Pt(t,e){const{directSegment:i}=t,{renderCoordsHelper:n}=e,s=V(S.d.get(),t,n),a=F(S.d.get(),t),r=Object(v.o)(S.d.get(),a,s),{viewForward:o}=e.state.camera;Object(v.n)(r,o)>0&&Object(v.p)(r,r,-1);const c=i.eval(.5,S.d.get());return n.headingAtPosition(c,r)}function Ct(t,e,i,{forHeading:n}){const{dimension:s,geometry:a}=e,{primaryOffsetAxis:r}=a,o=Object(v.p)(Dt,r,s.offset>=0?1:-1),c=Tt(At,{forHeading:n,geometry:a,renderCoordsHelper:i});Object(v.o)(c,c,o);const l=Object(ut.b)(o,c,y.c,Lt);t.modelTransform=l,t.renderLocation=Rt(It,a,a.dimensionSegment,i)}const Dt=Object(y.f)(),At=Object(y.f)();function Rt(t,e,i,n){const{startRenderSpace:s,endRenderSpace:a}=i,r=function(t,e){const i=F(zt,t),n=V(kt,t,e);return Object(v.n)(i,n)>0}(e,n)?s:a;return Object(v.l)(t,r)}function Tt(t,{forHeading:e,geometry:i,renderCoordsHelper:n}){return e?V(t,i,n):U(t,i,{invert:!0})}const zt=Object(y.f)(),kt=Object(y.f)();function Et(t){return Object($.h)(t)+dt.offsetManipulator.focusedLinePaddingPx}const Ht=mt.b.Custom1,It=Object(y.f)(),Gt=Object(y.f)(),Lt=Object(g.d)(),Vt=new P.a;var Ft,Ut,Bt=i(1297),Qt=i(243),Wt=i(25),Nt=i(23);i(32);function qt(t,e){if(W(t))return Ft.Direct;const{geometry:i}=t;if(Object(l.k)(i)||Object(v.t)(i.directSegment.startRenderSpace,i.directSegment.endRenderSpace))return null;const{constraintThresholdPx:n}=dt,{camera:s}=e.state,a=V(S.d.get(),i,e.renderCoordsHelper),r=F(S.d.get(),i),o=Object(v.p)(S.d.get(),a,Object(v.n)(r,a)),c=Object(v.k)(S.d.get(),r,o),d=Object(v.y)(c),h=Object(v.y)(o),{startRenderSpace:u,endRenderSpace:p}=i.directSegment,b=Math.max(s.computeRenderPixelSizeAt(u)*n,s.computeRenderPixelSizeAt(p)*n)**2;return d<b?Ft.Vertical:h<b?Ft.Horizontal:null}(Ut=Ft||(Ft={}))[Ut.Horizontal=0]="Horizontal",Ut[Ut.Vertical=1]="Vertical",Ut[Ut.Direct=2]="Direct";var Yt=i(1276),Xt=i(1240),Zt=i(1181),Jt=i(1419),Kt=i(102),$t=i(1239),te=i(734),ee=i(475),ie=i(1264),ne=i(1172),se=i(1170),ae=i(462),re=i(1009),oe=i(362),ce=i(702);var le=i(1007),de=i(1012);const he=new Map;function ue(t){if(!he.has(t)){const e=function(t,e){var i,n;const s=new ce.a({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:null!=(i=null==e?void 0:e.distance)?i:oe.a.distance,touchSensitivityMultiplier:null!=(n=null==e?void 0:e.touchSensitivityMultiplier)?n:oe.a.touchSensitivityMultiplier});return{...Object(d.f)((()=>{var e,i,n;return null!=(e=null==(i=t.map)||null==(n=i.allLayers)?void 0:n.toArray())?e:[]}),(t=>{s.featureSources=new o.a(t.map((t=>new re.a({layer:t,enabled:!0}))))}),d.a),options:s}}(t,{distance:10}),i=function(t,e){return new de.a({view:t,options:e,snappingEnginesFactory:(e,i)=>[new le.a({view:t,spatialReference:t.spatialReference,options:i})]})}(t,e.options);he.set(t,{referenceCount:0,snappingManager:i,remove:()=>{e.remove(),i.destroy()}})}const e=he.get(t);e.referenceCount++;const i=Object(Z.c)((()=>function(t,e){e.referenceCount--,e.referenceCount>0||Object(ae.a)((()=>{0===e.referenceCount&&(e.remove(),he.delete(t))}))}(t,e)));return{snappingManager:e.snappingManager,...i}}var pe=i(1135),be=i(1184),Oe=i(1269);let fe=class extends Qt.a{constructor(t){super(t),this._stagedDimension=null,this._computationManipulators=new Map,this._computationHandles=new O.a,this._snappingPipeline=new be.a,this._snappingManagerResult=ue(t.view),this.addHandles(this._snappingManagerResult),this._unfocusedOffsetManipulatorMaterial=me(),this._focusedOffsetManipulatorMaterial=me(),this._thinOffsetManipulatorMaterial=me(),this._thinOffsetManipulatorMaterial.setParameters({stipplePattern:Object(te.a)(2)}),this._constraintSnappingIndicator=new Zt.a({view:t.view,attached:!0,width:1,color:J.a.toUnitRGBA(dt.constraint.color),renderOccluded:Kt.c.OccludeAndTransparent,stipplePattern:Object(te.a)(5)});const e=J.a.toUnitRGBA(dt.disabledPointIndicator.color);e[3]*=dt.disabledPointIndicator.opacity,this._stagedStartIndicator=new Jt.a({view:t.view,attached:!1,color:e,size:2*dt.disabledPointIndicator.radius,elevationInfo:{mode:"absolute-height",offset:0},spatialReference:t.view.renderCoordsHelper.spatialReference,outlineSize:0,renderOccluded:Kt.c.OccludeAndTransparent})}initialize(){this._snappingOperation=new Oe.a({view:this.view}),this._orientationManipulatorTexture=Object(Yt.a)(this.view.toolViewManager.textures),this._orientationManipulatorMaterial=new $t.a({transparent:!0,writeDepth:!1,textureId:this._orientationManipulatorTexture.texture.id,renderOccluded:Kt.c.Opaque});const{computations:t}=this.analysisViewData;for(const e of t)this._addComputation(e);this.addHandles([t.on("after-add",(t=>this._addComputation(t.item))),t.on("after-remove",(t=>this._removeComputation(t.item)))]),this.addHandles([Object(d.f)((()=>({stagedPoint:this._snappingOperation.stagedPoint,stagedComputation:this._stagedComputation})),(({stagedPoint:t,stagedComputation:e})=>{if(Object(l.k)(e)||Object(l.k)(t))return;const i=Object(M.a)(t,new _t.a);this._applyPointUpdate(e,{endPoint:i})}),d.d),Object(d.f)((()=>({stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator})),((t,e)=>{const{stagedDimension:i,selectedComputation:n,firstGrabbedManipulator:s}=t;if(i===e.stagedDimension&&s===e.firstGrabbedManipulator){for(const a of[n,e.selectedComputation])if(Object(l.l)(a)){const e=this._computationManipulators.get(a);this._updateManipulators(a,e,t)}}else for(const[a,r]of this._computationManipulators)this._updateManipulators(a,r,t)}),d.e),Object(d.f)((()=>this.analysis.style.lineSize),(t=>{this._updateManipulatorStyle(t)}),d.a),Object(d.f)((()=>this.view.state.camera),(()=>{Object(l.l)(this._stagedComputation)&&this._updateStagedDimensionOffset(this._stagedComputation)})),Object(d.f)((()=>Object(l.b)(this._stagedComputation,(t=>{const e=t.elevationAlignedStartPoint,i=Object(y.f)();return Object(l.l)(e)&&this.view.renderCoordsHelper.toRenderCoords(e,i)?i:null}))),(t=>{Object(l.l)(t)?(this._stagedStartIndicator.vertices=[t],this._stagedStartIndicator.attached=!0):this._stagedStartIndicator.attached=!1}))]),this.addHandles(this._constraintHandles),this.addHandles(this._snappingIndicatorHandles)}destroy(){this._snappingOperation=Object(l.e)(this._snappingOperation),this._computationHandles.destroy(),this._constraintSnappingIndicator.destroy(),this._stagedStartIndicator.destroy(),this._orientationManipulatorMaterial.dispose(),this._orientationManipulatorTexture.release()}get updating(){return this.updatingHandles.updating||this._snappingManager.updating}get firstGrabbedManipulator(){return this.parentTool.firstGrabbedManipulator}get hasGrabbedManipulators(){return this.parentTool.hasGrabbedManipulators}get _snappingManager(){return this._snappingManagerResult.snappingManager}get _activeComputation(){if(Object(l.l)(this._stagedComputation))return this._stagedComputation;const{selectedComputation:t}=this.analysisViewData;return this.hasGrabbedManipulators&&Object(l.l)(t)?t:null}get _stagedComputation(){const t=this._stagedDimension,e=this.analysisViewData.computations.at(-1);return Object(l.k)(t)||Object(l.k)(e)||e.dimension!==t?null:e}get _constraintHandles(){return[Object(d.g)((()=>this.analysisViewData.selectedComputation),(t=>{t.previousConstraint=qt(t,this.view)}),{...d.e,equals:Wt.b}),Object(d.f)((()=>{const t=this._activeComputation;if(Object(l.k)(t))return null;const{measureType:e,orientation:i}=t.dimension;return{measureType:e,orientation:i,computation:t}}),((t,e)=>{if(Object(l.l)(t)&&Object(l.k)(e)){const{measureType:e,orientation:i,computation:n}=t;switch(n.previousConstraint){case Ft.Horizontal:n.preConstraintProperties={measureType:b.a.Horizontal,orientation:0};break;case Ft.Vertical:n.preConstraintProperties={measureType:b.a.Vertical,orientation:0};break;case Ft.Direct:n.preConstraintProperties={measureType:b.a.Direct,orientation:i};break;default:n.preConstraintProperties={measureType:e,orientation:i}}}Object(l.k)(t)&&Object(l.l)(e)&&(e.computation.preConstraintProperties=null)}),d.d)]}get _snappingIndicatorHandles(){const t="snapping-indicator-event-handles";return[Object(d.f)((()=>({stagedComputation:this._stagedComputation,activeComputation:this._activeComputation})),(({stagedComputation:e,activeComputation:i})=>{const n=this._constraintSnappingIndicator;if(this.removeHandles(t),Object(l.k)(i))n.attached=!1;else if(i===e)n.attached=!0;else{const{start:e,end:s}=this._computationManipulators.get(i),a=()=>{n.attached=e.grabbing||s.grabbing};a(),this.addHandles([e.events.on("grab-changed",a),s.events.on("grab-changed",a)],t)}})),Object(d.f)((()=>{const t=this._activeComputation;return Object(l.l)(t)?{geometry:t.geometry,constraint:t.previousConstraint}:{}}),(({geometry:t,constraint:e})=>{const i=this._constraintSnappingIndicator;Object(l.l)(t)&&Object(l.l)(e)&&e!==Ft.Direct?(i.visible=!0,i.setGeometryFromSegment(t.directSegment)):i.visible=!1}))]}removeStaged(){return!!Object(l.l)(this._stagedDimension)&&(this.analysis.dimensions.remove(this._stagedDimension),this._stagedDimension=null,!0)}onDeactivate(){this.removeStaged(),this._resetSnappingState()}onClick(t){const{_stagedDimension:e}=this;if(Object(l.k)(e)){const e=this._onUnstagedClick(t);return this.analysis.dimensions.add(e),null}return this._onStagedClick(t),e}onPointerMove({mapPoint:t,pointerType:e}){if("touch"===e)return;const i=this._snappingContext(e);this.updatingHandles.addPromise(Object(Nt.i)(this._snappingOperation.snap({point:t},this._snappingManager,i)))}onManipulatorSelectionChanged(){Object(l.l)(this.analysisViewData.selectedComputation)&&(this._computationManipulators.get(this.analysisViewData.selectedComputation).offset.selected||(this.analysisViewData.selectedDimension=null))}_onUnstagedClick({mapPoint:t,pointerType:e}){let i=t;if("mouse"===e){const n=this._snappingContext(e);i=this._snappingManager.update({point:t,context:n})}const n=new Bt.a({startPoint:Object(M.a)(i,new _t.a),endPoint:null,measureType:b.a.Horizontal});return this._stagedDimension=n,this._resetSnappingState(),n}_onStagedClick({mapPoint:t,pointerType:e}){const i=this._stagedComputation;if(Object(l.k)(i))return;let n=t;if("mouse"===e){const i=this._snappingContext(e);n=this._snappingManager.update({point:t,context:i})}const s=Object(M.a)(n,new _t.a);this._applyPointUpdate(i,{endPoint:s}),this._stagedDimension=null,this._resetSnappingState()}_resetSnappingState(){this._snappingManager.doneSnapping(),this._snappingOperation.abort(),this._snappingOperation.stagedPoint=null}_addComputation(t){if(this._computationManipulators.has(t))return;const e=this._setupPointManipulator(t,{isStart:!0}),i=this._setupPointManipulator(t,{isStart:!1}),n=this._setupOffsetManipulator(t),s=this._setupHeadingManipulator(t),a=this._setupRotationManipulator(t),r=this._setupMeasureTypeManipulator(t,b.a.Direct),o=this._setupMeasureTypeManipulator(t,b.a.Horizontal),c=this._setupMeasureTypeManipulator(t,b.a.Vertical),l=new jt({start:e,end:i,offset:n,heading:s,rotation:a,direct:r,horizontal:o,vertical:c});this._setupComputationToManipulatorsSync(t,l),this._computationManipulators.set(t,l),this.manipulators.addMany(l.values())}_removeComputation(t){const e=this._computationManipulators.get(t);if(!Object(l.k)(e)){this._computationHandles.remove(t),this._computationManipulators.delete(t);for(const t of e.values())this.manipulators.remove(t)}}_setupComputationToManipulatorsSync(t,e){this._computationHandles.add([Object(d.f)((()=>t.geometry),(()=>this._updateManipulators(t,e)),{...d.e,equals:Wt.b})],t)}_setupPointManipulator(t,e){const{view:i}=this,{dimension:n}=t,s=function(t,e){const i=Object(ut.f)(t,J.a.toUnitRGB(dt.pointManipulators.color),dt.pointManipulators.opacity,Ht);return i.available=!1,i.grabCursor="crosshair",i.radius=dt.pointManipulators.radius,i.metadata=e.metadata,i.collisionPriority=1,i}(i,{metadata:n}),a=function(t,{isStart:e,createSnappingPipelineStep:i,dimension:n,onUpdate:s,snappingPipeline:a,view:r}){const o=e?"startPoint":"endPoint",c=Object(ft.e)(t,((t,e,c,l)=>{const d=Object(pt.b)(t);c=c.next(d).next(Object(ft.k)(n,[o,"measureType","orientation"])),e.next(d).next(Object(pt.c)(r)).next(i(c,l),a.next).next((t=>{const e=Object(M.a)(t.mapEnd,new _t.a);s("startPoint"===o?{startPoint:e}:{endPoint:e})}))}));return[c]}(s,{isStart:e.isStart,createSnappingPipelineStep:(t,e)=>this._snappingPipeline.createSnapDragEventPipelineStep({snappingContext:this._snappingContext(e),snappingManager:this._snappingManager,updatingHandles:this.updatingHandles,cancel:t}),dimension:n,onUpdate:e=>{this._applyPointUpdate(t,e)},snappingPipeline:this._snappingPipeline,view:i});return this._computationHandles.add(a,t),s}_setupOffsetManipulator(t){const{view:e}=this,i=function(t,e){const i=[Object(y.h)(-.5,0,0),Object(y.h)(.5,0,0)],{lengthFraction:n}=dt.offsetManipulator,s=Object(Ot.j)(i.map((t=>Object(v.p)(Object(y.f)(),t,n))));return new ht.a({view:t,renderObjects:[{geometry:s,material:e.unfocusedMaterial,stateMask:mt.c.Unfocused|mt.c.Selected|Ht},{geometry:s,material:e.focusedMaterial,stateMask:mt.c.Focused|Ht}],collisionType:{type:"line",paths:[i]},radius:Et(e.lineSizePt)/2,metadata:e.metadata,available:!1,...ut.j})}(e,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,metadata:t.dimension}),n=function(t,{computation:e,view:i}){return[Object(ft.e)(t,((t,n,s)=>{if(!q(e)||!t.selected)return;const{geometry:a,dimension:r}=e,o=Object(pt.b)(t);n.next(o).next(Mt(i,r,a.dimensionSegment,a.primaryOffsetAxis)),s.next(o).next(Object(ft.k)(r,["offset"]))}))]}(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupHeadingManipulator(t){const{view:e}=this,i=vt(e,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:t.dimension}),n=function(t,{computation:e,view:i}){return[Object(ft.e)(t,((t,n,s)=>{St({cancel:s,computation:e,settingHeading:!0,steps:n,view:i})}))]}(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupRotationManipulator(t){const{view:e}=this,i=vt(e,{lineSizePt:this.analysis.style.lineSize,material:this._orientationManipulatorMaterial,metadata:t.dimension}),n=wt(i,{computation:t,view:e});return this._computationHandles.add(n,t),i}_setupMeasureTypeManipulator(t,e){const{view:i}=this,n=function(t,e){const i=[Object(y.h)(-.5,0,0),Object(y.h)(.5,0,0)],{lengthFraction:n}=dt.offsetManipulator,s=Object(Ot.j)(i),a=Object(Ot.j)(i.map((t=>Object(v.p)(Object(y.f)(),t,n))));return new ht.a({view:t,renderObjects:[{geometry:a,material:e.unfocusedMaterial,stateMask:mt.c.Unfocused|Ht},{geometry:a,material:e.focusedMaterial,stateMask:mt.c.Focused|Ht},{geometry:s,material:e.thinOffsetManipulatorMaterial,stateMask:Ht}],collisionType:{type:"line",paths:[i]},radius:Et(e.lineSizePt)/2,available:!1,metadata:e.metadata,...ut.j})}(i,{lineSizePt:this.analysis.style.lineSize,unfocusedMaterial:this._unfocusedOffsetManipulatorMaterial,focusedMaterial:this._focusedOffsetManipulatorMaterial,thinOffsetManipulatorMaterial:this._thinOffsetManipulatorMaterial,metadata:t.dimension}),s=xt(n,{computation:t,manipulatorMeasureType:e,view:i});return this._computationHandles.add(s,t),n}_updateManipulators(t,e,i={stagedDimension:this._stagedDimension,selectedComputation:this.analysisViewData.selectedComputation,firstGrabbedManipulator:this.firstGrabbedManipulator}){const{stagedDimension:n,selectedComputation:s,firstGrabbedManipulator:a}=i,{start:r,end:o,offset:c,heading:d,rotation:h}=e,u=s===t,p=q(t),{dimension:O}=t;for(const b of e.values()){const t=p&&Object(l.k)(n)&&(Object(l.k)(a)||b===a);b===c?(b.available=t,b.selected=u):b.available=t&&u}if(!p)return;Object(l.l)(qt(t,this.view))?e.forEachMeasureTypeManipulator((t=>t.available=!1)):e.manipulatorForMeasureType(O.measureType).available=!1;for(const l of[d,h])O.measureType===b.a.Direct&&0!==O.offset||(l.available=!1);G(t)?h.available=!1:d.available=!1;const{geometry:f}=t;r.renderLocation=f.directSegment.startRenderSpace,o.renderLocation=f.directSegment.endRenderSpace;const{renderCoordsHelper:m}=this.view;(function(t,e,i){const{dimensionSegment:n,primaryOffsetAxis:s}=e,a=U(It,e),r=Object(v.t)(a,y.c)?Object(j.l)(Lt):Object(ut.b)(a,s,y.c,Lt),o=Math.max(Object(v.u)(a),dt.offsetManipulator.minLengthMeters/i.unitInMeters);Object(j.n)(r,r,Object(v.B)(It,o,o,o)),t.modelTransform=r,t.renderLocation=n.eval(.5,It)})(c,f,m),d.available&&function(t,e,i){Ct(t,e,i,{forHeading:!0})}(d,t,m),h.available&&function(t,e,i){Ct(t,e,i,{forHeading:!1})}(h,t,m),e.forEachMeasureTypeManipulator(((e,i)=>{e.available&&function(t,e,i,n){const{geometry:s}=e,a=T(Vt,i,e,n),r=H(It,{measureType:i,directSegment:s.directSegment,renderCoordsHelper:n}),o=Object(v.H)(Gt,a.endRenderSpace,a.startRenderSpace),c=Object(ut.b)(o,r,y.c,Lt),l=Object(v.u)(o);Object(j.n)(c,c,Object(v.B)(Gt,l,l,l)),t.modelTransform=c,t.renderLocation=a.eval(.5,Gt)}(e,t,i,m)}))}_updateManipulatorStyle(t){const e=function(t){return Object($.h)(t)+dt.offsetManipulator.linePaddingPx}(t),i=Et(t),n={lineSizePt:t,material:this._orientationManipulatorMaterial};for(const{offset:s,heading:a,rotation:r}of this._computationManipulators.values())s.radius=i/2,yt(a,n),yt(r,n);this._unfocusedOffsetManipulatorMaterial.setParameters({width:e}),this._focusedOffsetManipulatorMaterial.setParameters({width:i})}_snappingContext(t){return new pe.a({elevationInfo:{mode:"absolute-height",offset:0},pointer:t,editGeometryOperations:new se.a(new ne.c("point",Object(ie.a)(!0,!1,this.view.spatialReference))),visualizer:new Xt.a})}_applyPointUpdate(t,e){const{view:i}=this,n=D(t);"startPoint"in e&&(n.elevationAlignedStartPoint=e.startPoint),"endPoint"in e&&(n.elevationAlignedEndPoint=e.endPoint);const s=A(n,i.renderCoordsHelper);if(Object(l.k)(s))return;const a=qt({...n,geometry:s},i);(function(t,e,i){const{constraint:n,elevationAlignedStartPoint:s,elevationAlignedEndPoint:a,unconstrainedGeometry:r,view:o}=i,{dimension:c,previousConstraint:d,preConstraintProperties:h}=t;if(Object(l.k)(s)||Object(l.k)(a))return;const u=()=>{"startPoint"in e?c.startPoint=e.startPoint:"endPoint"in e&&(c.endPoint=e.endPoint)};if(Object(l.k)(n))u(),Object(l.l)(d)&&Object(l.l)(h)&&(c.measureType=h.measureType,c.orientation=h.orientation);else switch(c.measureType=b.a.Direct,n){case Ft.Horizontal:if(n!==d&&(c.orientation=0),"startPoint"in e){const t=e.startPoint;Object(l.l)(t)&&(t.z=a.z),c.startPoint=t}else if("endPoint"in e){const t=e.endPoint;Object(l.l)(t)&&(t.z=s.z),c.endPoint=t}break;case Ft.Vertical:if(n!==d&&(c.orientation=Pt(r,o)),"startPoint"in e){const t=e.startPoint;Object(l.l)(t)&&(t.x=a.x,t.y=a.y),c.startPoint=t}else if("endPoint"in e){const t=e.endPoint;Object(l.l)(t)&&(t.x=s.x,t.y=s.y),c.endPoint=t}break;case Ft.Direct:n!==d&&Object(l.l)(h)&&(c.orientation=h.orientation),u()}t.previousConstraint=n})(t,e,{...n,constraint:a,unconstrainedGeometry:s,view:i}),t===this._stagedComputation&&this._updateStagedDimensionOffset(t)}_updateStagedDimensionOffset(t){if(Object(l.k)(t.geometry))return;t.geometry.directSegment.eval(.5,_e);const e=this.view.state.camera.computeRenderPixelSizeAt(_e);t.dimension.offset=dt.initialOffsetPx*e}get testInfo(){const t=t=>this.analysisViewData.computations.find((e=>e.dimension===t));return{getManipulatorsForDimension:e=>this._computationManipulators.get(t(e)),getComputationForDimension:e=>t(e),getConstraintForDimension:e=>{const i=t(e);return Object(l.l)(i)?qt(i,this.view):null},stagedDimension:this._stagedDimension,stagedStartIndicator:this._stagedStartIndicator,constraintSnappingIndicator:this._constraintSnappingIndicator,snappingManager:this._snappingManager}}};function me(){const{color:t,opacity:e}=dt.offsetManipulator;return new ee.a({color:[...J.a.toUnitRGB(t),e],width:1,renderOccluded:Kt.c.OccludeAndTransparent,writeDepth:!1,hasPolygonOffset:!0})}Object(a.a)([Object(h.b)({constructOnly:!0})],fe.prototype,"analysis",void 0),Object(a.a)([Object(h.b)({constructOnly:!0})],fe.prototype,"analysisViewData",void 0),Object(a.a)([Object(h.b)({constructOnly:!0})],fe.prototype,"manipulators",void 0),Object(a.a)([Object(h.b)({constructOnly:!0})],fe.prototype,"parentTool",void 0),Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],fe.prototype,"view",void 0),Object(a.a)([Object(h.b)({readOnly:!0})],fe.prototype,"updating",null),Object(a.a)([Object(h.b)()],fe.prototype,"firstGrabbedManipulator",null),Object(a.a)([Object(h.b)()],fe.prototype,"hasGrabbedManipulators",null),Object(a.a)([Object(h.b)()],fe.prototype,"_stagedDimension",void 0),Object(a.a)([Object(h.b)()],fe.prototype,"_activeComputation",null),Object(a.a)([Object(h.b)()],fe.prototype,"_stagedComputation",null),fe=Object(a.a)([Object(u.a)("esri.views.3d.analysis.Dimension.LengthDimensionSubTool")],fe);const _e=Object(y.f)();var je,ge=i(200),ve=i(114),ye=i(1270),we=i(197),Se=i(282);!function(t){t.Ready="ready",t.Creating="creating",t.Created="created"}(je||(je={}));let xe=class extends ye.a{constructor(t){super(t),this.automaticManipulatorSelection=!1,this.removeIncompleteOnCancel=!1,this._pointerMoveTimerMs=dt.pointerMoveTimeoutMs,this._prevPointerMoveTimeout=null}initialize(){this._intersector=Object(ge.b)(this.view.state.viewingMode),this._intersector.options.store=ve.c.MIN,this._lengthDimensionSubTool=new fe({analysis:this.analysis,analysisViewData:this.analysisViewData,manipulators:this.manipulators,parentTool:this,view:this.view}),this.addHandles([Object(Z.a)(this._lengthDimensionSubTool),Object(Z.c)((()=>this._clearPointerMoveTimeout())),Object(d.f)((()=>this.state),(t=>{t===je.Created&&this.finishToolCreation()}),d.e),Object(d.g)((()=>this.firstGrabbedManipulator),(t=>{this.selectedDimension=t.metadata}),d.e),Object(d.f)((()=>this.selectedDimension),(()=>this._resetPointerMoveTimeout()),d.e)])}get state(){return this.analysis.dimensions.some((t=>"length"===t.type))?Object(l.l)(this._activeSubTool)?je.Creating:je.Created:je.Ready}get updating(){return this._lengthDimensionSubTool.updating}get cursor(){return this.active?"crosshair":null}get selectedDimension(){return this.analysisViewData.selectedDimension}set selectedDimension(t){this.analysisViewData.selectedDimension=t}onInputEvent(t){switch(t.type){case"immediate-click":this._clickHandler(t);break;case"immediate-double-click":this._doubleClickHandler(t);break;case"pointer-move":this._pointerMoveHandler(t);break;case"key-down":if(we.a.cancel===t.key){if(Object(l.l)(this._activeSubTool)&&this._activeSubTool.removeStaged())return void t.stopPropagation();this.active||(this.selectedDimension=null)}else we.a.delete.includes(t.key)&&this._deleteKeyHandler()}}onActivate(){this._activeSubTool=this._lengthDimensionSubTool}onDeactivate(){Object(l.l)(this._activeSubTool)&&(this._activeSubTool.onDeactivate(),this._activeSubTool=null)}onShow(){this._resetPointerMoveTimeout()}onManipulatorSelectionChanged(){this._lengthDimensionSubTool.onManipulatorSelectionChanged()}onHide(){this.selectedDimension=null}_clickHandler(t){if(this.hasFocusedManipulators)return void t.stopPropagation();if(Object(l.k)(this._activeSubTool))return;const e=this._intersectScreen(t);Object(l.k)(e)||(this.selectedDimension=this._activeSubTool.onClick({mapPoint:e,pointerType:t.pointerType}),t.stopPropagation())}_doubleClickHandler(t){this.active&&(this.view.activeTool=null,t.stopPropagation())}_pointerMoveHandler(t){if(this._resetPointerMoveTimeout(),Object(l.k)(this._activeSubTool))return;if(this.hasFocusedManipulators)return;const e=this._intersectScreen(t);Object(l.k)(e)||this._activeSubTool.onPointerMove({mapPoint:e,pointerType:t.pointerType})}_deleteKeyHandler(){Object(l.l)(this._activeSubTool)&&this._activeSubTool.removeStaged(),this._removeSelected()}_intersectScreen(t){const e=Object(Se.a)(t);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(e,this._intersector);const i=this._intersector.results.min,n=S.d.get();return i.getIntersectionPoint(n)?this.view.renderCoordsHelper.fromRenderCoords(n,this.view.spatialReference):null}_removeSelected(){Object(l.l)(this.selectedDimension)&&(this.analysis.dimensions.remove(this.selectedDimension),this.selectedDimension=null)}_clearPointerMoveTimeout(){this._prevPointerMoveTimeout=Object(l.s)(this._prevPointerMoveTimeout)}_resetPointerMoveTimeout(){this._clearPointerMoveTimeout(),this.manipulators.forEach((t=>{t.manipulator.state|=Ht})),this._prevPointerMoveTimeout=X.a.setTimeout((()=>{this.manipulators.forEach((t=>{t.manipulator.state&=~Ht}))}),this._pointerMoveTimerMs)}get testInfo(){return{...this._lengthDimensionSubTool.testInfo,setManipulatorAutoHideDelay:t=>{this._pointerMoveTimerMs=t,this._resetPointerMoveTimeout()}}}};Object(a.a)([Object(h.b)({constructOnly:!0})],xe.prototype,"view",void 0),Object(a.a)([Object(h.b)({constructOnly:!0})],xe.prototype,"analysis",void 0),Object(a.a)([Object(h.b)({readOnly:!0})],xe.prototype,"state",null),Object(a.a)([Object(h.b)({readOnly:!0})],xe.prototype,"updating",null),Object(a.a)([Object(h.b)({readOnly:!0})],xe.prototype,"cursor",null),Object(a.a)([Object(h.b)({constructOnly:!0})],xe.prototype,"analysisViewData",void 0),Object(a.a)([Object(h.b)()],xe.prototype,"selectedDimension",null),Object(a.a)([Object(h.b)()],xe.prototype,"automaticManipulatorSelection",void 0),Object(a.a)([Object(h.b)()],xe.prototype,"_activeSubTool",void 0),Object(a.a)([Object(h.b)()],xe.prototype,"_lengthDimensionSubTool",void 0),xe=Object(a.a)([Object(u.a)("esri.views.3d.analysis.Dimension.DimensionTool")],xe);i(402);var Me=i(41),Pe=i(1167),Ce=i(1317),De=i(401),Ae=i(1117),Re=i(685),Te=i(973);class ze extends Ae.a{constructor(t,e){super(t),this._hasExternalMaterial=!1,this._renderOccluded=Kt.c.OccludeAndTransparent,this._width=1,this._color=Object(De.c)(1,0,1,1),this._placement="end",this._textureId=null,this._material=e,this._hasExternalMaterial=Object(l.l)(e),this.applyProps(t)}setGeometryFromSegment(t,e){const i=t.endRenderSpace;this.transform=Object(j.i)(ke,i),this._normal=e;const{points:n}=t.createRenderGeometry(i,this.view.renderCoordsHelper);this.geometry=[n]}get renderOccluded(){return Object(l.l)(this._material)?this._material.parameters.renderOccluded:this._renderOccluded}set renderOccluded(t){this._renderOccluded=t,Object(l.l)(this._material)&&this._material.setParameters({renderOccluded:t})}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this.recreateGeometry()}get normal(){return this._normal}set normal(t){this._normal=t,this.recreateGeometry()}get width(){return Object(l.l)(this._material)?this._material.parameters.width:this._width}set width(t){this._width=t,Object(l.l)(this._material)&&this._material.setParameters({width:t})}get color(){return Object(l.l)(this._material)?this._material.parameters.color:this._color}set color(t){this._color=Object(De.a)(t),Object(l.l)(this._material)&&this._material.setParameters({color:this._color})}get placement(){return Object(l.l)(this._material)?this._material.parameters.placement:this._placement}set placement(t){this._placement=t,Object(l.l)(this._material)&&this._material.setParameters({placement:this._placement})}get textureId(){return Object(l.l)(this._material)?this._material.parameters.textureId:this._textureId}set textureId(t){this._textureId=t,Object(l.l)(this._material)&&this._material.setParameters({textureId:t})}createExternalResources(){this._hasExternalMaterial||(this._material=new Te.a({width:this._width,color:this._color,placement:this._placement,renderOccluded:this._renderOccluded,textureId:this._textureId}))}destroyExternalResources(){this._hasExternalMaterial||(this._material=null)}createGeometries(t){for(const e of Object(Re.b)(this.geometry,this.normal)){const i=Object(Re.a)(e);t.addGeometry(i,Object(l.t)(this._material))}}forEachExternalMaterial(t){this._hasExternalMaterial||t(Object(l.t)(this._material))}}const ke=Object(g.d)();class Ee{constructor(t){this.destroyed=!1,this._handles=new O.a,this._messages=null,this._labelSegment=new P.a;const{analysis:e,computation:i,view:n,messages:s}=t;this.analysis=e,this.computation=i,this.view=n,this._messages=s;const a=t.visible,r={view:n,attached:a},{fontSize:o,textColor:c,textBackgroundColor:h}=e.style;this._visualElements=new Le({marker:new ze(r,t.markerMaterial),dimension:new Zt.a(r,t.dimensionLineMaterial),startOffset:new Zt.a(r,t.offsetLineMaterial),endOffset:new Zt.a(r,t.offsetLineMaterial),dimensionSmall:new Zt.a(r,t.smallDimensionLineMaterial),startOffsetSmall:new Zt.a(r,t.smallOffsetLineMaterial),endOffsetSmall:new Zt.a(r,t.smallOffsetLineMaterial),label:new Ce.a({view:n,attached:a,distance:0,geometry:{type:"segment",sampleLocation:"center",segment:this._labelSegment,callout:!1},fontSize:Object($.h)(o),textColor:c.clone(),backgroundColor:h.clone()})}),this._handles.add([Object(d.f)((()=>i.geometry),(t=>{this.updateCameraDependentElements(n.state.camera,t,e.style),Object(l.l)(i.geometry)&&this._updateLines(i.geometry)}),{...d.a,equals:Wt.b}),Object(d.f)((()=>i.length),(t=>this._updateLabelContent(t)),d.a)])}set visible(t){for(const e of this._visualElements.values())e.attached=t}destroy(){this.destroyed=!0,this._handles=Object(l.e)(this._handles);for(const t of this._visualElements.values())t.destroy()}get testInfo(){return{dimensionVisualElement:this._visualElements.dimension,label:this._visualElements.label}}_updateLines(t){const e=R(He,n.Start,t.directSegment,t.dimensionSegment),i=R(Ie,n.End,t.directSegment,t.dimensionSegment),s=this._visualElements;s.marker.setGeometryFromSegment(t.dimensionSegment,t.primaryOffsetAxis),s.dimension.setGeometryFromSegment(t.dimensionSegment),s.startOffset.setGeometryFromSegment(e),s.endOffset.setGeometryFromSegment(i),s.dimensionSmall.setGeometryFromSegment(t.dimensionSegment),s.startOffsetSmall.setGeometryFromSegment(e),s.endOffsetSmall.setGeometryFromSegment(i)}updateCameraDependentElements(t,e,i){const n=this._visualElements;if(Object(l.k)(e)){for(const t of n.values())t.visible=!1;return}const s=t.computeScreenPixelSizeAt(e.dimensionSegment.eval(.5,Ge)),a=function(t,e){return Object(v.y)(U(Q,t))/e**2}(e,s),r=a<(Object($.h)(i.lineSize)*dt.smallScreenLengthLineSizeFactor)**2,o=!r;n.marker.visible=o,n.dimension.visible=o,n.startOffset.visible=o,n.endOffset.visible=o,n.dimensionSmall.visible=r,n.startOffsetSmall.visible=r,n.endOffsetSmall.visible=r;const c=Object($.h)(i.fontSize)*dt.labels.minScreenLengthFontSizeFactor,{label:d}=n;if(a<c**2)return void(d.visible=!1);d.visible=!0;const{dimensionSegment:h,primaryOffsetAxis:u}=e,{offset:p}=this.computation.dimension,b=(Math.sign(p)>=0?1:-1)*function(t){return 1.5*Object($.h)(t.fontSize)+dt.labels.marginPx+Object($.h)(t.lineSize/2)}(i)*s;(function(t,e,i,n){Object(v.I)(t.startRenderSpace,e.startRenderSpace,i,n),Object(v.I)(t.endRenderSpace,e.endRenderSpace,i,n)})(this._labelSegment,h,u,b),d.updateLabelPosition()}updateLabelStyle(t){const{label:e}=this._visualElements;e.fontSize=Object($.h)(t.fontSize),e.textColor=t.textColor,e.backgroundColor=t.textBackgroundColor}updateUnitsMessages(t){this._messages=t;const{length:e}=this.computation;this._updateLabelContent(e)}_updateLabelContent(t){const{label:e}=this._visualElements;Object(l.k)(t)||Object(l.k)(this._messages)?e.text="":e.text=Object(Pe.c)(this._messages,t,t.unit)}}const He=new P.a,Ie=new P.a,Ge=Object(y.f)();class Le{constructor(t){this.marker=t.marker,this.dimension=t.dimension,this.startOffset=t.startOffset,this.endOffset=t.endOffset,this.dimensionSmall=t.dimensionSmall,this.startOffsetSmall=t.startOffsetSmall,this.endOffsetSmall=t.endOffsetSmall,this.label=t.label}values(){return[this.marker,this.dimension,this.startOffset,this.endOffset,this.dimensionSmall,this.startOffsetSmall,this.endOffsetSmall,this.label]}}var Ve=i(1166);class Fe{constructor(t,e){this._textures=t,this._textureRepository=e,this._texturesByPrimitive=new Map}acquire(t){if(!this._texturesByPrimitive.has(t)){const e=Object(bt.e)(this._textures,t),i=new Ve.a(this._textureRepository,e.texture.id);return this._texturesByPrimitive.set(t,{result:e,reference:i}),e.texture}return this._texturesByPrimitive.get(t).result.texture}destroy(){this._texturesByPrimitive.forEach((({result:t,reference:e})=>{e.dispose(),t.release()})),this._texturesByPrimitive.clear()}}var Ue=i(313),Be=i(204),Qe=i(404);let We=class extends r.a{constructor(t){super(t),this.loadingMessages=!1,this._messages=null,this._dimensionVisualizations=new Map,this._markerMaterial=new Te.a({width:1,anchor:Ue.a.Tip,color:Me.b,placement:"begin-end",worldSpace:!0,hideOnShortSegments:!0,hasTip:!0,renderOccluded:Kt.c.OccludeAndTransparent}),this._dimensionLineMaterial=new ee.a({width:1,color:Me.b,renderOccluded:Kt.c.OccludeAndTransparent,markerParameters:this._markerMaterial.parameters}),this._offsetLineMaterial=new ee.a({width:1,color:Me.b,renderOccluded:Kt.c.OccludeAndTransparent,stipplePattern:Object(te.a)(5),stippleScaleWithLineWidth:!0}),this._smallDimensionLineMaterial=new ee.a({width:1,color:Me.b,renderOccluded:Kt.c.OccludeAndTransparent}),this._smallOffsetLineMaterial=new ee.a({width:1,color:Me.b,renderOccluded:Kt.c.OccludeAndTransparent,stipplePattern:Object(te.a)(5),stippleScaleWithLineWidth:!0})}get analysis(){return this.analysisViewData.analysis}get visible(){return this.analysisViewData.visible}initialize(){const{textures:t}=this.view.sharedSymbolResources;if(Object(l.l)(t)){const{textureRepository:e}=this.view._stage.renderView,i=new Fe(t,e),n=i.acquire("triangle");this.addHandles(Object(Z.c)((()=>i.destroy()))),this._markerMaterial.setParameters({textureId:n.id})}for(const i of this._lineMaterials())this.view._stage.add(i),this.addHandles(Object(Z.c)((()=>{this.view._stage.remove(i),i.dispose()})));const{computations:e}=this.analysisViewData;for(const i of e)this._addComputation(i);this.addHandles([e.on("change",(({added:t,removed:e})=>{for(const i of e)this._removeComputation(i);for(const i of t)this._addComputation(i)})),Object(d.f)((()=>J.a.toUnitRGBA(this.analysis.style.color)),(t=>{for(const e of this._lineMaterials())e.setParameters({color:t})}),d.e),Object(d.f)((()=>this.analysis.style.lineSize),(t=>{const e=Object($.h)(t);this._markerMaterial.setParameters({width:e*dt.markers.lineSizeFraction}),this._dimensionLineMaterial.setParameters({width:e,markerParameters:this._markerMaterial.parameters});const i=Math.max(e*dt.offsetLine.lineSizeFraction,1);this._offsetLineMaterial.setParameters({width:i})}),d.e),Object(d.f)((()=>({camera:this.view.state.camera,style:Ne(this.analysis)})),(({camera:t,style:e})=>{for(const[i,n]of this._dimensionVisualizations)n.updateCameraDependentElements(t,i.geometry,e),n.updateLabelStyle(e)})),Object(d.f)((()=>this.visible),(t=>{for(const e of this._dimensionVisualizations.values())e.visible=t}))]),this.addHandles([Object(Be.c)((()=>this._updateMessageBundle())),Object(d.g)((()=>!this.loadingMessages),(()=>{for(const t of this._dimensionVisualizations.values())t.updateUnitsMessages(this._messages)}),d.d)]),this._updateMessageBundle()}destroy(){this._dimensionVisualizations.forEach((t=>{t.destroy()})),this._dimensionVisualizations.clear()}get testInfo(){return{visualizations:Array.from(this._dimensionVisualizations.values()),disablePartialOcclusion:()=>{for(const t of this._lineMaterials())t.setParameters({renderOccluded:Kt.c.Occlude})}}}_addComputation(t){this._dimensionVisualizations.has(t)||this._dimensionVisualizations.set(t,new Ee({analysis:this.analysis,computation:t,view:this.view,visible:this.visible,markerMaterial:this._markerMaterial,dimensionLineMaterial:this._dimensionLineMaterial,offsetLineMaterial:this._offsetLineMaterial,smallDimensionLineMaterial:this._smallDimensionLineMaterial,smallOffsetLineMaterial:this._smallOffsetLineMaterial,messages:this._messages}))}_removeComputation(t){const e=this._dimensionVisualizations.get(t);Object(l.k)(e)||(e.destroy(),this._dimensionVisualizations.delete(t))}_lineMaterials(){return[this._markerMaterial,this._dimensionLineMaterial,this._offsetLineMaterial,this._smallDimensionLineMaterial,this._smallOffsetLineMaterial]}async _updateMessageBundle(){this.loadingMessages=!0;try{this._messages=await Object(Qe.a)("esri/core/t9n/Units")}finally{this.loadingMessages=!1}}};function Ne(t){const{fontSize:e,lineSize:i,textColor:n,textBackgroundColor:s}=t.style;return{fontSize:e,lineSize:i,textBackgroundColor:s.clone(),textColor:n.clone()}}Object(a.a)([Object(h.b)({constructOnly:!0})],We.prototype,"analysisViewData",void 0),Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],We.prototype,"view",void 0),Object(a.a)([Object(h.b)()],We.prototype,"analysis",null),Object(a.a)([Object(h.b)()],We.prototype,"visible",null),Object(a.a)([Object(h.b)()],We.prototype,"loadingMessages",void 0),We=Object(a.a)([Object(u.a)("esri.views.3d.analysis.Dimension.DimensionVisualization")],We);let qe=class extends r.a{constructor(t){super(t),this.dimension=null,this.length=null}};Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],qe.prototype,"dimension",void 0),Object(a.a)([Object(h.b)()],qe.prototype,"length",void 0),qe=Object(a.a)([Object(u.a)("esri.views.3d.analysis.LengthDimensionResult")],qe);const Ye=qe;let Xe=class extends r.a{constructor(t){super(t),this.geometry=null,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}normalizeCtorArgs(t){const{dimension:e,...i}=t;return{result:new Ye({dimension:e}),...i}}initialize(){this.addHandles([Object(d.f)((()=>this.dimension.startPoint),(t=>this.elevationAlignedStartPoint=this.projectAndAlignPoint(t)),d.e),Object(d.f)((()=>this.dimension.endPoint),(t=>this.elevationAlignedEndPoint=this.projectAndAlignPoint(t)),d.e)])}get dimension(){return this.result.dimension}get length(){return this.result.length}};Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],Xe.prototype,"result",void 0),Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],Xe.prototype,"projectAndAlignPoint",void 0),Object(a.a)([Object(h.b)()],Xe.prototype,"dimension",null),Object(a.a)([Object(h.b)()],Xe.prototype,"length",null),Object(a.a)([Object(h.b)()],Xe.prototype,"geometry",void 0),Object(a.a)([Object(h.b)()],Xe.prototype,"elevationAlignedStartPoint",void 0),Object(a.a)([Object(h.b)()],Xe.prototype,"elevationAlignedEndPoint",void 0),Object(a.a)([Object(h.b)()],Xe.prototype,"preConstraintProperties",void 0),Object(a.a)([Object(h.b)()],Xe.prototype,"previousConstraint",void 0),Xe=Object(a.a)([Object(u.a)("esri.views.3d.analysis.LengthDimensionComputation")],Xe);var Ze=i(1180),Je=i(1271);const Ke=t=>{let e=class extends t{constructor(...t){super(...t),this.analysis=null,this.tool=null,this.selectedDimension=null,this.interactive=!1,this.visible=null}get results(){return new o.a}createLengthDimensions(t){throw new Error("Method not implemented.")}};return Object(a.a)([Object(h.b)({constructOnly:!0})],e.prototype,"view",void 0),Object(a.a)([Object(h.b)({constructOnly:!0,nonNullable:!0})],e.prototype,"analysis",void 0),Object(a.a)([Object(h.b)()],e.prototype,"tool",void 0),Object(a.a)([Object(h.b)({readOnly:!0})],e.prototype,"results",null),Object(a.a)([Object(h.b)()],e.prototype,"selectedDimension",void 0),Object(a.a)([Object(h.b)()],e.prototype,"interactive",void 0),Object(a.a)([Object(h.b)()],e.prototype,"visible",void 0),e=Object(a.a)([Object(u.a)("esri.views.analysis.DimensionAnalysisView")],e),e};let $e=class extends(Ke(Object(p.a)(r.a))){constructor(t){super(t),this.type="dimension-view-3d",this.tool=null,this.computations=new o.a,this.selectedDimension=null,this._dimensionsToComputations=new Map,this._placementTask=null,this._projectAndAlignPoint=null}initialize(){this._projectAndAlignPoint=t=>{if(Object(l.k)(t))return null;const{spatialReference:e,elevationProvider:i}=this.view,n=Object(Ze.a)(t,e,i);return Object(l.k)(n)&&Object(Ze.b)(this.analysis,t.spatialReference,c.a.getLogger(this.declaredClass)),n},this.addHandles([Object(Je.b)(this,xe),Object(d.b)((()=>this.analysis.dimensions),"after-add",(t=>this._onDimensionAdd(t.item)),{onListenerAdd:t=>{for(const e of t)this._onDimensionAdd(e)},onListenerRemove:()=>{this._onDimensionsClear()}}),Object(d.b)((()=>this.analysis.dimensions),"after-remove",(t=>this._onDimensionRemove(t.item)))]),this._analysisVisualization=new We({analysisViewData:this,view:this.view}),this._analysisController=new Y({analysisViewData:this,view:this.view})}destroy(){this._placementTask=Object(l.a)(this._placementTask),this._analysisVisualization=Object(l.e)(this._analysisVisualization),Object(Je.c)(this)}get updating(){var t,e;return null!=(t=null==(e=this._analysisVisualization)?void 0:e.loadingMessages)&&t}get results(){return this.analysis.dimensions.map((t=>this._dimensionsToComputations.get(t).result))}get selectedComputation(){const{selectedDimension:t}=this;return Object(l.k)(t)?null:this._dimensionsToComputations.get(t)}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}async createLengthDimensions(t){return this.selectedDimension=null,this._placementTask=Object(l.a)(this._placementTask),this._placementTask=Object(Je.a)(this,t),this._placementTask.promise}_onDimensionAdd(t){const{computations:e,_dimensionsToComputations:i}=this;if(i.has(t))return;const n=new Xe({dimension:t,projectAndAlignPoint:this._projectAndAlignPoint});e.add(n),i.set(t,n)}_onDimensionRemove(t){const{computations:e,_dimensionsToComputations:i}=this,n=e.findIndex((e=>e.dimension===t)),s=e.getItemAt(n);s.dimension===this.selectedDimension&&(this.selectedDimension=null),e.removeAt(n),i.delete(t),Object(l.e)(s)}_onDimensionsClear(){this.computations.drain((t=>t.destroy())),this._dimensionsToComputations.clear()}};Object(a.a)([Object(h.b)({readOnly:!0})],$e.prototype,"type",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"tool",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"updating",null),Object(a.a)([Object(h.b)({readOnly:!0})],$e.prototype,"results",null),Object(a.a)([Object(h.b)({readOnly:!0})],$e.prototype,"computations",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"selectedDimension",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"selectedComputation",null),Object(a.a)([Object(h.b)()],$e.prototype,"_analysisVisualization",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"_analysisController",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"_dimensionsToComputations",void 0),Object(a.a)([Object(h.b)()],$e.prototype,"_placementTask",void 0),$e=Object(a.a)([Object(u.a)("esri.views.3d.analysis.DimensionAnalysisView3D")],$e);const ti=$e}}]);
//# sourceMappingURL=21.2b0afe8f.chunk.js.map