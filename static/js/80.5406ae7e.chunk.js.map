{"version":3,"sources":["../node_modules/@arcgis/core/core/quantityUtils.js","../node_modules/@arcgis/core/core/quantityFormatUtils.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js","../node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","../node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementController.js","../node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/interfaces.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","../node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurementAnalysisView3D.js"],"names":["r","t","u","type","n","value","unit","a","o","c","e","rotationType","v","p","y","j","U","g","i","L","M","w","l","m","q","h","x","F","f","V","d","S","k","b","D","I","z","s","A","R","constructor","super","this","_handles","_quadMaterial","_outlineMaterial","_maxSize","_position","_","_up","_right","_renderOccluded","OccludeAndTransparent","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","Opaque","applyProps","renderOccluded","_updateQuadMaterial","color","outlineColor","_updateOutlineMaterial","outlineSize","recreateGeometry","size","_updateTransform","outlineRenderOccluded","geometry","previous","center","next","Math","min","createExternalResources","_quadMaterialParameters","_outlineMaterialParameters","add","view","state","camera","destroyExternalResources","removeAll","forEachExternalMaterial","createGeometries","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","addGeometry","get","O","object","computeScreenPixelSizeAt","transformation","POSITION","data","exclusive","transparent","writeDepth","polygonOffset","setParameters","width","vertex","fragment","uniforms","attributes","NORMAL","UV0","AUXPOS1","varyings","code","stripeLength","stripeEvenColor","stripeOddColor","sqrt","float","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","getLogger","_unitNormalizer","_tempStartPosition","_tempEndPosition","_tempCornerPosition","initialize","spatialReference","P","_sphericalPCPF","viewData","startPoint","analysis","elevationAlignedStartPoint","_applyProjectionAndElevationAlignment","endPoint","elevationAlignedEndPoint","result","_computedResult","destroy","E","elevationProvider","measurementMode","_euclideanDistances","_geodesicDistance","horizontal","Geodesic","Auto","mode","distance","direct","directDistance","horizontalDistance","verticalDistance","vertical","geodesicDistance","clone","abs","normalizeDistance","addPath","isGeographic","isWebMercator","_fallbackGeodesicDistance","G","prototype","None","Direct","Triangle","ProjectedGeodesic","AboveSegment","BelowSegment","initializeProgram","rctx","shader","configuration","_setPipelineState","NONE","blending","polygonOffsetEnabled","factor","units","depthTest","func","LESS","depthWrite","colorWrite","initializePipeline","transparencyPassType","primitiveType","TRIANGLE_STRIP","arguments","count","COUNT","_configuration","getConfiguration","parameters","dispose","intersect","requiresSlot","Color","OPAQUE_MATERIAL","createGLMaterial","createBufferWriter","beginSlot","ensureTechnique","vec3f","vec2f","f32","vertexBufferLayout","allocate","createBuffer","elementCount","indices","length","write","vertexAttributes","console","warn","position","normal","C","uv0","setVec","set","T","auxpos1","_parameters","arrowWidth","arrowOutlineColor","toUnitRGBA","arrowStripeEvenColor","arrowStripeOddColor","arrowSubdivisions","_origin","_originTransform","_arrowCenter","_geometry","_stripeLength","_stripesEnabled","_opacity","_arrowMaterial","_geometryChanged","attached","stripesEnabled","opacity","_updateArrowOpacity","_viewChanged","startRenderSpace","endRenderSpace","_createArrowGeometry","renderCoordsHelper","push","eval","worldUpAtPosition","ready","W","_params","triangleColor","Float32Array","triangleLineWidth","geodesicProjectionLineWidth","geodesicProjectionLineColor","guideLineWidth","guideStippleLengthPixels","direcLabelFontSize","horizontalLabelFontSize","verticalLabelFontSize","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_triangleOrientationOverride","messages","loadingMessages","visualElementOrientation","triangleCollapseRatioThreshold","visible","analysisView","viewMode","equals","_requiresGeodesicGuideAt","actualVisualizedMeasurement","Euclidean","allowVisualElementsOrientationChange","_actualVisualElementsOrientation","labels","H","stipplePattern","B","backgroundColor","textColor","fontSize","orientation","visualizedMeasurement","_measurementArrowStripeLength","_updateGeometryAndViewMode","_updateVisualElementVisibility","text","_labelsText","_updateLabelText","_updateLabelVisibility","_updateSegmentStripeLength","Q","async","_updateMessageBundle","toRenderCoords","getAltitude","_updateSegment","_updateSegmentAndTriangle","segment","startPosition","endPosition","deltaSign","altitudeDelta","_updateSegmentAndProjection","anchor","sampleLocation","J","K","projectToRenderScreen","X","Y","sign","Z","N","setAltitude","setGeometryFromSegment","euclideanDistance","notifyChange","destroyed","aboveGround","then","finally","testData","cos","_analysisVisualization","_analysisController","updating","directLabelText","horizontalLabelText","verticalLabelText","_defaultUnit","visualization","controller","readOnly","constructOnly","nonNullable"],"mappings":"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","file":"static/js/80.5406ae7e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"./maybe.js\";import{unitType as n,isBaseUnit as u,convertUnit as e,baseUnitForUnit as i}from\"./unitUtils.js\";function r(t,u){return{type:n(u),value:t,unit:u}}function a(t,u){return{type:n(u),value:t,unit:u}}function o(t,u){return{type:n(u),value:t,unit:u}}function l(t,u){return{type:n(u),value:t,unit:u}}function c(t,u,e=\"arithmetic\"){return{type:n(u),value:t,unit:u,rotationType:e}}function f(t){return u(t.unit)}function v(t,n){return r(e(t.value,t.unit,n),n)}function s(t){return v(t,i(t.unit))}function p(n,u){return t(n)?u:t(u)||n.value>e(u.value,u.unit,n.unit)?n:u}function m(n,u){return t(n)?u:t(u)||n.value<e(u.value,u.unit,n.unit)?n:u}function y(n,u){return t(n)?null:{...n,value:n.value*u}}const j=a(0,\"meters\"),U=o(0,\"square-meters\"),b=c(0,\"radians\");export{c as createAngle,o as createArea,a as createLength,r as createQuantity,l as createVolume,f as isBaseUnit,p as max,m as min,y as scale,s as toBaseUnit,v as toUnit,j as zeroMeters,b as zeroRadians,U as zeroSquareMeters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{unwrapOr as t}from\"./maybe.js\";import{toUnit as r}from\"./quantityUtils.js\";import{formatDecimal as e,formatRelativeDecimal as a,formatMetricLength as n,formatMetricRelativeLength as u,formatMetricVerticalLength as i,formatMetricRelativeVerticalLength as c,formatMetricArea as o,formatImperialLength as l,formatImperialRelativeLength as f,formatImperialVerticalLength as m,formatImperialRelativeVerticalLength as b,formatImperialArea as s,formatDMS as v,formatAngleDegrees as p,formatRelativeAngleDegrees as h}from\"./unitFormatUtils.js\";function g(t,a,n,u=2,i=\"abbr\"){return e(t,r(a,n).value,n,u,i)}function L(t,e,n,u=2,i=\"abbr\"){return a(t,r(e,n).value,n,u,i)}function M(t,r,e=2,a=\"abbr\"){return n(t,r.value,r.unit,e,a)}function d(t,r,e=2,a=\"abbr\"){return u(t,r.value,r.unit,e,a)}function w(t,r,e=2,a=\"abbr\"){return i(t,r.value,r.unit,e,a)}function I(t,r,e=2,a=\"abbr\"){return c(t,r.value,r.unit,e,a)}function R(t,r,e=2,a=\"abbr\"){return o(t,r.value,r.unit,e,a)}function y(t,r,e=2,a=\"abbr\"){return l(t,r.value,r.unit,e,a)}function V(t,r,e=2,a=\"abbr\"){return f(t,r.value,r.unit,e,a)}function j(t,r,e=2,a=\"abbr\"){return m(t,r.value,r.unit,e,a)}function D(t,r,e=2,a=\"abbr\"){return b(t,r.value,r.unit,e,a)}function A(t,r,e=2,a=\"abbr\"){return s(t,r.value,r.unit,e,a)}function T(t){return v(t.value,t.unit)}function U(t,r,e){return p(t.value,t.unit,t.rotationType,r,e)}function q(t,r,e){return h(t.value,t.unit,t.rotationType,r,e)}function x(r,e,a,n,u=\"abbr\"){switch(n=t(n,2),a){case\"imperial\":return y(r,e,n,u);case\"metric\":return M(r,e,n,u);default:return g(r,e,a,n,u)}}function F(t,r,e,a=2,n=\"abbr\"){switch(e){case\"imperial\":return V(t,r,a,n);case\"metric\":return d(t,r,a,n);default:return L(t,r,e,a,n)}}function S(t,r,e,a=2,n=\"abbr\"){switch(e){case\"imperial\":return j(t,r,a,n);case\"metric\":return w(t,r,a,n);default:return g(t,r,e,a,n)}}function k(t,r,e,a=2,n=\"abbr\"){switch(e){case\"imperial\":return D(t,r,a,n);case\"metric\":return I(t,r,a,n);default:return L(t,r,e,a,n)}}function z(t,r,e,a=2,n=\"abbr\"){switch(e){case\"imperial\":return A(t,r,a,n);case\"metric\":return R(t,r,a,n);default:return g(t,r,e,a,n)}}export{U as formatAngle,z as formatArea,T as formatDMS,g as formatDecimal,A as formatImperialArea,y as formatImperialLength,V as formatImperialRelativeLength,D as formatImperialRelativeVerticalLength,j as formatImperialVerticalLength,x as formatLength,R as formatMetricArea,M as formatMetricLength,d as formatMetricRelativeLength,I as formatMetricRelativeVerticalLength,w as formatMetricVerticalLength,q as formatRelativeAngle,L as formatRelativeDecimal,F as formatRelativeLength,k as formatRelativeVerticalLength,S as formatVerticalLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{watch as i}from\"../../../../core/reactiveUtils.js\";import{f as r,k as s}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{i as o,n as l,b as n,c as u,k as h,a as d}from\"../../../../chunks/vec3.js\";import{c as _,Z as c}from\"../../../../chunks/vec3f64.js\";import{c as m}from\"../../../../chunks/vec4.js\";import{f as p}from\"../../../../chunks/vec4f32.js\";import{sv3d as M}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as g}from\"./Object3DVisualElement.js\";import{Geometry as f}from\"../../webgl-engine/lib/Geometry.js\";import{createPolylineGeometry as O}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as z}from\"../../webgl-engine/lib/Material.js\";import{VertexAttribute as j}from\"../../webgl-engine/lib/VertexAttribute.js\";import{ColorMaterial as y}from\"../../webgl-engine/materials/ColorMaterial.js\";import{RibbonLineMaterial as b}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class S extends g{constructor(t){super(t),this._handles=new e,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=_(),this._up=_(),this._right=_(),this._renderOccluded=z.OccludeAndTransparent,this._color=p(1,0,0,1),this._outlineColor=p(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=z.Opaque,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){m(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){m(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:i}){this._maxSize=Math.min(o(t,e),o(t,i))/3,l(this._up,n(this._up,e,t)),l(this._right,n(this._right,i,t)),u(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new y(this._quadMaterialParameters),this._outlineMaterial=new b(this._outlineMaterialParameters),this._handles.add(i((()=>this.view.state.camera),(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){h(this._up,c)&&h(this._right,c)||(this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e))}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=d(M.get(),this._up,this._right),i=O([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(e=this.object){const i=this.view.state.camera,a=this._size*i.computeScreenPixelSizeAt(this._position),o=Math.min(this._maxSize,a);r(w,this._position),s(w,w,[o,o,o]),t(e)&&(e.transformation=w)}_quadGeometryData(e,t){const i=d(M.get(),e,t);return new f([[j.POSITION,{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[j.POSITION,[0,1,2,1,2,3]]])}get _quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this._outlineMaterialParameters)}}const w=a();export{S as RightAngleQuadVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{addProjViewLocalOrigin as e}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as i}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as d}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function n(n){const s=new i,{vertex:a,fragment:l}=s;e(a,n),a.uniforms.add(new t(\"width\",(e=>e.width))),s.attributes.add(d.POSITION,\"vec3\"),s.attributes.add(d.NORMAL,\"vec3\"),s.attributes.add(d.UV0,\"vec2\"),s.attributes.add(d.AUXPOS1,\"float\"),s.varyings.add(\"vtc\",\"vec2\"),s.varyings.add(\"vlength\",\"float\"),s.varyings.add(\"vradius\",\"float\"),a.code.add(r`void main(void) {\nvec3 bitangent = normal;\nvtc = uv0;\nvlength = auxpos1;\nvradius = 0.5 * width;\nvec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\ngl_Position = proj * pos;\n}`),l.uniforms.add([new t(\"outlineSize\",(e=>e.outlineSize)),new o(\"outlineColor\",(e=>e.outlineColor)),new t(\"stripeLength\",(e=>e.stripeLength)),new o(\"stripeEvenColor\",(e=>e.stripeEvenColor)),new o(\"stripeOddColor\",(e=>e.stripeOddColor))]);const v=1/Math.sqrt(2);return l.code.add(r`\n    const float INV_SQRT2 = ${r.float(v)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),s}const s=Object.freeze(Object.defineProperty({__proto__:null,build:n},Symbol.toStringTag,{value:\"Module\"}));export{s as M,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Handles.js\";import o from\"../../../../core/Logger.js\";import{destroyMaybe as s,isNone as r,isSome as n}from\"../../../../core/maybe.js\";import{createQuantity as a}from\"../../../../core/quantityUtils.js\";import{watch as c,syncAndInitial as l}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{i as d}from\"../../../../chunks/vec3.js\";import{c as h}from\"../../../../chunks/vec3f64.js\";import{geodesicLength as u}from\"../../../../geometry/geometryEngine.js\";import v from\"../../../../geometry/Polyline.js\";import{canProjectWithoutEngine as f,projectPointToVector as _,projectPointToWGS84ComparableLonLat as j}from\"../../../../geometry/projection.js\";import{getSphericalPCPF as g,SphericalECEFSpatialReference as P,WGS84ECEFSpatialReference as y}from\"../../../../geometry/projectionEllipsoid.js\";import{isSupported as D,geodesicLengths as w,InverseGeodeticSolverResult as z,inverseGeodeticSolver as A}from\"../../../../geometry/support/geodesicUtils.js\";import{MeasurementMode as R}from\"../interfaces.js\";import{applyProjectionAndElevationAlignment as E,logFailedGeometryProjectionError as b}from\"../support/projectionUtils.js\";import{UnitNormalizer as S}from\"../support/UnitNormalizer.js\";const U=\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController\",k=o.getLogger(U),C=1e5;let M=class extends t{constructor(e){super(e),this._unitNormalizer=new S,this._handles=new i,this._tempStartPosition=h(),this._tempEndPosition=h(),this._tempCornerPosition=h()}initialize(){const e=this.view.spatialReference,t=g(e),i=t===P?y:t;this._sphericalPCPF=i;const o=f(e,i);this._unitNormalizer.spatialReference=o?i:e,this._handles.add([c((()=>({viewData:this.viewData,startPoint:this.analysis.startPoint})),(({viewData:e,startPoint:t})=>{e.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(t)}),l),c((()=>({viewData:this.viewData,endPoint:this.analysis.endPoint})),(({viewData:e,endPoint:t})=>{e.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(t)}),l),c((()=>({result:this._computedResult,viewData:this.viewData})),(({result:e,viewData:t})=>{t.result=e}),l)])}destroy(){this._handles=s(this._handles)}_applyProjectionAndElevationAlignment(e){if(r(e))return e;const t=E(e,this.view.spatialReference,this.view.elevationProvider);return r(t)?(b(this.analysis,e.spatialReference,k),null):t}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,measurementMode:i}=this.viewData;if(r(e)||r(t))return null;const o=this._euclideanDistances(e,t),s=this._geodesicDistance(e,t,o.horizontal.value),n=i===R.Geodesic||i===R.Auto&&o.horizontal.value>C?\"geodesic\":\"euclidean\";return{mode:n,distance:\"euclidean\"===n?o.direct:s,directDistance:o.direct,horizontalDistance:o.horizontal,verticalDistance:o.vertical,geodesicDistance:s}}_euclideanDistances(e,t){const i=e.clone();i.z=t.z;const o=this._tempStartPosition,s=this._tempEndPosition,r=this._tempCornerPosition,n=this.view.spatialReference,c=this._sphericalPCPF,l=f(n,c)?c:n;_(e,o,l),_(t,s,l),_(i,r,l);const m=d(o,s),p=d(r,s),h=Math.abs(t.z-e.z),u=e=>this._unitNormalizer.normalizeDistance(e),v=u(m),j=u(p),g=u(h);return{direct:a(v,\"meters\"),horizontal:a(j,\"meters\"),vertical:a(g,\"meters\")}}_geodesicDistance(e,t,i){const o=e.spatialReference,s=new v({spatialReference:o});s.addPath([e,t]);const r=o.isGeographic&&D(o)?w([s],\"meters\")[0]:o.isWebMercator?u(s,\"meters\"):null,c=n(r)?r:this._fallbackGeodesicDistance(e,t,i);return a(c,\"meters\")}_fallbackGeodesicDistance(e,t,i){if(j(e,G)&&j(t,L)){const e=new z;return A(e,G,L),e.distance}return i}};e([m()],M.prototype,\"view\",void 0),e([m()],M.prototype,\"analysis\",void 0),e([m()],M.prototype,\"viewData\",void 0),e([m()],M.prototype,\"_computedResult\",null),M=e([p(U)],M);const G=h(),L=h();export{M as DirectLineMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nvar e,o;!function(e){e[e.None=0]=\"None\",e[e.Direct=1]=\"Direct\",e[e.Triangle=2]=\"Triangle\",e[e.ProjectedGeodesic=3]=\"ProjectedGeodesic\"}(e||(e={})),function(e){e[e.Auto=0]=\"Auto\",e[e.AboveSegment=1]=\"AboveSegment\",e[e.BelowSegment=2]=\"BelowSegment\"}(o||(o={}));export{e as ViewMode,o as VisualElementOrientation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as n,oitBlending as i}from\"../lib/OrderIndependentTransparency.js\";import{Program as a}from\"../lib/Program.js\";import{TransparencyPassType as p}from\"../lib/TransparencyPassType.js\";import{DefaultTechniqueConfiguration as l}from\"../materials/DefaultTechniqueConfiguration.js\";import{M as u}from\"../../../../chunks/MeasurementArrow.glsl.js\";import{CompareFunction as c,PrimitiveType as m}from\"../../../webgl/enums.js\";import{makePipelineState as f,defaultDepthWriteParams as d,defaultColorWriteParams as h}from\"../../../webgl/renderState.js\";class g extends t{constructor(e,r,t){super(e,r,t)}initializeProgram(e){return new a(e.rctx,g.shader.get().build(this.configuration),s)}_setPipelineState(e){const r=e===p.NONE,t=this.configuration;return f({blending:t.transparent?r?n:i(e):null,polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:c.LESS},depthWrite:d,colorWrite:h})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return m.TRIANGLE_STRIP}}g.shader=new r(u,(()=>import(\"./MeasurementArrow.glsl.js\")));class y extends l{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1,this.transparencyPassType=p.NONE}}e([o()],y.prototype,\"polygonOffsetEnabled\",void 0),e([o()],y.prototype,\"transparent\",void 0),e([o({count:p.COUNT})],y.prototype,\"transparencyPassType\",void 0);export{g as MeasurementArrowTechnique,y as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as e,n as t,b as r,f as s,i as o,m as i}from\"../../../../chunks/vec3.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import{f as a}from\"../../../../chunks/vec4f64.js\";import{newLayout as c}from\"../../support/buffer/InterleavedLayout.js\";import{ShaderOutput as u}from\"../core/shaderLibrary/ShaderOutput.js\";import f from\"../lib/GLMaterial.js\";import{Material as l,MaterialParameters as p}from\"../lib/Material.js\";import{RenderSlot as h}from\"../lib/RenderSlot.js\";import{VertexAttribute as m}from\"../lib/VertexAttribute.js\";import{MeasurementArrowTechniqueConfiguration as d,MeasurementArrowTechnique as g}from\"../shaders/MeasurementArrowTechnique.js\";class O extends l{constructor(e){super(e,new b),this._configuration=new d}getConfiguration(e,t){return this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this.parameters.stripeEvenColor[3]<1||this.parameters.stripeOddColor[3]<1||this.parameters.outlineColor[3]<1,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration}dispose(){}intersect(){}requiresSlot(e,t){return t===u.Color&&e===h.OPAQUE_MATERIAL}createGLMaterial(e){return new v(e)}createBufferWriter(){return new S}}class v extends f{beginSlot(e){return this.ensureTechnique(g,e)}}class b extends p{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=a(1,.5,0,1),this.stripeEvenColor=a(1,1,1,1),this.stripeOddColor=a(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const y=c().vec3f(m.POSITION).vec3f(m.NORMAL).vec2f(m.UV0).f32(m.AUXPOS1),A=n(),j=n(),x=n(),I=n(),L=n();class S{constructor(){this.vertexBufferLayout=y}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(m.POSITION).length/2+1)}write(n,a,c,u,f){const l=c.vertexAttributes.get(m.POSITION).data,p=c.vertexAttributes.get(m.NORMAL).data,h=l.length/3,d=c&&c.indices&&c.indices.get(m.POSITION);d&&d.length!==2*(h-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const g=A,O=j,v=x,b=I,y=L,S=u.position,w=u.normal,C=u.uv0;let M=0;for(let m=0;m<h;++m){const c=3*m;if(e(g,l[c],l[c+1],l[c+2]),m<h-1){const o=3*(m+1);e(O,l[o],l[o+1],l[o+2]),e(y,p[o],p[o+1],p[o+2]),t(y,y),r(v,O,g),t(v,v),s(b,y,v),t(b,b)}const u=o(g,O);n&&a&&(i(g,g,n),i(O,O,n),i(b,b,a));const d=f+2*m,A=d+1;S.setVec(d,g),S.setVec(A,g),w.setVec(d,b),w.setVec(A,b),C.set(d,0,M),C.set(d,1,-1),C.set(A,0,M),C.set(A,1,1),m<h-1&&(M+=u)}const T=u.auxpos1;for(let e=0;e<2*h;++e)T.set(f+e,M)}}export{O as MeasurementArrowMaterial,b as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{getAccentColor as r,getContrastColor as t}from\"../../../../core/analysisThemeUtils.js\";import s from\"../../../../core/Handles.js\";import{applyOpacity as i}from\"../../../../core/mathUtils.js\";import{isNone as o,isSome as a}from\"../../../../core/maybe.js\";import{watch as n}from\"../../../../core/reactiveUtils.js\";import{c as h}from\"../../../../chunks/mat4f64.js\";import{b as l}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec3f64.js\";import{c}from\"../../../../chunks/vec4f64.js\";import{sv3d as p}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as m}from\"./Object3DVisualElement.js\";import{createPolylineGeometry as _}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as w}from\"../../webgl-engine/lib/Material.js\";import{MeasurementArrowMaterial as g}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class u extends m{constructor(s){super(s),this._parameters={arrowWidth:16,arrowOutlineColor:e.toUnitRGBA(r()),arrowStripeEvenColor:e.toUnitRGBA(t()),arrowStripeOddColor:e.toUnitRGBA(r()),arrowSubdivisions:128},this._handles=null,this._origin=d(),this._originTransform=h(),this._arrowCenter=d(),this._renderOccluded=w.OccludeAndTransparent,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._opacity=1,this.applyProps(s)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameters({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this.opacity,{arrowStripeEvenColor:r,arrowStripeOddColor:t}=this._parameters,s=i(y,this._stripesEnabled?r:t,e);this._arrowMaterial.setParameters({stripeEvenColor:s})}}get opacity(){return this._opacity}set opacity(e){e!==this._opacity&&(this._opacity=e,this._updateArrowOpacity())}createExternalResources(){const{arrowStripeEvenColor:e,arrowStripeOddColor:r,arrowOutlineColor:t}=this._parameters,i=this._stripesEnabled?e:r;this._arrowMaterial=new g({outlineColor:t,stripeEvenColor:i,stripeOddColor:r,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new s,this._handles.add(n((()=>this.view.state.camera),(()=>{this._viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(o(this._geometry)||o(this._geometry.startRenderSpace)||o(this._geometry.endRenderSpace))return;const r=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);e.addGeometry(r,this._arrowMaterial,this._originTransform),this._viewChanged()}_createArrowGeometry(e,r,t,s){const i=this.view.renderCoordsHelper,o=[],a=[],n=(e,r)=>{const s=p.get();l(s,e,t),o.push(s),a.push(r)};if(\"euclidean\"===s.type){s.eval(.5,this._arrowCenter);const t=p.get();i.worldUpAtPosition(this._arrowCenter,t),n(e,t),n(r,t)}else{s.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),o=p.get(),a=p.get();s.eval(t,o),i.worldUpAtPosition(o,a),n(o,a)}}return _(o,a)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&a(this._geometry)){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._parameters.arrowWidth*e})}}_updateArrowOpacity(){const e=this.opacity,{arrowStripeEvenColor:r,arrowStripeOddColor:t,arrowOutlineColor:s}=this._parameters,o=i(y,this._stripesEnabled?r:t,e),a=i(C,s,e),n=i(f,t,e);this._arrowMaterial.setParameters({stripeEvenColor:o,outlineColor:a,stripeOddColor:n})}}const y=c(),C=c(),f=c();export{u as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import\"../../../../intl.js\";import i from\"../../../../core/Accessor.js\";import{getAccentColor as s,getTextHaloColor as n,getTextColor as o}from\"../../../../core/analysisThemeUtils.js\";import a from\"../../../../core/Handles.js\";import{nextHighestPowerOfTen as r,deg2rad as l}from\"../../../../core/mathUtils.js\";import{isNone as c,destroyMaybe as d,isSome as h}from\"../../../../core/maybe.js\";import{formatDecimal as m,formatImperialLength as u,formatImperialVerticalLength as g,formatMetricLength as p,formatMetricVerticalLength as _}from\"../../../../core/quantityFormatUtils.js\";import{toUnit as v}from\"../../../../core/quantityUtils.js\";import{watch as b,syncAndInitial as L}from\"../../../../core/reactiveUtils.js\";import{createRenderScreenPointArray3 as w,createRenderScreenPointArray as y}from\"../../../../core/screenUtils.js\";import{preferredImperialLengthUnit as S,convertUnit as A}from\"../../../../core/unitUtils.js\";import{property as f}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as P}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{h as V}from\"../../../../chunks/vec2.js\";import{g as j,a as E}from\"../../../../chunks/vec3.js\";import{c as z}from\"../../../../chunks/vec3f64.js\";import{MeasurementMode as M}from\"../interfaces.js\";import{VisualElementOrientation as D,ViewMode as O}from\"./interfaces.js\";import{screenSpaceTangent as G}from\"../support/viewUtils.js\";import{LabelVisualElement as x,mirrorPosition as C}from\"../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as T}from\"../../interactive/visualElements/LineVisualElement.js\";import{MeasurementArrowVisualElement as H}from\"../../interactive/visualElements/MeasurementArrowVisualElement.js\";import{RightAngleQuadVisualElement as U}from\"../../interactive/visualElements/RightAngleQuadVisualElement.js\";import{GeodesicSegment as k,EuclideanSegment as F}from\"../../interactive/visualElements/support/Segment.js\";import{RenderOccludedFlag as R}from\"../../webgl-engine/lib/Material.js\";import{createStipplePatternSimple as B}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as Q}from\"../../../../intl/locale.js\";import{fetchMessageBundle as q}from\"../../../../intl/messages.js\";let W=class extends i{constructor(e){super(e),this._params={triangleColor:new Float32Array(t.toUnitRGBA(s(.75))),triangleLineWidth:3,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:new Float32Array(t.toUnitRGBA(s(.75))),guideLineWidth:2,guideStippleLengthPixels:6,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},this._handles=new a,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=z(),this._endPosition=z(),this._cornerPosition=z(),this._startPositionAtSeaLevel=z(),this._endPositionAtSeaLevel=z(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=D.Auto,this.triangleCollapseRatioThreshold=.03}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(c(e)||c(t)||e.equals(t))return O.None;const i=this.analysisView.result;if(c(i))return O.Direct;if(\"geodesic\"===i.mode)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?O.ProjectedGeodesic:O.Direct;const{verticalDistance:s,horizontalDistance:n}=i,o=s.value,a=n.value;return Math.min(o/a,a/o)<this.triangleCollapseRatioThreshold?O.Direct:O.Triangle}get actualVisualizedMeasurement(){if(c(this.analysisView.result))switch(this.analysisView.measurementMode){case M.Auto:case M.Euclidean:default:return\"euclidean\";case M.Geodesic:return\"geodesic\"}return this.analysisView.result.mode}get allowVisualElementsOrientationChange(){return c(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){c(this._triangleOrientationOverride)!==e&&(c(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){const e=\"geodesic\"===this.actualVisualizedMeasurement;return{direct:this._segmentLabel,horizontal:e?this._segmentLabel:this._horizontalLabel,vertical:this._verticalLabel}}initialize(){const e=this._params,i={attached:!0,view:this.view};this._segmentVisualElement=new H({...i,geometry:null,renderOccluded:R.OccludeAndTransparent}),this._triangleVisualElement=new T({...i,width:e.triangleLineWidth,color:e.triangleColor,renderOccluded:R.OccludeAndTransparent}),this._rightAngleQuad=new U({...i,color:new Float32Array(t.toUnitRGBA(s(.75))),renderOccluded:R.OccludeAndTransparent});const a={...i,polygonOffset:!0,renderOccluded:R.OccludeAndTransparent};this._projectedGeodesicLine=new T({...a,width:e.geodesicProjectionLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)}),this._geodesicStartHint=new T({...a,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)}),this._geodesicEndHint=new T({...a,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)});const r={...i,backgroundColor:n(.6),textColor:o()};this._segmentLabel=new x({...r,fontSize:e.direcLabelFontSize}),this._verticalLabel=new x({...r,fontSize:e.verticalLabelFontSize}),this._horizontalLabel=new x({...r,fontSize:e.horizontalLabelFontSize}),this._handles.add([b((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),L),b((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),L),b((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),L),b((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateLabelVisibility(e)),L),b((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),L),Q((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._handles=d(this._handles),this._segmentVisualElement=d(this._segmentVisualElement),this._triangleVisualElement=d(this._triangleVisualElement),this._rightAngleQuad=d(this._rightAngleQuad),this._projectedGeodesicLine=d(this._projectedGeodesicLine),this._geodesicStartHint=d(this._geodesicStartHint),this._geodesicEndHint=d(this._geodesicEndHint),this._segmentLabel=d(this._segmentLabel),this._verticalLabel=d(this._verticalLabel),this._horizontalLabel=d(this._horizontalLabel),this.set(\"view\",null)}_updateVisualElementVisibility({visible:e,viewMode:t}){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(t){case O.None:break;case O.Direct:this._segmentVisualElement.visible=!0;break;case O.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case O.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode({view:e,camera:t,viewMode:i,elevationAlignedStartPoint:s,elevationAlignedEndPoint:n,orientation:o,visualizedMeasurement:a,stripeLength:r}){const l=e.renderCoordsHelper;if(c(l)||c(s)||c(n)||s.equals(n))return;let d=this._startPosition,h=this._endPosition;l.toRenderCoords(s,d),l.toRenderCoords(n,h);const m=o===D.AboveSegment?1:-1,u=m*(l.getAltitude(h)-l.getAltitude(d));u<0&&(d=this._endPosition,h=this._startPosition);const g=\"geodesic\"===a?new k(this._startPosition,this._endPosition,l.spatialReference):new F(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(r),i){case O.Direct:this._updateSegment(g,o);break;case O.Triangle:this._updateSegmentAndTriangle({view:e,camera:t,segment:g,orientation:o,startPosition:d,endPosition:h,deltaSign:m,altitudeDelta:u});break;case O.ProjectedGeodesic:this._updateSegmentAndProjection({view:e,orientation:o,startPosition:d,endPosition:h})}}_updateSegment(e,t){this._segmentLabel.anchor=t===D.AboveSegment?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"}}_updateSegmentAndTriangle({view:{renderCoordsHelper:e},camera:t,segment:i,orientation:s,startPosition:n,endPosition:o,deltaSign:a,altitudeDelta:r}){const l=this._cornerPosition;e.worldUpAtPosition(n,l),j(l,l,a*Math.abs(r)),E(l,l,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[l[0],l[1],l[2]],[o[0],o[1],o[2]]]],this._rightAngleQuad.geometry={previous:n,center:l,next:o};const c=new F(n,l),d=new F(l,o),h=N(n,o,l,s,t);this._segmentLabel.anchor=h.segment,this._segmentLabel.geometry={type:\"segment\",segment:i,sampleLocation:\"center\"},this._verticalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._verticalLabel.anchor=h.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:d,sampleLocation:\"center\"},this._horizontalLabel.anchor=h.horizontal}_updateSegmentAndProjection({view:{renderCoordsHelper:e},orientation:t,startPosition:i,endPosition:s}){e.setAltitude(this._startPositionAtSeaLevel,0,i),e.setAltitude(this._endPositionAtSeaLevel,0,s);const n=new k(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(n),this._geodesicStartHint.setGeometryFromSegment(new F(this._startPositionAtSeaLevel,i)),this._geodesicEndHint.setGeometryFromSegment(new F(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:\"segment\",segment:n,sampleLocation:\"center\"},this._segmentLabel.anchor=t===D.AboveSegment?\"top\":\"bottom\"}_updateLabelText({text:e,visualizedMeasurement:t}){h(e)?(this._segmentLabel.text=\"euclidean\"===t?e.euclideanDistance:e.geodesicDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange(\"labels\")}_updateLabelVisibility({visible:e,viewMode:t}){const i=this._segmentLabel,s=this._horizontalLabel,n=this._verticalLabel;if(i.visible=!1,s.visible=!1,n.visible=!1,e)switch(t){case O.Direct:i.visible=!0;break;case O.Triangle:i.visible=!0,s.visible=!0,n.visible=!0;break;case O.ProjectedGeodesic:i.visible=!0;case O.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(c(t)||c(e))return null;const{directDistance:i,horizontalDistance:s,verticalDistance:n,geodesicDistance:o}=t,a=this.analysisView.unit,r=e=>({euclideanDistance:\"\",geodesicDistance:\"\",horizontalDistance:\"\",verticalDistance:\"\",...e});switch(a){case\"metric\":return r({euclideanDistance:i&&p(e,i),geodesicDistance:o&&p(e,o),horizontalDistance:s&&p(e,s),verticalDistance:n&&_(e,n)});case\"imperial\":return r({euclideanDistance:i&&u(e,i),geodesicDistance:o&&u(e,o),horizontalDistance:s&&u(e,s),verticalDistance:n&&g(e,n)});default:return r({euclideanDistance:i&&m(e,i,a),geodesicDistance:o&&m(e,o,a),horizontalDistance:s&&m(e,s,a),verticalDistance:n&&m(e,n,a)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;h(e)?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(h(this._triangleOrientationOverride))return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===D.Auto?this.view.state.camera.aboveGround?D.AboveSegment:D.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(!t?.state)return!1;const i=t.state.camera,s=t.renderCoordsHelper,n=i.computeScreenPixelSizeAt(e);return s.getAltitude(e)/n>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(c(e))return null;let i=null;const s=e.directDistance;switch(t){case\"metric\":i=s&&v(s,\"meters\");break;case\"imperial\":i=s&&v(s,S(s.value,s.unit));break;default:i=s&&v(s,t)}if(c(i))return null;return r(i.value/30)*A(1,i.unit,\"meters\")}_updateMessageBundle(){this.loadingMessages=!0,q(\"esri/core/t9n/Units\").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}get testData(){return{labels:this.labels,stripeLength:this._segmentVisualElement?.stripeLength}}};function N(e,t,i,s,n){const o=J,a=K;n.projectToRenderScreen(i,o),n.projectToRenderScreen(t,a);const r={segment:\"bottom\",horizontal:\"top\",vertical:o[0]<a[0]?\"left\":\"right\"};{const s=X,o=Y;if(G(e,i,s,n),G(e,t,o,n),V(s,o)>=I){const e=Math.sign(s[1])===Math.sign(o[1]);r.segment=e?C(r.vertical):r.vertical}else{const e=Z;G(i,t,e,n),V(e,o)>=I&&(r.segment=Math.sign(e[0])===Math.sign(o[0])?C(r.horizontal):r.horizontal)}}if(s===D.BelowSegment){const e=e=>\"top\"===e?\"bottom\":\"top\";r.segment=e(r.segment),r.horizontal=e(r.horizontal),r.vertical=e(r.vertical)}return r}e([f()],W.prototype,\"_triangleOrientationOverride\",void 0),e([f()],W.prototype,\"messages\",void 0),e([f()],W.prototype,\"view\",void 0),e([f()],W.prototype,\"analysis\",void 0),e([f()],W.prototype,\"analysisView\",void 0),e([f()],W.prototype,\"loadingMessages\",void 0),e([f()],W.prototype,\"visible\",null),e([f()],W.prototype,\"viewMode\",null),e([f()],W.prototype,\"actualVisualizedMeasurement\",null),e([f()],W.prototype,\"visualElementOrientation\",void 0),e([f()],W.prototype,\"triangleCollapseRatioThreshold\",void 0),e([f()],W.prototype,\"allowVisualElementsOrientationChange\",null),e([f()],W.prototype,\"labels\",null),e([f()],W.prototype,\"_labelsText\",null),e([f()],W.prototype,\"_actualVisualElementsOrientation\",null),e([f()],W.prototype,\"_measurementArrowStripeLength\",null),W=e([P(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")],W);const I=Math.cos(l(12)),J=w(),K=w(),X=y(),Y=y(),Z=y();export{W as DirectLineMeasurementVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import{destroyMaybe as e,unwrapOr as a}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as n}from\"../../../properties/defaultUnit.js\";import{AnalysisView3D as o}from\"./AnalysisView3D.js\";import{MeasurementMode as r}from\"./interfaces.js\";import{DirectLineMeasurementController as u}from\"./DirectLineMeasurement/DirectLineMeasurementController.js\";import{DirectLineMeasurementVisualization as p}from\"./DirectLineMeasurement/DirectLineMeasurementVisualization.js\";let y=class extends(o(i)){constructor(t){super(t),this.type=\"direct-line-measurement-view-3d\",this.analysis=null,this.result=null,this.measurementMode=r.Auto,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}initialize(){const t=this.view,i=this.analysis;this._analysisVisualization=new p({view:t,analysis:i,analysisView:this}),this._analysisController=new u({view:t,analysis:i,viewData:this})}destroy(){this._analysisController=e(this._analysisController),this._analysisVisualization=e(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(t){this._analysisVisualization.visualElementOrientation=t}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(t){this._analysisVisualization.allowVisualElementsOrientationChange=t}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(t){this._analysisVisualization.triangleCollapseRatioThreshold=t}get directLabelText(){return this._analysisVisualization.labels.direct.text}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal.text}get verticalLabelText(){return this._analysisVisualization.labels.vertical.text}get unit(){return a(this.analysis.unit,this._defaultUnit)}get testData(){return this.destroyed?{labels:null,stripeLength:null,visualization:null,controller:null}:{...this._analysisVisualization?.testData,visualization:this._analysisVisualization,controller:this._analysisController}}};t([s()],y.prototype,\"updating\",null),t([s({readOnly:!0})],y.prototype,\"type\",void 0),t([s({constructOnly:!0,nonNullable:!0})],y.prototype,\"analysis\",void 0),t([s()],y.prototype,\"result\",void 0),t([s()],y.prototype,\"measurementMode\",void 0),t([s()],y.prototype,\"elevationAlignedStartPoint\",void 0),t([s()],y.prototype,\"elevationAlignedEndPoint\",void 0),t([s({readOnly:!0})],y.prototype,\"viewMode\",null),t([s({readOnly:!0})],y.prototype,\"actualVisualizedMeasurement\",null),t([s()],y.prototype,\"visualElementOrientation\",null),t([s()],y.prototype,\"allowVisualElementsOrientationChange\",null),t([s()],y.prototype,\"triangleCollapseRatioThreshold\",null),t([s({readOnly:!0})],y.prototype,\"directLabelText\",null),t([s({readOnly:!0})],y.prototype,\"horizontalLabelText\",null),t([s({readOnly:!0})],y.prototype,\"verticalLabelText\",null),t([s()],y.prototype,\"_analysisVisualization\",void 0),t([s()],y.prototype,\"_analysisController\",void 0),t([s()],y.prototype,\"unit\",null),t([s(n)],y.prototype,\"_defaultUnit\",void 0),y=t([l(\"esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D\")],y);const h=y;export{h as default};\n"],"sourceRoot":""}