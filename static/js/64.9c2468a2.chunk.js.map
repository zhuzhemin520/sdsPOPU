{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/layers/graphics/centroid.js","../node_modules/@arcgis/core/chunks/quickselect.js","../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js","../node_modules/@arcgis/core/views/3d/support/EventedSet.js","../node_modules/@arcgis/core/views/3d/layers/RouteLayerView3D.js"],"names":["d","s","i","l","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","fullOpacity","n","get","suspended","canResume","suspendInfo","getSuspendInfo","legendEnabled","updating","updatingHandles","isUpdating","updatingProgress","visible","_overrideIfSome","loaded","view","ready","viewNotReady","layerNotLoaded","layerInvisible","a","prototype","readOnly","type","Boolean","p","u","c","arguments","slicePlaneEnabled","supportsHeightUnitConversion","postscript","addResolvingPromise","_validateHeightModelInfo","async","AbortController","signal","handles","add","abort","defaultsFromMap","heightModelInfoReady","heightModelInfo","effectiveScaleRange","minScale","maxScale","outsideScaleRange","N","lengths","length","originPosition","coords","f","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","h","g","E","push","sort","I","m","b","Math","sqrt","exports","log","M","exp","max","floor","min","x","spatialReference","fullExtent","Promise","resolve","equals","clone","state","isLocal","portalItem","then","destroyed","A","graphicsCore","drapeSourceType","j","Features","scaleVisibilityEnabled","frustumVisibilityEnabled","_suspendResumeExtent","S","owner","preferredUpdatePolicy","SYNC","graphicSymbolSupported","componentFactories","elevationAlignment","v","graphicsCoreOwner","queryGraphicUIDsInExtent","elevationProvider","scaleVisibility","G","basemapTerrain","objectStates","_set","V","opacityChange","elevationInfo","y","addPromise","elevationInfoChange","_initializeAsync","initializePromise","clippingArea","_updateClippingExtent","_setupSuspendResumeExtent","startCreateGraphics","destroy","removeAll","frustumVisibility","scaleVisibilitySuspended","frustumVisibilitySuspended","graphics3DGraphics","graphics3DGraphicsByObjectID","loadedGraphics","updatePolicy","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","getRenderingInfo","renderer","arcade","color","getRenderingInfoAsync","getHit","find","uid","graphic","whenGraphicBounds","reject","computeAttachmentOrigin","getSymbolLayerSize","maskOccludee","set","handle","acquireSet","P","MaskOccludee","setUid","highlight","C","_","toArray","Array","isArray","map","Highlight","setUids","setObjectIds","computedExtent","extentPadding","O","w","setExtent","setClippingExtent","recreateAllGraphics","constructOnly","Set","clear","size","emit","REMOVE","added","removed","addMany","ADD","remove","delete","removeMany","forEach","_byObjectID","Map","fullExtentInLocalViewSpatialReference","processor","addOnCollectionChange","_routeItems","_routeItemsChanged","notifyChange","once","_get","getCollections","pointBarriers","polygonBarriers","polylineBarriers","stops","directionLines","directionPoints","routeInfo","toGraphic","geometry","_updateGraphic","symbol","outsideOfView","clientGraphics","effectiveUpdatePolicy","performanceInfo","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","visibilityFrustum","property","oldValue","newValue","graphicUpdateHandler"],"mappings":"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","file":"static/js/64.9c2468a2.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.handles.add(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function n(t,n){return t?n?4:3:n?3:2}function e(e,o,u,N,l){if(t(o)||!o.lengths.length)return null;const s=\"upperLeft\"===l?.originPosition?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const c=e.coords,f=[],i=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:h}=o,g=n(u,N);let E=0;for(const t of T){const n=r(i,h,E,t,u,N,s);n&&f.push(n),E+=t*g}if(f.sort(((t,n)=>{let e=s*t[2]-s*n[2];return 0===e&&u&&(e=t[4]-n[4]),e})),f.length){let t=6*f[0][2];c[0]=f[0][0]/t,c[1]=f[0][1]/t,u&&(t=6*f[0][4],c[2]=0!==t?f[0][3]/t:0),(c[0]<i[0]||c[0]>i[1]||c[1]<i[2]||c[1]>i[3]||u&&(c[2]<i[4]||c[2]>i[5]))&&(c.length=0)}if(!c.length){const t=o.lengths[0]?I(h,0,T[0],u,N):null;if(!t)return null;c[0]=t[0],c[1]=t[1],u&&t.length>2&&(c[2]=t[2])}return e}function r(t,e,r,I,o,u,N=1){const l=n(o,u);let s=r,c=r+l,f=0,i=0,T=0,h=0,g=0;for(let n=0,m=I-1;n<m;n++,s+=l,c+=l){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],N=e[c+1],l=e[c+2];let E=n*N-u*r;h+=E,f+=(n+u)*E,i+=(r+N)*E,o&&(E=n*l-u*I,T+=(I+l)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*N>0&&(h*=-1),g*N>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function I(t,e,r,I,s){const c=n(I,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,m=r-1;n<m;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],m=t[i+2],b=I?u(n,e,r,s,c,m):o(n,e,s,c);if(b)if(T+=b,I){const t=l(n,e,r,s,c,m);h+=b*t[0],g+=b*t[1],E+=b*t[2]}else{const t=N(n,e,s,c);h+=b*t[0],g+=b*t[1]}}return T>0?I?[h/T,g/T,E/T]:[h/T,g/T]:r>0?I?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function u(t,n,e,r,I,o){const u=r-t,N=I-n,l=o-e;return Math.sqrt(u*u+N*N+l*l)}function N(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function l(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}export{e as getCentroidOptimizedGeometry,I as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nvar t,o,r,n={exports:{}};t=n,o=function(){function t(t,r,a,f,e){o(t,r,a||0,f||t.length-1,e||n)}function o(t,n,a,f,e){for(;f>a;){if(f-a>600){var h=f-a+1,i=n-a+1,u=Math.log(h),M=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);o(t,n,Math.max(a,Math.floor(n-i*M/h+c)),Math.min(f,Math.floor(n+(h-i)*M/h+c)),e)}var s=t[n],x=a,p=f;for(r(t,a,n),e(t[f],s)>0&&r(t,a,f);x<p;){for(r(t,x,p),x++,p--;e(t[x],s)<0;)x++;for(;e(t[p],s)>0;)p--}0===e(t[a],s)?r(t,a,p):r(t,++p,f),p<=n&&(a=p+1),n<=p&&(f=p-1)}}function r(t,o,r){var n=t[o];t[o]=t[r],t[r]=n}function n(t,o){return t<o?-1:t>o?1:0}return t},void 0!==(r=o())&&(t.exports=r);const a=n.exports;export{a as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{project as o}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as t}from\"../../../../portal/support/geometryServiceUtils.js\";function l(l){const s=l.view.spatialReference,i=l.layer.fullExtent,n=e(i)&&i.spatialReference;if(r(i)||!n)return Promise.resolve(null);if(n.equals(s))return Promise.resolve(i.clone());const a=o(i,s);return e(a)?Promise.resolve(a):l.view.state.isLocal?t(i,s,l.layer.portalItem).then((e=>!l.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}export{l as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Collection.js\";import{HandleOwner as s}from\"../../../../core/HandleOwner.js\";import{makeHandle as r}from\"../../../../core/handleUtils.js\";import{isSome as n,destroyMaybe as o,isNone as a}from\"../../../../core/maybe.js\";import{isAbortError as p}from\"../../../../core/promiseUtils.js\";import{watch as l,sync as c,syncAndInitial as h}from\"../../../../core/reactiveUtils.js\";import{property as u}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as y}from\"../../../../core/accessorSupport/diffUtils.js\";import g from\"../../../../layers/Layer.js\";import{hydrateGraphic as m}from\"../../../../layers/graphics/hydratedFeatures.js\";import{getRenderingInfo as f,getRenderingInfoAsync as b}from\"../../../../renderers/support/renderingInfoUtils.js\";import C from\"../../../../rest/support/Query.js\";import{DrapeSourceType as j}from\"../interfaces.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as w}from\"./constants.js\";import{Graphics3DCore as S}from\"./Graphics3DCore.js\";import v from\"./Graphics3DElevationAlignment.js\";import V from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as E}from\"./Graphics3DObjectStates.js\";import G from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as O}from\"./graphicUtils.js\";import{UpdatePolicy as x,Object3DState as P}from\"../../webgl-engine/lib/basicInterfaces.js\";let A=class extends s{constructor(t){super(t),this.type=\"graphics-3d\",this.graphicsCore=null,this.drapeSourceType=j.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null}initialize(){const{layer:t}=this,e=\"effectiveScaleRange\"in t?t:null,i=this.scaleVisibilityEnabled&&n(e),s=new S({owner:this,layer:this.owner.layer,preferredUpdatePolicy:x.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(t,e)=>new v({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:e,elevationProvider:this.view.elevationProvider}),scaleVisibility:i?(t,i)=>new G({graphicsCoreOwner:this,layer:e,queryGraphicUIDsInExtent:i,graphicsCore:t,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:t=>new E(t)}});if(this._set(\"graphicsCore\",s),this.frustumVisibilityEnabled&&this._set(\"frustumVisibility\",new V({graphicsCoreOwner:this})),\"fullOpacity\"in this.owner){const t=this.owner;this.updatingHandles.add((()=>t.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if(\"elevationInfo\"in t){const e=t;this.updatingHandles.add((()=>e.elevationInfo),((t,e)=>{y(t,e)&&this.updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set(\"initializePromise\",this._initializeAsync()),this.updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(t){if(p(t))return;throw t}this.destroyed||(this.handles.add(l((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),c)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set(\"frustumVisibility\",o(this.frustumVisibility)),this._set(\"graphicsCore\",o(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get objectStates(){return this.graphicsCore?.objectStates}get scaleVisibilitySuspended(){return!(!n(this.scaleVisibility)||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return n(this.frustumVisibility)&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||n(this.scaleVisibility)&&this.scaleVisibility.updating||n(this.frustumVisibility)&&this.frustumVisibility.updating||this.updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(t){this.graphicsCore.notifyGraphicGeometryChanged(t)}notifyGraphicVisibilityChanged(t){this.graphicsCore.notifyGraphicVisibilityChanged(t)}getRenderingInfo(t,e,i){const s=f(t,{renderer:e,arcade:i});if(n(s)&&s.color){const t=s.color;t[0]=t[0]/255,t[1]=t[1]/255,t[2]=t[2]/255}return s}getRenderingInfoAsync(t,e,i,s){return b(t,{renderer:e,arcade:i,...s})}getHit(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof g?this.layer:null,i=m(e,t);return{type:\"graphic\",graphic:i,layer:i.layer}}}return null}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(P.MaskOccludee,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof C)return _;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof e)return this.highlight([t]);if(t instanceof i&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(P.Highlight,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(P.Highlight,null);return this.objectStates.setObjectIds(i,e),s}}return _}_setupSuspendResumeExtent(){const{scaleVisibility:t,frustumVisibility:e}=this;if(a(t)&&a(e))return;const i=({computedExtent:i,extentPadding:s})=>{this._suspendResumeExtent=O(i,this._suspendResumeExtent,w,s),n(t)&&t.setExtent(this._suspendResumeExtent),n(e)&&e.setExtent(this._suspendResumeExtent)};this.handles.add(l((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(t=>i(t)),h))}_updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};t([u()],A.prototype,\"type\",void 0),t([u({constructOnly:!0})],A.prototype,\"owner\",void 0),t([u()],A.prototype,\"layer\",null),t([u()],A.prototype,\"view\",null),t([u({constructOnly:!0})],A.prototype,\"graphicsCore\",void 0),t([u()],A.prototype,\"scaleVisibility\",null),t([u({constructOnly:!0})],A.prototype,\"frustumVisibility\",void 0),t([u()],A.prototype,\"elevationAlignment\",null),t([u()],A.prototype,\"objectStates\",null),t([u()],A.prototype,\"scaleVisibilitySuspended\",null),t([u({readOnly:!0})],A.prototype,\"frustumVisibilitySuspended\",null),t([u()],A.prototype,\"suspended\",null),t([u({readOnly:!0})],A.prototype,\"updating\",null),t([u()],A.prototype,\"loadedGraphics\",null),t([u()],A.prototype,\"fullOpacity\",null),t([u()],A.prototype,\"slicePlaneEnabled\",null),t([u()],A.prototype,\"drapeSourceType\",void 0),t([u()],A.prototype,\"updatePolicy\",null),t([u({constructOnly:!0})],A.prototype,\"scaleVisibilityEnabled\",void 0),t([u({constructOnly:!0})],A.prototype,\"frustumVisibilityEnabled\",void 0),t([u()],A.prototype,\"initializePromise\",void 0),A=t([d(\"esri.views.3d.layers.graphics.GraphicsProcessor\")],A);const _=r();export{A as GraphicsProcessor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{ObservableChangesType as t}from\"../../../core/ObservableChangesType.js\";import{someSet as s}from\"../../../core/SetUtils.js\";class r extends e{constructor(){super(...arguments),this._set=new Set}clear(){if(this._set.size>0){const e=this.toArray();this._set.clear(),this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._set.size}addMany(e){if(0!==e.length){for(const t of e)this._set.add(t);this.emit(\"after-changes\",{type:t.ADD}),this.emit(\"change\",{added:e,removed:[]})}}remove(e){this._set.delete(e)&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:[e]}))}removeMany(e){const s=[];for(const t of e)this._set.delete(t)&&s.push(t);s.length>0&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:s}))}toArray(){return[...this._set]}find(e){let t;return s(this._set,(s=>!!e(s)&&(t=s,!0))),t}forEach(e){this._set.forEach((t=>e(t)))}}export{r as EventedSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Collection.js\";import r from\"../../../core/CollectionFlattener.js\";import{destroyMaybe as s,isSome as i}from\"../../../core/maybe.js\";import{initial as o,when as n,watch as a}from\"../../../core/reactiveUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../rest/support/DirectionLine.js\";import u from\"../../../rest/support/DirectionPoint.js\";import d from\"../../../rest/support/PointBarrier.js\";import h from\"../../../rest/support/PolygonBarrier.js\";import m from\"../../../rest/support/PolylineBarrier.js\";import y from\"../../../rest/support/RouteInfo.js\";import f from\"../../../rest/support/Stop.js\";import{LayerView3D as g}from\"./LayerView3D.js\";import{GraphicsProcessor as b}from\"./graphics/GraphicsProcessor.js\";import{toViewIfLocal as j}from\"./support/projectExtentUtils.js\";import{EventedSet as v}from\"../support/EventedSet.js\";import{UpdatePolicy as w}from\"../webgl-engine/lib/basicInterfaces.js\";import I from\"../../layers/LayerView.js\";function S(e){return e instanceof c||e instanceof u||e instanceof d||e instanceof h||e instanceof m||e instanceof y||e instanceof f}let _=class extends(g(I)){constructor(){super(...arguments),this.type=\"route-3d\",this.loadedGraphics=new v,this._byObjectID=new Map,this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"processor\",new b({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.updatingHandles.addOnCollectionChange((()=>this._routeItems),(e=>this._routeItemsChanged(e)),o),this.addResolvingPromise(j(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.handles.add(n((()=>this.view?.basemapTerrain?.ready),(()=>()=>this.notifyChange(\"updating\")),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set(\"processor\",s(this.processor)),this._get(\"_routeItems\")?.destroy()}get _routeItems(){return new r({getCollections:()=>[this.layer.pointBarriers,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.stops,this.layer.directionLines,this.layer.directionPoints,i(this.layer.routeInfo)?new t([this.layer.routeInfo]):null]})}_routeItemsChanged(e){if(e.removed.length){this.loadedGraphics.removeMany(e.removed.map((e=>{const t=this._byObjectID.get(e);return this._byObjectID.delete(e),t})));for(const t of e.removed)this.handles.remove(t)}if(e.added.length){this.loadedGraphics.addMany(e.added.map((e=>{const t=e.toGraphic();return this._byObjectID.set(e,t),t})));for(const t of e.added)this.handles.add([a((()=>t.geometry),((e,r)=>{this._updateGraphic(t,\"geometry\",e,r)})),a((()=>t.symbol),((e,r)=>{this._updateGraphic(t,\"symbol\",e,r)}))],t)}}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const e=super.getSuspendInfo();return e.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,e.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,e}async fetchPopupFeatures(e,t){return i(t)?t.clientGraphics:null}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor?.computeAttachmentOrigin(e,t)}getSymbolLayerSize(e,t){return this.processor.getSymbolLayerSize(e,t)}async queryGraphics(){return new t(this.loadedGraphics.toArray())}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){if(S(e)){const t=this._byObjectID.get(e);return this.processor.highlight(t)}return this.processor.highlight(e)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||w.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&this.view?.basemapTerrain?.ready)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}_updateGraphic(e,t,r,s){const i=this._byObjectID.get(e);i[t]=r,O.graphic=i,O.property=t,O.oldValue=s,O.newValue=r,this.processor?.graphicsCore.graphicUpdateHandler(O)}};e([p()],_.prototype,\"_routeItems\",null),e([p()],_.prototype,\"loadedGraphics\",void 0),e([p({readOnly:!0})],_.prototype,\"legendEnabled\",null),e([p()],_.prototype,\"layer\",void 0),e([p({readOnly:!0})],_.prototype,\"processor\",void 0),e([p({type:Boolean})],_.prototype,\"slicePlaneEnabled\",void 0),_=e([l(\"esri.views.3d.layers.RouteLayerView3D\")],_);const O={graphic:null,property:null,oldValue:null,newValue:null},V=_;export{V as default};\n"],"sourceRoot":""}